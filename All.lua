-- Merged Lua File
-- Total files merged: 50
-- Generated by Lua Merger


============================================================
-- File 1: ./Project_code/AutoFavorite.lua
============================================================

-- ============================================
-- AUTO FAVORITE MODULE - LYNX GUI COMPATIBLE
-- Optimized for integration with LynxGUI v2.3.1
-- FIXED: Instant loading, no delay on first toggle
-- ============================================

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local AutoFavoriteModule = {}

-- ============================================
-- CONFIGURATION
-- ============================================
local TIER_MAP = {
    ["Common"] = 1,
    ["Uncommon"] = 2,
    ["Rare"] = 3,
    ["Epic"] = 4,
    ["Legendary"] = 5,
    ["Mythic"] = 6,
    ["SECRET"] = 7
}

local TIER_NAMES = {
    [1] = "Common",
    [2] = "Uncommon",
    [3] = "Rare",
    [4] = "Epic",
    [5] = "Legendary",
    [6] = "Mythic",
    [7] = "SECRET"
}

-- ============================================
-- STATE VARIABLES
-- ============================================
local AUTO_FAVORITE_TIERS = {}
local AUTO_FAVORITE_ENABLED = false
local AUTO_FAVORITE_VARIANTS = {}
local AUTO_FAVORITE_VARIANT_ENABLED = false

-- ============================================
-- CACHED REFERENCES (Pre-loaded)
-- ============================================
local FavoriteEvent, NotificationEvent, itemsModule
local referencesInitialized = false
local initializationAttempted = false

local function InitializeReferences()
    if referencesInitialized then return true end
    if initializationAttempted then return referencesInitialized end
    
    initializationAttempted = true
    
    local success = pcall(function()
        -- Reduced timeout from 5 to 2 seconds for faster loading
        FavoriteEvent = ReplicatedStorage:WaitForChild("Packages", 2)
            :WaitForChild("_Index", 2)
            :WaitForChild("sleitnick_net@0.2.0", 2)
            :WaitForChild("net", 2)
            :WaitForChild("RE/FavoriteItem", 2)

        NotificationEvent = ReplicatedStorage:WaitForChild("Packages", 2)
            :WaitForChild("_Index", 2)
            :WaitForChild("sleitnick_net@0.2.0", 2)
            :WaitForChild("net", 2)
            :WaitForChild("RE/ObtainedNewFishNotification", 2)

        itemsModule = require(ReplicatedStorage:WaitForChild("Items", 2))
        referencesInitialized = true
    end)
    
    if not success then
        initializationAttempted = false -- Allow retry
    end
    
    return success
end

-- ============================================
-- FISH DATA HELPER (Cached)
-- ============================================
local fishDataCache = {}

local function getFishData(itemId)
    if fishDataCache[itemId] then
        return fishDataCache[itemId]
    end
    
    if not itemsModule then 
        InitializeReferences()
        if not itemsModule then return nil end
    end
    
    for _, fish in pairs(itemsModule) do
        if fish.Data and fish.Data.Id == itemId then
            fishDataCache[itemId] = fish
            return fish
        end
    end
    
    return nil
end

-- ============================================
-- TIER MANAGEMENT (GUI Compatible)
-- ============================================
function AutoFavoriteModule.EnableTiers(tierNames)
    if type(tierNames) == "string" then
        tierNames = {tierNames}
    end
    
    for _, tierName in ipairs(tierNames) do
        local tier = TIER_MAP[tierName]
        if tier then
            AUTO_FAVORITE_TIERS[tier] = true
            AUTO_FAVORITE_ENABLED = true
        end
    end
end

function AutoFavoriteModule.DisableTiers(tierNames)
    if type(tierNames) == "string" then
        tierNames = {tierNames}
    end
    
    for _, tierName in ipairs(tierNames) do
        local tier = TIER_MAP[tierName]
        if tier then
            AUTO_FAVORITE_TIERS[tier] = nil
        end
    end
    
    -- Check if any tier still enabled
    local anyEnabled = false
    for _ in pairs(AUTO_FAVORITE_TIERS) do
        anyEnabled = true
        break
    end
    AUTO_FAVORITE_ENABLED = anyEnabled
end

function AutoFavoriteModule.ClearTiers()
    table.clear(AUTO_FAVORITE_TIERS)
    AUTO_FAVORITE_ENABLED = false
end

function AutoFavoriteModule.GetEnabledTiers()
    local enabled = {}
    for tier, _ in pairs(AUTO_FAVORITE_TIERS) do
        table.insert(enabled, TIER_NAMES[tier])
    end
    return enabled
end

function AutoFavoriteModule.IsTierEnabled(tierName)
    local tier = TIER_MAP[tierName]
    return tier and AUTO_FAVORITE_TIERS[tier] == true
end

-- ============================================
-- VARIANT/MUTATION MANAGEMENT (GUI Compatible)
-- ============================================
function AutoFavoriteModule.EnableVariants(variantNames)
    if type(variantNames) == "string" then
        variantNames = {variantNames}
    end
    
    for _, variantName in ipairs(variantNames) do
        AUTO_FAVORITE_VARIANTS[variantName] = true
        AUTO_FAVORITE_VARIANT_ENABLED = true
    end
end

function AutoFavoriteModule.DisableVariants(variantNames)
    if type(variantNames) == "string" then
        variantNames = {variantNames}
    end
    
    for _, variantName in ipairs(variantNames) do
        AUTO_FAVORITE_VARIANTS[variantName] = nil
    end
    
    -- Check if any variant still enabled
    local anyEnabled = false
    for _ in pairs(AUTO_FAVORITE_VARIANTS) do
        anyEnabled = true
        break
    end
    AUTO_FAVORITE_VARIANT_ENABLED = anyEnabled
end

function AutoFavoriteModule.ClearVariants()
    table.clear(AUTO_FAVORITE_VARIANTS)
    AUTO_FAVORITE_VARIANT_ENABLED = false
end

function AutoFavoriteModule.GetEnabledVariants()
    local enabled = {}
    for variant, _ in pairs(AUTO_FAVORITE_VARIANTS) do
        table.insert(enabled, variant)
    end
    return enabled
end

function AutoFavoriteModule.IsVariantEnabled(variantName)
    return AUTO_FAVORITE_VARIANTS[variantName] == true
end

-- ============================================
-- STATUS & INFO (For GUI)
-- ============================================
function AutoFavoriteModule.IsEnabled()
    return AUTO_FAVORITE_ENABLED or AUTO_FAVORITE_VARIANT_ENABLED
end

function AutoFavoriteModule.IsReady()
    return referencesInitialized and connectionEstablished
end

function AutoFavoriteModule.GetStatus()
    return {
        TierEnabled = AUTO_FAVORITE_ENABLED,
        VariantEnabled = AUTO_FAVORITE_VARIANT_ENABLED,
        EnabledTiers = AutoFavoriteModule.GetEnabledTiers(),
        EnabledVariants = AutoFavoriteModule.GetEnabledVariants(),
        Ready = AutoFavoriteModule.IsReady()
    }
end

function AutoFavoriteModule.GetAllTiers()
    return {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic", "SECRET"}
end

function AutoFavoriteModule.GetAllVariants()
    return {
        "Galaxy", "Corrupt", "Gemstone", "Fairy Dust", "Midnight",
        "Color Burn", "Holographic", "Lightning", "Radioactive",
        "Ghost", "Gold", "Frozen", "1x1x1x1", "Stone", "Sandy",
        "Noob", "Moon Fragment", "Festive", "Albino", "Arctic Frost", "Disco"
    }
end

-- ============================================
-- AUTO FAVORITE CONNECTION (Optimized)
-- ============================================
local connectionEstablished = false
local eventConnection = nil

local function EstablishConnection()
    if connectionEstablished then return true end
    
    -- Initialize references if not already done
    if not referencesInitialized then
        local success = InitializeReferences()
        if not success then
            return false
        end
    end
    
    -- Setup the connection
    eventConnection = NotificationEvent.OnClientEvent:Connect(function(itemId, metadata, extraData, boolFlag)
        -- Quick exit if no filters enabled
        if not AUTO_FAVORITE_ENABLED and not AUTO_FAVORITE_VARIANT_ENABLED then
            return
        end
        
        local inventoryItem = extraData and extraData.InventoryItem
        local uuid = inventoryItem and inventoryItem.UUID
        
        -- Quick validation
        if not uuid or inventoryItem.Favorited then 
            return 
        end
        
        local shouldFavorite = false
        local favoriteReason = ""
        
        -- =====================
        -- CHECK TIER
        -- =====================
        if AUTO_FAVORITE_ENABLED then
            local fishData = getFishData(itemId)
            if fishData and fishData.Data and fishData.Data.Tier then
                if AUTO_FAVORITE_TIERS[fishData.Data.Tier] then
                    shouldFavorite = true
                    local tierName = TIER_NAMES[fishData.Data.Tier] or "Unknown"
                    favoriteReason = "[TIER: " .. tierName .. "]"
                end
            end
        end
        
        -- =====================
        -- CHECK VARIANT
        -- =====================
        if not shouldFavorite and AUTO_FAVORITE_VARIANT_ENABLED then
            local variantId = metadata and metadata.VariantId
            if variantId and variantId ~= "None" and AUTO_FAVORITE_VARIANTS[variantId] then
                shouldFavorite = true
                favoriteReason = "[VARIANT: " .. variantId .. "]"
            end
        end
        
        -- =====================
        -- EXECUTE FAVORITE
        -- =====================
        if shouldFavorite then
            task.delay(0.35, function()
                pcall(function()
                    FavoriteEvent:FireServer(uuid)
                end)
            end)
        end
    end)
    
    connectionEstablished = true
    return true
end

-- ============================================
-- START/STOP FUNCTIONS (Added for GUI control)
-- ============================================
function AutoFavoriteModule.Start()
    if not referencesInitialized then
        local success = InitializeReferences()
        if not success then
            return false, "Failed to initialize references"
        end
    end
    
    if not connectionEstablished then
        local success = EstablishConnection()
        if not success then
            return false, "Failed to establish connection"
        end
    end
    
    return true, "AutoFavorite started successfully"
end

function AutoFavoriteModule.Stop()
    -- Just disable the filters, keep connection alive
    AUTO_FAVORITE_ENABLED = false
    AUTO_FAVORITE_VARIANT_ENABLED = false
    return true, "AutoFavorite stopped"
end

-- ============================================
-- PRE-LOAD ON MODULE INITIALIZATION
-- ============================================
task.spawn(function()
    -- Wait for game to be fully loaded
    if not game:IsLoaded() then
        game.Loaded:Wait()
    end
    
    -- Small delay to ensure ReplicatedStorage is ready
    task.wait(0.1)
    
    -- Attempt initialization
    local success = InitializeReferences()
    
    if success then
        -- Establish connection immediately
        EstablishConnection()
    else
        -- Retry after delay if failed
        task.wait(1)
        InitializeReferences()
        EstablishConnection()
    end
end)

-- ============================================
-- CLEANUP
-- ============================================
function AutoFavoriteModule.Cleanup()
    -- Disconnect event
    if eventConnection then
        eventConnection:Disconnect()
        eventConnection = nil
    end
    
    -- Clear data
    table.clear(AUTO_FAVORITE_TIERS)
    table.clear(AUTO_FAVORITE_VARIANTS)
    table.clear(fishDataCache)
    
    -- Reset flags
    AUTO_FAVORITE_ENABLED = false
    AUTO_FAVORITE_VARIANT_ENABLED = false
    connectionEstablished = false
    referencesInitialized = false
    initializationAttempted = false
end

return AutoFavoriteModule

============================================================
-- File 2: ./Project_code/BlatantV2.lua
============================================================

-- ULTRA SPEED AUTO FISHING V2 - OPTIMIZED FOR MAXIMUM SPEED
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local netFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")
local RE_FishCaught = netFolder:WaitForChild("RE/FishCaught")

local fishing = {
    Running = false,
    WaitingHook = false,
    CurrentCycle = 0,
    TotalFish = 0,
    Settings = {
        FishingDelay = 0.05,
        CancelDelay = 0.01,
        HookWaitTime = 0.01,
        CastDelay = 0.25,
        TimeoutDelay = 0.8,
    },
}

_G.FishingScript = fishing

-- Event handler optimized dengan spawn untuk non-blocking
RE_MinigameChanged.OnClientEvent:Connect(function(state)
    if fishing.WaitingHook and typeof(state) == "string" and string.find(string.lower(state), "hook") then
        fishing.WaitingHook = false
        
        task.spawn(function()
            task.wait(fishing.Settings.HookWaitTime)
            RE_FishingCompleted:FireServer()
            
            task.wait(fishing.Settings.CancelDelay)
            pcall(function() RF_CancelFishingInputs:InvokeServer() end)
            
            task.wait(fishing.Settings.FishingDelay)
            if fishing.Running then fishing.Cast() end
        end)
    end
end)

RE_FishCaught.OnClientEvent:Connect(function(name, data)
    if fishing.Running then
        fishing.WaitingHook = false
        fishing.TotalFish = fishing.TotalFish + 1
        
        task.spawn(function()
            task.wait(fishing.Settings.CancelDelay)
            pcall(function() RF_CancelFishingInputs:InvokeServer() end)
            
            task.wait(fishing.Settings.FishingDelay)
            if fishing.Running then fishing.Cast() end
        end)
    end
end)

function fishing.Cast()
    if not fishing.Running or fishing.WaitingHook then return end
    
    fishing.CurrentCycle = fishing.CurrentCycle + 1
    
    task.spawn(function()
        pcall(function()
            -- Charge dan request dalam satu batch untuk kecepatan maksimal
            RF_ChargeFishingRod:InvokeServer({[10] = tick()})
            task.wait(fishing.Settings.CastDelay)
            RF_RequestMinigame:InvokeServer(10, 0, tick())
            
            fishing.WaitingHook = true
            
            -- Timeout handler yang lebih cepat
            task.delay(fishing.Settings.TimeoutDelay, function()
                if fishing.WaitingHook and fishing.Running then
                    fishing.WaitingHook = false
                    RE_FishingCompleted:FireServer()
                    
                    task.wait(fishing.Settings.CancelDelay)
                    pcall(function() RF_CancelFishingInputs:InvokeServer() end)
                    
                    task.wait(fishing.Settings.FishingDelay)
                    if fishing.Running then fishing.Cast() end
                end
            end)
        end)
    end)
end

function fishing.Start()
    if fishing.Running then return end
    fishing.Running = true
    fishing.CurrentCycle = 0
    fishing.TotalFish = 0
    fishing.Cast()
end

function fishing.Stop()
    fishing.Running = false
    fishing.WaitingHook = false
end

return fishing

============================================================
-- File 3: ./Project_code/Camera View/FreecamModule.lua
============================================================

-- ============================================
-- FREECAM MODULE - UNIVERSAL PC & MOBILE
-- ============================================
-- File: FreecamModule.lua

local FreecamModule = {}

-- Services
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

-- Variables
local Player = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local PlayerGui = Player:WaitForChild("PlayerGui")

local freecam = false
local camPos = Vector3.new()
local camRot = Vector3.new()
local speed = 50
local sensitivity = 0.3
local hiddenGuis = {}

-- Mobile detection
local isMobile = UIS.TouchEnabled and not UIS.KeyboardEnabled

-- Mobile joystick variables
local mobileJoystickInput = Vector3.new(0, 0, 0)
local joystickConnections = {}
local dynamicThumbstick = nil
local thumbstickCenter = Vector2.new(0, 0)
local thumbstickRadius = 60

-- Touch input for camera rotation
local cameraTouch = nil
local cameraTouchStartPos = nil
local joystickTouch = nil

-- Connections
local renderConnection = nil
local inputChangedConnection = nil
local inputEndedConnection = nil
local inputBeganConnection = nil

-- Character references
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

Player.CharacterAdded:Connect(function(newChar)
    Character = newChar
    Humanoid = Character:WaitForChild("Humanoid")
end)

-- ============================================
-- HELPER FUNCTIONS
-- ============================================

local function LockCharacter(state)
    if not Humanoid then return end
    
    if state then
        Humanoid.WalkSpeed = 0
        Humanoid.JumpPower = 0
        Humanoid.AutoRotate = false
        if Character:FindFirstChild("HumanoidRootPart") then
            Character.HumanoidRootPart.Anchored = true
        end
    else
        Humanoid.WalkSpeed = 16
        Humanoid.JumpPower = 50
        Humanoid.AutoRotate = true
        if Character:FindFirstChild("HumanoidRootPart") then
            Character.HumanoidRootPart.Anchored = false
        end
    end
end

local function HideAllGuis()
    hiddenGuis = {}
    
    for _, gui in pairs(PlayerGui:GetChildren()) do
        if gui:IsA("ScreenGui") and gui.Enabled then
            if mainGuiName and gui.Name == mainGuiName then
                continue
            end
            
            local guiName = gui.Name:lower()
            if guiName:find("main") or guiName:find("hub") or guiName:find("menu") or guiName:find("ui") then
                continue
            end
            
            table.insert(hiddenGuis, gui)
            gui.Enabled = false
        end
    end
end

local function ShowAllGuis()
    for _, gui in pairs(hiddenGuis) do
        if gui and gui:IsA("ScreenGui") then
            gui.Enabled = true
        end
    end
    
    hiddenGuis = {}
end

local function GetMovement()
    local move = Vector3.zero
    
    if UIS:IsKeyDown(Enum.KeyCode.W) then move = move + Vector3.new(0, 0, 1) end
    if UIS:IsKeyDown(Enum.KeyCode.S) then move = move + Vector3.new(0, 0, -1) end
    if UIS:IsKeyDown(Enum.KeyCode.A) then move = move + Vector3.new(-1, 0, 0) end
    if UIS:IsKeyDown(Enum.KeyCode.D) then move = move + Vector3.new(1, 0, 0) end
    if UIS:IsKeyDown(Enum.KeyCode.Space) or UIS:IsKeyDown(Enum.KeyCode.E) then 
        move = move + Vector3.new(0, 1, 0) 
    end
    if UIS:IsKeyDown(Enum.KeyCode.LeftShift) or UIS:IsKeyDown(Enum.KeyCode.Q) then 
        move = move + Vector3.new(0, -1, 0) 
    end
    
    if isMobile then
        move = move + mobileJoystickInput
    end
    
    return move
end

-- ============================================
-- MOBILE JOYSTICK DETECTION
-- ============================================

local function DetectDynamicThumbstick()
    if not isMobile then return end
    
    local function searchForThumbstick(parent, depth)
        depth = depth or 0
        if depth > 10 then return end
        
        for _, child in pairs(parent:GetChildren()) do
            local name = child.Name:lower()
            if name:find("thumbstick") or name:find("joystick") then
                if child:IsA("Frame") then
                    return child
                end
            end
            local result = searchForThumbstick(child, depth + 1)
            if result then return result end
        end
        return nil
    end
    
    pcall(function()
        dynamicThumbstick = searchForThumbstick(PlayerGui)
        
        if dynamicThumbstick then
            print("‚úÖ DynamicThumbstick terdeteksi: " .. dynamicThumbstick.Name)
            
            -- Hitung center dan radius thumbstick
            local pos = dynamicThumbstick.AbsolutePosition
            local size = dynamicThumbstick.AbsoluteSize
            thumbstickCenter = pos + (size / 2)
            thumbstickRadius = math.min(size.X, size.Y) / 2
            
            print("üìç Thumbstick Center: " .. tostring(thumbstickCenter))
            print("üìè Thumbstick Radius: " .. thumbstickRadius)
        end
    end)
end

local function IsPositionInThumbstick(pos)
    if not dynamicThumbstick then return false end
    
    -- Fallback: check absolute position dari thumbstick frame
    local thumbPos = dynamicThumbstick.AbsolutePosition
    local thumbSize = dynamicThumbstick.AbsoluteSize
    
    -- Check apakah pos berada dalam bounding box thumbstick
    local isWithinX = pos.X >= thumbPos.X - 50 and pos.X <= (thumbPos.X + thumbSize.X + 50)
    local isWithinY = pos.Y >= thumbPos.Y - 50 and pos.Y <= (thumbPos.Y + thumbSize.Y + 50)
    
    return isWithinX and isWithinY
end

local function GetJoystickInput(touchPos)
    if not dynamicThumbstick then return Vector3.new(0, 0, 0) end
    
    -- Convert to Vector2
    local touchPos2D = Vector2.new(touchPos.X, touchPos.Y)
    local delta = touchPos2D - thumbstickCenter
    local magnitude = delta.Magnitude
    
    if magnitude < 5 then
        return Vector3.new(0, 0, 0)
    end
    
    -- Normalize joystick input
    local maxDist = thumbstickRadius
    local normalized = delta / maxDist
    
    -- Clamp nilai
    normalized = Vector2.new(
        math.max(-1, math.min(1, normalized.X)),
        math.max(-1, math.min(1, normalized.Y))
    )
    
    -- Convert to movement direction (X = strafe, Z = forward)
    return Vector3.new(normalized.X, 0, normalized.Y)
end

-- ============================================
-- MAIN FREECAM FUNCTIONS
-- ============================================

function FreecamModule.Start()
    if freecam then return end
    
    freecam = true
    
    local currentCF = Camera.CFrame
    camPos = currentCF.Position
    local x, y, z = currentCF:ToEulerAnglesYXZ()
    camRot = Vector3.new(x, y, z)
    
    LockCharacter(true)
    HideAllGuis()
    Camera.CameraType = Enum.CameraType.Scriptable
    
    task.wait()
    
    if not isMobile then
        UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
        UIS.MouseIconEnabled = false
    else
        DetectDynamicThumbstick()
    end
    
    -- Mobile input handling
    if isMobile then
        inputBeganConnection = UIS.InputBegan:Connect(function(input, gameProcessed)
            if not freecam then return end
            
            if input.UserInputType == Enum.UserInputType.Touch then
                local pos = input.Position
                
                -- Gunakan pcall untuk avoid error dari script game lain
                local isInThumbstick = false
                pcall(function()
                    isInThumbstick = IsPositionInThumbstick(pos)
                end)
                
                if isInThumbstick then
                    joystickTouch = input
                else
                    -- Camera touch di area lain
                    cameraTouch = input
                    cameraTouchStartPos = input.Position
                end
            end
        end)
        
        inputChangedConnection = UIS.InputChanged:Connect(function(input, gameProcessed)
            if not freecam then return end
            
            if input.UserInputType == Enum.UserInputType.Touch then
                -- Handle joystick touch
                if input == joystickTouch then
                    pcall(function()
                        mobileJoystickInput = GetJoystickInput(input.Position)
                    end)
                end
                
                -- Handle camera touch
                if input == cameraTouch and cameraTouch then
                    local delta = input.Position - cameraTouchStartPos
                    
                    if delta.Magnitude > 0 then
                        camRot = camRot + Vector3.new(
                            -delta.Y * sensitivity * 0.003,
                            -delta.X * sensitivity * 0.003,
                            0
                        )
                        
                        cameraTouchStartPos = input.Position
                    end
                end
            end
        end)
        
        inputEndedConnection = UIS.InputEnded:Connect(function(input, gameProcessed)
            if not freecam then return end
            
            if input.UserInputType == Enum.UserInputType.Touch then
                if input == joystickTouch then
                    joystickTouch = nil
                    mobileJoystickInput = Vector3.new(0, 0, 0)
                end
                
                if input == cameraTouch then
                    cameraTouch = nil
                    cameraTouchStartPos = nil
                end
            end
        end)
    end
    
    renderConnection = RunService.RenderStepped:Connect(function(dt)
        if not freecam then return end
        
        if not isMobile then
            local mouseDelta = UIS:GetMouseDelta()
            
            if mouseDelta.Magnitude > 0 then
                camRot = camRot + Vector3.new(
                    -mouseDelta.Y * sensitivity * 0.01,
                    -mouseDelta.X * sensitivity * 0.01,
                    0
                )
            end
        end
        
        local rotationCF = CFrame.fromEulerAnglesYXZ(camRot.X, camRot.Y, camRot.Z)
        
        local moveInput = GetMovement()
        if moveInput.Magnitude > 0 then
            moveInput = moveInput.Unit
            
            local moveCF = CFrame.new(camPos) * rotationCF
            local velocity = (moveCF.LookVector * moveInput.Z) +
                             (moveCF.RightVector * moveInput.X) +
                             (moveCF.UpVector * moveInput.Y)
            
            camPos = camPos + velocity * speed * dt
        end
        
        Camera.CFrame = CFrame.new(camPos) * rotationCF
    end)
    
    return true
end

function FreecamModule.Stop()
    if not freecam then return end
    
    freecam = false
    
    if renderConnection then
        renderConnection:Disconnect()
        renderConnection = nil
    end
    
    if inputChangedConnection then
        inputChangedConnection:Disconnect()
        inputChangedConnection = nil
    end
    
    if inputEndedConnection then
        inputEndedConnection:Disconnect()
        inputEndedConnection = nil
    end
    
    if inputBeganConnection then
        inputBeganConnection:Disconnect()
        inputBeganConnection = nil
    end
    
    for _, conn in pairs(joystickConnections) do
        if conn then
            conn:Disconnect()
        end
    end
    joystickConnections = {}
    
    LockCharacter(false)
    ShowAllGuis()
    Camera.CameraType = Enum.CameraType.Custom
    Camera.CameraSubject = Humanoid
    
    UIS.MouseBehavior = Enum.MouseBehavior.Default
    UIS.MouseIconEnabled = true
    
    cameraTouch = nil
    cameraTouchStartPos = nil
    joystickTouch = nil
    mobileJoystickInput = Vector3.new(0, 0, 0)
    
    return true
end

function FreecamModule.Toggle()
    if freecam then
        return FreecamModule.Stop()
    else
        return FreecamModule.Start()
    end
end

function FreecamModule.IsActive()
    return freecam
end

function FreecamModule.SetSpeed(newSpeed)
    speed = math.max(1, newSpeed)
end

function FreecamModule.SetSensitivity(newSensitivity)
    sensitivity = math.max(0.01, math.min(5, newSensitivity))
end

function FreecamModule.GetSpeed()
    return speed
end

function FreecamModule.GetSensitivity()
    return sensitivity
end

-- ============================================
-- SET MAIN GUI NAME
-- ============================================
local mainGuiName = nil

function FreecamModule.SetMainGuiName(guiName)
    mainGuiName = guiName
    print("‚úÖ Main GUI set to: " .. guiName)
end

function FreecamModule.GetMainGuiName()
    return mainGuiName
end

-- ============================================
-- F3 KEYBIND - PC ONLY (MASTER SWITCH LOGIC)
-- ============================================
local f3KeybindActive = false

function FreecamModule.EnableF3Keybind(enable)
    f3KeybindActive = enable
    
    -- Jika toggle GUI dimatikan, matikan freecam juga
    if not enable and freecam then
        FreecamModule.Stop()
        print("üî¥ Freecam disabled (Toggle GUI OFF)")
    end
    
    if not isMobile then
        local status = f3KeybindActive and "ENABLED (Press F3 to activate)" or "DISABLED"
        print("‚öôÔ∏è F3 Keybind: " .. status)
    end
end

function FreecamModule.IsF3KeybindActive()
    return f3KeybindActive
end

-- F3 Input Handler (PC Only)
if not isMobile then
    UIS.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        
        -- Cek apakah F3 ditekan DAN toggle GUI aktif
        if input.KeyCode == Enum.KeyCode.F3 and f3KeybindActive then
            FreecamModule.Toggle()
            
            if freecam then
                print("üé• Freecam ACTIVATED via F3")
            else
                print("üî¥ Freecam DEACTIVATED via F3")
            end
        end
    end)
end


return FreecamModule


============================================================
-- File 4: ./Project_code/Camera View/UnlimitedZoom.lua
============================================================

-- ============================================
-- UNLIMITED ZOOM CAMERA MODULE
-- ============================================
-- Character can walk normally, camera can zoom unlimited

local UnlimitedZoomModule = {}

-- Services
local Players = game:GetService("Players")

-- Variables
local Player = Players.LocalPlayer

-- Save original zoom settings
local originalMinZoom = Player.CameraMinZoomDistance
local originalMaxZoom = Player.CameraMaxZoomDistance

-- State
local unlimitedZoomActive = false

-- ============================================
-- MAIN FUNCTIONS
-- ============================================

function UnlimitedZoomModule.Enable()
    if unlimitedZoomActive then return false end
    
    unlimitedZoomActive = true
    
    -- Remove zoom limits (character can still move)
    Player.CameraMinZoomDistance = 0.5
    Player.CameraMaxZoomDistance = 9999
    
    print("‚úÖ Unlimited Zoom: ENABLED")
    print("üì∑ Scroll to zoom in/out without limits")
    print("üèÉ Character can move normally")
    
    return true
end

function UnlimitedZoomModule.Disable()
    if not unlimitedZoomActive then return false end
    
    unlimitedZoomActive = false
    
    -- Restore original zoom limits
    Player.CameraMinZoomDistance = originalMinZoom
    Player.CameraMaxZoomDistance = originalMaxZoom
    
    print("üî¥ Unlimited Zoom: DISABLED")
    print("üì∑ Zoom limits restored")
    
    return true
end

function UnlimitedZoomModule.IsActive()
    return unlimitedZoomActive
end


return UnlimitedZoomModule

============================================================
-- File 5: ./Project_code/Instant.lua
============================================================

-- ‚ö° ULTRA SPEED AUTO FISHING v29.4 (Fast Mode - Safe Config Loading)
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer
local Character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- Hentikan script lama jika masih aktif
if _G.FishingScriptFast then
    _G.FishingScriptFast.Stop()
    task.wait(0.1)
end

-- Inisialisasi koneksi network
local netFolder = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RF_UpdateAutoFishingState = netFolder:WaitForChild("RF/UpdateAutoFishingState")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")
local RE_FishCaught = netFolder:WaitForChild("RE/FishCaught")

-- ‚≠ê SAFE CONFIG LOADING - Check if function exists
local function safeGetConfig(key, default)
    -- Check if GetConfigValue exists in _G
    if _G.GetConfigValue and type(_G.GetConfigValue) == "function" then
        local success, value = pcall(function()
            return _G.GetConfigValue(key, default)
        end)
        if success and value ~= nil then
            return value
        end
    end
    -- Return default if function doesn't exist or fails
    return default
end

-- ‚≠ê AUTO-LOAD SETTINGS FROM CONFIG (with safety check)
local function loadConfigSettings()
    local maxWait = safeGetConfig("InstantFishing.FishingDelay", 1.30)
    local cancelDelay = safeGetConfig("InstantFishing.CancelDelay", 0.19)
    
    return maxWait, cancelDelay
end

-- Load settings saat module pertama kali diinisialisasi
local initialMaxWait, initialCancelDelay = loadConfigSettings()

-- Modul utama
local fishing = {
    Running = false,
    WaitingHook = false,
    CurrentCycle = 0,
    TotalFish = 0,
    Connections = {},
    -- ‚≠ê Settings langsung dari config (dengan safety check)
    Settings = {
        FishingDelay = 0.01,
        CancelDelay = initialCancelDelay,
        HookDetectionDelay = 0.05,
        RetryDelay = 0.1,
        MaxWaitTime = initialMaxWait,
    }
}

_G.FishingScriptFast = fishing

-- ‚≠ê Auto-refresh settings setiap kali akan Start (dengan safety check)
local function refreshSettings()
    local maxWait = safeGetConfig("InstantFishing.FishingDelay", fishing.Settings.MaxWaitTime)
    local cancelDelay = safeGetConfig("InstantFishing.CancelDelay", fishing.Settings.CancelDelay)
    
    fishing.Settings.MaxWaitTime = maxWait
    fishing.Settings.CancelDelay = cancelDelay
end

-- Nonaktifkan animasi
local function disableFishingAnim()
    pcall(function()
        for _, track in pairs(Humanoid:GetPlayingAnimationTracks()) do
            local name = track.Name:lower()
            if name:find("fish") or name:find("rod") or name:find("cast") or name:find("reel") then
                track:Stop(0)
            end
        end
    end)

    task.spawn(function()
        local rod = Character:FindFirstChild("Rod") or Character:FindFirstChildWhichIsA("Tool")
        if rod and rod:FindFirstChild("Handle") then
            local handle = rod.Handle
            local weld = handle:FindFirstChildOfClass("Weld") or handle:FindFirstChildOfClass("Motor6D")
            if weld then
                weld.C0 = CFrame.new(0, -1, -1.2) * CFrame.Angles(math.rad(-10), 0, 0)
            end
        end
    end)
end

-- Fungsi cast (‚≠ê Menggunakan Settings.MaxWaitTime dan Settings.CancelDelay)
function fishing.Cast()
    if not fishing.Running or fishing.WaitingHook then return end

    disableFishingAnim()
    fishing.CurrentCycle += 1

    local castSuccess = pcall(function()
        RF_ChargeFishingRod:InvokeServer({[10] = tick()})
        task.wait(0.07)
        RF_RequestMinigame:InvokeServer(9, 0, tick())
        fishing.WaitingHook = true

        task.delay(fishing.Settings.MaxWaitTime * 0.7, function()
            if fishing.WaitingHook and fishing.Running then
                pcall(function()
                    RE_FishingCompleted:FireServer()
                end)
            end
        end)

        task.delay(fishing.Settings.MaxWaitTime, function()
            if fishing.WaitingHook and fishing.Running then
                fishing.WaitingHook = false
                pcall(function()
                    RE_FishingCompleted:FireServer()
                end)

                task.wait(fishing.Settings.RetryDelay)
                pcall(function()
                    RF_CancelFishingInputs:InvokeServer()
                end)

                task.wait(fishing.Settings.FishingDelay)
                if fishing.Running then
                    fishing.Cast()
                end
            end
        end)
    end)

    if not castSuccess then
        task.wait(fishing.Settings.RetryDelay)
        if fishing.Running then
            fishing.Cast()
        end
    end
end

-- Start (‚≠ê Auto-refresh settings sebelum start)
function fishing.Start()
    if fishing.Running then return end
    
    -- ‚≠ê Refresh settings dari config sebelum start
    refreshSettings()
    
    fishing.Running = true
    fishing.CurrentCycle = 0
    fishing.TotalFish = 0

    disableFishingAnim()

    fishing.Connections.Minigame = RE_MinigameChanged.OnClientEvent:Connect(function(state)
        if fishing.WaitingHook and typeof(state) == "string" then
            local s = string.lower(state)
            if string.find(s, "hook") or string.find(s, "bite") or string.find(s, "catch") then
                fishing.WaitingHook = false
                task.wait(fishing.Settings.HookDetectionDelay)

                pcall(function()
                    RE_FishingCompleted:FireServer()
                end)

                task.wait(fishing.Settings.CancelDelay)
                pcall(function()
                    RF_CancelFishingInputs:InvokeServer()
                end)

                task.wait(fishing.Settings.FishingDelay)
                if fishing.Running then
                    fishing.Cast()
                end
            end
        end
    end)

    fishing.Connections.Caught = RE_FishCaught.OnClientEvent:Connect(function(_, data)
        if fishing.Running then
            fishing.WaitingHook = false
            fishing.TotalFish += 1

            pcall(function()
                task.wait(fishing.Settings.CancelDelay)
                RF_CancelFishingInputs:InvokeServer()
            end)

            task.wait(fishing.Settings.FishingDelay)
            if fishing.Running then
                fishing.Cast()
            end
        end
    end)

    fishing.Connections.AnimDisabler = task.spawn(function()
        while fishing.Running do
            disableFishingAnim()
            task.wait(0.15)
        end
    end)

    task.wait(0.5)
    fishing.Cast()
end

-- Stop
function fishing.Stop()
    if not fishing.Running then return end
    fishing.Running = false
    fishing.WaitingHook = false

    for _, conn in pairs(fishing.Connections) do
        if typeof(conn) == "RBXScriptConnection" then
            conn:Disconnect()
        elseif typeof(conn) == "thread" then
            task.cancel(conn)
        end
    end
    fishing.Connections = {}
    
    pcall(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    task.wait(0.2)
    
    pcall(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
end

-- ‚≠ê Function untuk update settings dari GUI (tetap ada untuk backward compatibility)
function fishing.UpdateSettings(maxWaitTime, cancelDelay)
    if maxWaitTime then
        fishing.Settings.MaxWaitTime = maxWaitTime
    end
    if cancelDelay then
        fishing.Settings.CancelDelay = cancelDelay
    end
end

return fishing

============================================================
-- File 6: ./Project_code/Instant2.lua
============================================================

-- ‚ö° ULTRA PERFECT CAST AUTO FISHING v35.2 (Safe Config Loading)
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer
local Character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

if _G.FishingScript then
    _G.FishingScript.Stop()
    task.wait(0.1)
end

local netFolder = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RF_UpdateAutoFishingState = netFolder:WaitForChild("RF/UpdateAutoFishingState")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")
local RE_FishCaught = netFolder:WaitForChild("RE/FishCaught")
local RE_FishingStopped = netFolder:WaitForChild("RE/FishingStopped")

-- ‚≠ê SAFE CONFIG LOADING - Check if function exists
local function safeGetConfig(key, default)
    -- Check if GetConfigValue exists in _G
    if _G.GetConfigValue and type(_G.GetConfigValue) == "function" then
        local success, value = pcall(function()
            return _G.GetConfigValue(key, default)
        end)
        if success and value ~= nil then
            return value
        end
    end
    -- Return default if function doesn't exist or fails
    return default
end

-- ‚≠ê SAFE: Load saved settings dari GUI config
local function loadSavedSettings()
    local maxWait = safeGetConfig("InstantFishing.FishingDelay", 1.5)
    local cancelDelay = safeGetConfig("InstantFishing.CancelDelay", 0.19)
    
    return {
        MaxWaitTime = maxWait,
        CancelDelay = cancelDelay
    }
end

local savedSettings = loadSavedSettings()

local fishing = {
    Running = false,
    WaitingHook = false,
    CurrentCycle = 0,
    TotalFish = 0,
    PerfectCasts = 0,
    AmazingCasts = 0,
    FailedCasts = 0,
    Connections = {},
    Settings = {
        FishingDelay = 0.07,
        CancelDelay = savedSettings.CancelDelay,  -- ‚≠ê Use saved value
        HookDetectionDelay = 0.03,
        RetryDelay = 0.04,
        MaxWaitTime = savedSettings.MaxWaitTime,  -- ‚≠ê Use saved value
        FailTimeout = 2.5,
        PerfectChargeTime = 0.34,
        PerfectReleaseDelay = 0.005,
        PerfectPower = 0.95,
        UseMultiDetection = true,
        UseVisualDetection = true,
        UseSoundDetection = false,
    }
}

_G.FishingScript = fishing

-- ‚≠ê Auto-refresh settings setiap kali akan Start (dengan safety check)
local function refreshSettings()
    local maxWait = safeGetConfig("InstantFishing.FishingDelay", fishing.Settings.MaxWaitTime)
    local cancelDelay = safeGetConfig("InstantFishing.CancelDelay", fishing.Settings.CancelDelay)
    
    fishing.Settings.MaxWaitTime = maxWait
    fishing.Settings.CancelDelay = cancelDelay
end

local function disableFishingAnim()
    pcall(function()
        for _, track in pairs(Humanoid:GetPlayingAnimationTracks()) do
            local name = track.Name:lower()
            if name:find("fish") or name:find("rod") or name:find("cast") or name:find("reel") then
                track:Stop(0)
                track.TimePosition = 0
            end
        end
    end)

    task.spawn(function()
        local rod = Character:FindFirstChild("Rod") or Character:FindFirstChildWhichIsA("Tool")
        if rod and rod:FindFirstChild("Handle") then
            local handle = rod.Handle
            local weld = handle:FindFirstChildOfClass("Weld") or handle:FindFirstChildOfClass("Motor6D")
            if weld then
                weld.C0 = CFrame.new(0, -1, -1.2) * CFrame.Angles(math.rad(-10), 0, 0)
            end
        end
    end)
end

local function handleFailedCast()
    fishing.WaitingHook = false
    fishing.FailedCasts += 1
    
    pcall(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
    
    task.wait(fishing.Settings.RetryDelay)
    
    if fishing.Running then
        fishing.PerfectCast()
    end
end

function fishing.PerfectCast()
    if not fishing.Running or fishing.WaitingHook then 
        return 
    end

    disableFishingAnim()
    fishing.CurrentCycle += 1

    local castSuccess = pcall(function()
        local startTime = tick()
        local chargeData = {[1] = startTime}
        
        local chargeResult = RF_ChargeFishingRod:InvokeServer(chargeData)
        if not chargeResult then 
            error("Charge fishing rod failed") 
        end

        local waitTime = fishing.Settings.PerfectChargeTime
        local endTime = tick() + waitTime
        while tick() < endTime and fishing.Running do
            task.wait(0.01)
        end

        task.wait(fishing.Settings.PerfectReleaseDelay)

        local releaseTime = tick()
        local perfectPower = fishing.Settings.PerfectPower

        local minigameResult = RF_RequestMinigame:InvokeServer(
            perfectPower,
            0,
            releaseTime
        )
        
        if not minigameResult then 
            handleFailedCast()
            return
        end

        fishing.WaitingHook = true
        local hookDetected = false
        local castStartTime = tick()
        local eventDetection

        eventDetection = RE_MinigameChanged.OnClientEvent:Connect(function(state)
            if fishing.WaitingHook and typeof(state) == "string" then
                local s = state:lower()
                if s:find("hook") or s:find("bite") or s:find("catch") or s == "!" then
                    hookDetected = true
                    eventDetection:Disconnect()
                    
                    fishing.WaitingHook = false

                    task.wait(fishing.Settings.HookDetectionDelay)
                    pcall(function()
                        RE_FishingCompleted:FireServer()
                    end)

                    task.wait(fishing.Settings.CancelDelay)
                    pcall(function()
                        RF_CancelFishingInputs:InvokeServer()
                    end)

                    task.wait(fishing.Settings.FishingDelay)
                    if fishing.Running then
                        fishing.PerfectCast()
                    end
                end
            end
        end)

        task.delay(fishing.Settings.MaxWaitTime, function()
            if fishing.WaitingHook and fishing.Running then
                if not hookDetected then
                    fishing.WaitingHook = false
                    eventDetection:Disconnect()

                    pcall(function()
                        RE_FishingCompleted:FireServer()
                    end)

                    task.wait(fishing.Settings.RetryDelay)
                    pcall(function()
                        RF_CancelFishingInputs:InvokeServer()
                    end)

                    task.wait(fishing.Settings.FishingDelay)
                    if fishing.Running then
                        fishing.PerfectCast()
                    end
                end
            end
        end)
        
        task.delay(fishing.Settings.FailTimeout, function()
            if fishing.WaitingHook and fishing.Running then
                local elapsedTime = tick() - castStartTime
                
                if elapsedTime >= fishing.Settings.FailTimeout then
                    if eventDetection then
                        eventDetection:Disconnect()
                    end
                    
                    handleFailedCast()
                end
            end
        end)
    end)

    if not castSuccess then
        task.wait(fishing.Settings.RetryDelay)
        if fishing.Running then
            fishing.PerfectCast()
        end
    end
end

function fishing.Start()
    if fishing.Running then return end
    
    -- ‚≠ê Refresh settings dari config sebelum start
    refreshSettings()
    
    fishing.Running = true
    fishing.CurrentCycle = 0
    fishing.TotalFish = 0
    fishing.PerfectCasts = 0
    fishing.AmazingCasts = 0
    fishing.FailedCasts = 0

    disableFishingAnim()

    fishing.Connections.FishingStopped = RE_FishingStopped.OnClientEvent:Connect(function()
        if fishing.Running and fishing.WaitingHook then
            handleFailedCast()
        end
    end)

    fishing.Connections.Caught = RE_FishCaught.OnClientEvent:Connect(function(name, data)
        if fishing.Running then
            fishing.WaitingHook = false
            fishing.TotalFish += 1

            local castResult = data and data.CastResult or "Unknown"
            if castResult == "Perfect" then
                fishing.PerfectCasts += 1
            elseif castResult == "Amazing" then
                fishing.AmazingCasts += 1
            end

            task.wait(fishing.Settings.CancelDelay)
            pcall(function()
                RF_CancelFishingInputs:InvokeServer()
            end)

            task.wait(fishing.Settings.FishingDelay)
            if fishing.Running then
                fishing.PerfectCast()
            end
        end
    end)

    fishing.Connections.AnimDisabler = task.spawn(function()
        while fishing.Running do
            disableFishingAnim()
            task.wait(0.1)
        end
    end)

    fishing.Connections.StatsReporter = task.spawn(function()
        while fishing.Running do
            task.wait(30)
        end
    end)

    task.wait(0.3)
    fishing.PerfectCast()
end

function fishing.Stop()
    if not fishing.Running then return end
    fishing.Running = false
    fishing.WaitingHook = false

    for _, conn in pairs(fishing.Connections) do
        if typeof(conn) == "RBXScriptConnection" then
            conn:Disconnect()
        elseif typeof(conn) == "thread" then
            task.cancel(conn)
        end
    end

    fishing.Connections = {}
    
    pcall(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    task.wait(0.2)
    
    pcall(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
end

-- ‚≠ê Function untuk update settings dari GUI (tetap ada untuk backward compatibility)
function fishing.UpdateSettings(maxWaitTime, cancelDelay)
    if maxWaitTime then
        fishing.Settings.MaxWaitTime = maxWaitTime
    end
    if cancelDelay then
        fishing.Settings.CancelDelay = cancelDelay
    end
end

return fishing

============================================================
-- File 7: ./Project_code/Instant2Xspeed.lua
============================================================

-- Instant2Xspeed.lua (no toggle key) - ULTRA SPEED AUTO FISHING
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local netFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")
local RE_FishCaught = netFolder:WaitForChild("RE/FishCaught")

local fishing = {
    Running = false,
    WaitingHook = false,
    CurrentCycle = 0,
    TotalFish = 0,
    Settings = {
        FishingDelay = 0.3,
        CancelDelay = 0.05,
    },
}

_G.FishingScript = fishing

RE_MinigameChanged.OnClientEvent:Connect(function(state)
    if fishing.WaitingHook and typeof(state) == "string" and string.find(string.lower(state), "hook") then
        fishing.WaitingHook = false
        task.wait(0.30)
        RE_FishingCompleted:FireServer()
        
        task.wait(fishing.Settings.CancelDelay)
        pcall(function() RF_CancelFishingInputs:InvokeServer() end)
        
        task.wait(fishing.Settings.FishingDelay)
        if fishing.Running then fishing.Cast() end
    end
end)

RE_FishCaught.OnClientEvent:Connect(function(name, data)
    if fishing.Running then
        fishing.WaitingHook = false
        fishing.TotalFish = fishing.TotalFish + 1
        
        task.wait(fishing.Settings.CancelDelay)
        pcall(function() RF_CancelFishingInputs:InvokeServer() end)
        
        task.wait(fishing.Settings.FishingDelay)
        if fishing.Running then fishing.Cast() end
    end
end)

function fishing.Cast()
    if not fishing.Running or fishing.WaitingHook then return end
    fishing.CurrentCycle = fishing.CurrentCycle + 1
    
    pcall(function()
        RF_ChargeFishingRod:InvokeServer({[10] = tick()})
        task.wait(0.07)
        RF_RequestMinigame:InvokeServer(10, 0, tick())
        fishing.WaitingHook = true
        
        task.delay(1.1, function()
            if fishing.WaitingHook and fishing.Running then
                fishing.WaitingHook = false
                RE_FishingCompleted:FireServer()
                
                task.wait(fishing.Settings.CancelDelay)
                pcall(function() RF_CancelFishingInputs:InvokeServer() end)
                
                task.wait(fishing.Settings.FishingDelay)
                if fishing.Running then fishing.Cast() end
            end
        end)
    end)
end

function fishing.Start()
    if fishing.Running then return end
    fishing.Running = true
    fishing.CurrentCycle = 0
    fishing.TotalFish = 0
    fishing.Cast()
end

function fishing.Stop()
    fishing.Running = false
    fishing.WaitingHook = false
end

return fishing

============================================================
-- File 8: ./Project_code/Misc/AntiAFK.lua
============================================================

-- üí§ FungsiKeaby/Misc/AntiAFK.lua
local VirtualUser = game:GetService("VirtualUser")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local AntiAFK = {
    Enabled = false,
    Connection = nil
}

function AntiAFK.Start()
    if AntiAFK.Enabled then return end
    AntiAFK.Enabled = true
    print("üü¢ Anti-AFK diaktifkan")

    AntiAFK.Connection = localPlayer.Idled:Connect(function()
        if AntiAFK.Enabled then
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
            print("üí§ [AntiAFK] Mencegah kick karena idle...")
        end
    end)
end

function AntiAFK.Stop()
    if not AntiAFK.Enabled then return end
    AntiAFK.Enabled = false
    print("üî¥ Anti-AFK dimatikan")

    if AntiAFK.Connection then
        AntiAFK.Connection:Disconnect()
        AntiAFK.Connection = nil
    end
end

return AntiAFK

============================================================
-- File 9: ./Project_code/Misc/DisableRendering.lua
============================================================

-- =====================================================
-- DISABLE 3D RENDERING MODULE (CLEAN VERSION)
-- For integration with Lynx GUI v2.3
-- =====================================================

local DisableRendering = {}

-- =====================================================
-- SERVICES
-- =====================================================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- =====================================================
-- CONFIGURATION
-- =====================================================
DisableRendering.Settings = {
    AutoPersist = true -- Keep active after respawn
}

-- =====================================================
-- STATE VARIABLES
-- =====================================================
local State = {
    RenderingDisabled = false,
    RenderConnection = nil
}

-- =====================================================
-- PUBLIC API FUNCTIONS
-- =====================================================

-- Start disable rendering
function DisableRendering.Start()
    if State.RenderingDisabled then
        return false, "Already disabled"
    end
    
    local success, err = pcall(function()
        -- Disable 3D rendering
        State.RenderConnection = RunService.RenderStepped:Connect(function()
            pcall(function()
                RunService:Set3dRenderingEnabled(false)
            end)
        end)
        
        State.RenderingDisabled = true
    end)
    
    if not success then
        warn("[DisableRendering] Failed to start:", err)
        return false, "Failed to start"
    end
    
    return true, "Rendering disabled"
end

-- Stop disable rendering
function DisableRendering.Stop()
    if not State.RenderingDisabled then
        return false, "Already enabled"
    end
    
    local success, err = pcall(function()
        -- Disconnect render loop
        if State.RenderConnection then
            State.RenderConnection:Disconnect()
            State.RenderConnection = nil
        end
        
        -- Re-enable rendering
        RunService:Set3dRenderingEnabled(true)
        
        State.RenderingDisabled = false
    end)
    
    if not success then
        warn("[DisableRendering] Failed to stop:", err)
        return false, "Failed to stop"
    end
    
    return true, "Rendering enabled"
end

-- Toggle rendering
function DisableRendering.Toggle()
    if State.RenderingDisabled then
        return DisableRendering.Stop()
    else
        return DisableRendering.Start()
    end
end

-- Get current status
function DisableRendering.IsDisabled()
    return State.RenderingDisabled
end

-- =====================================================
-- AUTO-PERSIST ON RESPAWN
-- =====================================================
if DisableRendering.Settings.AutoPersist then
    LocalPlayer.CharacterAdded:Connect(function()
        if State.RenderingDisabled then
            task.wait(0.5)
            pcall(function()
                RunService:Set3dRenderingEnabled(false)
            end)
        end
    end)
end

-- =====================================================
-- CLEANUP FUNCTION
-- =====================================================
function DisableRendering.Cleanup()
    -- Enable rendering if disabled
    if State.RenderingDisabled then
        pcall(function()
            RunService:Set3dRenderingEnabled(true)
        end)
    end
    
    -- Disconnect all connections
    if State.RenderConnection then
        State.RenderConnection:Disconnect()
    end
end

return DisableRendering

============================================================
-- File 10: ./Project_code/Misc/FixTogleAutoSave.lua
============================================================

-- LynxGUI_v2.3_Fixed.lua - Part 1/8
-- Core Setup, Services, Loading System
-- FREE NOT FOR SALE

-- ‚ùå THIS FILE IS DEPRECATED - USE JackHub.lua INSTEAD ‚ùå
print("‚ö†Ô∏è WARNING: FixTogleAutoSave.lua is deprecated!")
print("‚ÑπÔ∏è Please use JackHub.lua instead")
print("üõë Terminating old version to prevent conflicts...")
return -- TERMINATE IMMEDIATELY

-- ============================================
-- UNIVERSAL LOCK CHECK (Prevent Duplicate with Main GUI)
-- ============================================
if getgenv then
    if getgenv().LYNX_GUI_RUNNING then
        warn("‚ö†Ô∏è Main LYNX GUI is already running! This old version will not load.")
        warn("‚ÑπÔ∏è Use JackHub.lua instead of FixTogleAutoSave.lua")
        return
    end
elseif _G then
    if _G.LYNX_GUI_RUNNING then
        warn("‚ö†Ô∏è Main LYNX GUI is already running! This old version will not load.")
        warn("‚ÑπÔ∏è Use JackHub.lua instead of FixTogleAutoSave.lua")
        return
    end
end

-- ============================================
-- ANTI-DUPLICATION SYSTEM
-- ============================================
local GUI_IDENTIFIER = "LynxGUI_Galaxy_v2.3"

local function CloseExistingGUI()
    local playerGui = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")
    local existingGUI = playerGui:FindFirstChild(GUI_IDENTIFIER)
    
    if existingGUI then
        print("üîÑ Existing Lynx GUI detected - Closing old instance...")
        
        pcall(function()
            local mainFrame = existingGUI:FindFirstChild("Frame")
            if mainFrame then
                game:GetService("TweenService"):Create(
                    mainFrame, 
                    TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In),
                    {Size = UDim2.new(0, 0, 0, 0)}
                ):Play()
            end
        end)
        
        task.wait(0.35)
        existingGUI:Destroy()
        print("‚úÖ Old GUI instance removed")
        task.wait(0.2)
    end
end

CloseExistingGUI()

-- ============================================
-- SERVICES & CORE VARIABLES
-- ============================================
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local localPlayer = Players.LocalPlayer

repeat task.wait() until localPlayer:FindFirstChild("PlayerGui")

local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled

-- ============================================
-- UTILITY FUNCTIONS
-- ============================================
local function new(class, props)
    local inst = Instance.new(class)
    for k, v in pairs(props or {}) do 
        inst[k] = v 
    end
    return inst
end

local function SendNotification(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration or 5,
            Icon = "rbxassetid://91891350821146"
        })
    end)
end

-- ============================================
-- iOS-STYLE LOADING NOTIFICATION SYSTEM
-- ============================================
local LoadingNotification = {
    Active = false,
    NotificationId = nil,
    StatusLabel = nil,
    ProgressBar = nil,
    ProgressBg = nil,
    TitleLabel = nil
}

function LoadingNotification.Create()
    if LoadingNotification.Active then return end
    LoadingNotification.Active = true
    
    local success = pcall(function()
        local notifGui = new("ScreenGui", {
            Name = "LynxLoadingNotification_iOS",
            Parent = localPlayer.PlayerGui,
            ResetOnSpawn = false,
            ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
            DisplayOrder = 999999999
        })
        
        local notifFrame = new("Frame", {
            Parent = notifGui,
            Size = UDim2.new(0, 340, 0, 100),
            Position = UDim2.new(1, -360, 1, -120),
            BackgroundColor3 = Color3.fromRGB(0, 0, 0),
            BackgroundTransparency = 0.15,
            BorderSizePixel = 0
        })
        new("UICorner", {Parent = notifFrame, CornerRadius = UDim.new(0, 16)})
        
        local iconLabel = new("ImageLabel", {
            Parent = notifFrame,
            Size = UDim2.new(0, 45, 0, 45),
            Position = UDim2.new(0, 18, 0, 12),
            BackgroundTransparency = 1,
            Image = "rbxassetid://91891350821146",
            ScaleType = Enum.ScaleType.Fit,
            ZIndex = 3
        })
        new("UICorner", {Parent = iconLabel, CornerRadius = UDim.new(0, 8)})
        
        local titleLabel = new("TextLabel", {
            Parent = notifFrame,
            Size = UDim2.new(1, -80, 0, 24),
            Position = UDim2.new(0, 70, 0, 12),
            BackgroundTransparency = 1,
            Text = "Lynx Script Loading",
            Font = Enum.Font.GothamBold,
            TextSize = 14,
            TextColor3 = Color3.fromRGB(255, 255, 255),
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 3
        })
        
        local statusLabel = new("TextLabel", {
            Parent = notifFrame,
            Size = UDim2.new(1, -80, 0, 18),
            Position = UDim2.new(0, 70, 0, 40),
            BackgroundTransparency = 1,
            Text = "Initializing modules...",
            Font = Enum.Font.Gotham,
            TextSize = 12,
            TextColor3 = Color3.fromRGB(200, 200, 200),
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 3
        })
        
        local progressBg = new("Frame", {
            Parent = notifFrame,
            Size = UDim2.new(1, -36, 0, 4),
            Position = UDim2.new(0, 18, 1, -16),
            BackgroundColor3 = Color3.fromRGB(60, 60, 60),
            BorderSizePixel = 0,
            ZIndex = 2
        })
        new("UICorner", {Parent = progressBg, CornerRadius = UDim.new(1, 0)})
        
        local progressBar = new("Frame", {
            Parent = progressBg,
            Size = UDim2.new(0, 0, 1, 0),
            BackgroundColor3 = Color3.fromRGB(255, 255, 255),
            BorderSizePixel = 0,
            ZIndex = 3
        })
        new("UICorner", {Parent = progressBar, CornerRadius = UDim.new(1, 0)})
        
        LoadingNotification.NotificationId = notifGui
        LoadingNotification.StatusLabel = statusLabel
        LoadingNotification.ProgressBar = progressBar
        LoadingNotification.ProgressBg = progressBg
        LoadingNotification.TitleLabel = titleLabel
        
        notifFrame.Position = UDim2.new(1, 20, 1, -120)
        TweenService:Create(notifFrame, TweenInfo.new(0.6, Enum.EasingStyle.Cubic, Enum.EasingDirection.Out), {
            Position = UDim2.new(1, -360, 1, -120)
        }):Play()
    end)
    
    if not success then
        warn("‚ö†Ô∏è Failed to create loading notification")
        LoadingNotification.Active = false
    end
end

function LoadingNotification.Update(loadedCount, totalCount, currentModule)
    if not LoadingNotification.Active then return end
    
    pcall(function()
        if LoadingNotification.StatusLabel then
            local percent = math.floor((loadedCount / totalCount) * 100)
            LoadingNotification.StatusLabel.Text = string.format("Loading %d/%d (%d%%) - %s", 
                loadedCount, totalCount, percent, currentModule or "...")
        end
        
        if LoadingNotification.ProgressBar and LoadingNotification.ProgressBg then
            local targetWidth = (loadedCount / totalCount) * LoadingNotification.ProgressBg.AbsoluteSize.X
            TweenService:Create(LoadingNotification.ProgressBar, TweenInfo.new(0.25, Enum.EasingStyle.Linear), {
                Size = UDim2.new(0, targetWidth, 1, 0)
            }):Play()
        end
    end)
end

function LoadingNotification.Complete(success, loadedCount, totalCount)
    if not LoadingNotification.Active then return end
    
    pcall(function()
        if LoadingNotification.TitleLabel then
            LoadingNotification.TitleLabel.Text = success and "Lynx Ready!" or "Loading Complete"
        end
        
        if LoadingNotification.StatusLabel then
            LoadingNotification.StatusLabel.Text = success 
                and string.format("‚úì %d modules loaded successfully", loadedCount)
                or string.format("‚ö† Loaded %d/%d modules", loadedCount, totalCount)
        end
        
        if LoadingNotification.ProgressBar then
            TweenService:Create(LoadingNotification.ProgressBar, TweenInfo.new(0.3), {
                BackgroundColor3 = success and Color3.fromRGB(52, 199, 89) or Color3.fromRGB(255, 159, 10)
            }):Play()
        end
        
        task.wait(2.5)
        if LoadingNotification.NotificationId then
            local frame = LoadingNotification.NotificationId:FindFirstChildOfClass("Frame")
            if frame then
                TweenService:Create(frame, TweenInfo.new(0.5, Enum.EasingStyle.Cubic, Enum.EasingDirection.In), {
                    Position = UDim2.new(1, 20, 1, -120)
                }):Play()
            end
            task.wait(0.5)
            LoadingNotification.NotificationId:Destroy()
        end
        
        LoadingNotification.Active = false
    end)
end

-- ============================================
-- MODULE LOADING SYSTEM
-- ============================================
local Modules = {}
local ModuleStatus = {}
local totalModules = 0
local loadedModules = 0
local failedModules = {}
local DEBUG_MODE = true

local CRITICAL_MODULES = {
    "HideStats",
    "Webhook",
    "Notify"
}

LoadingNotification.Create()

print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("üîÑ LYNX GUI v2.3 - LOADING")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

-- Load Security Loader
local SecurityLoader
local loaderSuccess, loaderError = pcall(function()
    SecurityLoader = loadstring(game:HttpGet("https://raw.githubusercontent.com/akmiliadevi/Tugas_Kuliah/refs/heads/main/SecurityLoader.lua"))()
end)

if not loaderSuccess or not SecurityLoader then
    local errorMsg = loaderError and tostring(loaderError) or "Unknown error"
    LoadingNotification.Complete(false, 0, 1)
    SendNotification("‚ùå CRITICAL ERROR", "SecurityLoader failed!", 10)
    warn("‚ùå CRITICAL: SecurityLoader failed to load - " .. errorMsg)
    return
end

print("‚úÖ SecurityLoader loaded successfully")
LoadingNotification.Update(1, 32, "SecurityLoader")

-- Module list
local ModuleList = {
    "Notify", "HideStats", "Webhook",
    "instant", "instant2", "blatantv1", "UltraBlatant", "blatantv2", "blatantv2fix",
    "GoodPerfectionStable",
    "NoFishingAnimation", "LockPosition", "AutoEquipRod", "DisableCutscenes",
    "DisableExtras", "AutoTotem3X", "SkinAnimation", "WalkOnWater",
    "TeleportModule", "TeleportToPlayer", "SavedLocation", "EventTeleportDynamic",
    "AutoQuestModule", "AutoTemple", "TempleDataReader",
    "AutoSell", "AutoSellTimer", "MerchantSystem", "RemoteBuyer", "AutoBuyWeather",
    "FreecamModule", "UnlimitedZoomModule", "AntiAFK", "UnlockFPS", "FPSBooster", "DisableRendering"
}

totalModules = #ModuleList

if totalModules == 0 then
    warn("‚ùå CRITICAL: Module list is empty!")
    LoadingNotification.Complete(false, 0, 0)
    SendNotification("‚ùå Error", "Module list is empty!", 10)
    return
end

print(string.format("üìã Module list validated: %d modules to load", totalModules))

-- Module loading with retry
local MAX_RETRIES = 3
local RETRY_DELAY = 1

local function LoadModuleWithRetry(moduleName, retryCount)
    retryCount = retryCount or 0
    
    local success, result = pcall(function()
        return SecurityLoader.LoadModule(moduleName)
    end)
    
    if success and result then
        Modules[moduleName] = result
        ModuleStatus[moduleName] = "‚úÖ Loaded"
        loadedModules = loadedModules + 1
        
        if DEBUG_MODE then
            print(string.format("‚úÖ [%d/%d] %s loaded", loadedModules, totalModules, moduleName))
        end
        
        return true
    else
        if retryCount < MAX_RETRIES then
            warn(string.format("‚ö†Ô∏è Retry %d/%d for %s", retryCount + 1, MAX_RETRIES, moduleName))
            task.wait(RETRY_DELAY)
            return LoadModuleWithRetry(moduleName, retryCount + 1)
        else
            Modules[moduleName] = nil
            ModuleStatus[moduleName] = "‚ùå Failed"
            table.insert(failedModules, moduleName)
            warn(string.format("‚ùå FAILED: %s (after %d retries)", moduleName, MAX_RETRIES))
            return false
        end
    end
end

local function LoadAllModules()
    print("\nüì¶ Starting module loading sequence...")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    local startTime = tick()
    
    for index, moduleName in ipairs(ModuleList) do
        local isCritical = table.find(CRITICAL_MODULES, moduleName) ~= nil
        local moduleLabel = isCritical and "[CRITICAL]" or "[OPTIONAL]"
        
        print(string.format("\nüîÑ Loading %s %s...", moduleLabel, moduleName))
        LoadingNotification.Update(loadedModules, totalModules, moduleName)
        
        local success = LoadModuleWithRetry(moduleName)
        
        if not success and isCritical then
            LoadingNotification.Complete(false, loadedModules, totalModules)
            SendNotification("‚ùå CRITICAL ERROR", 
                string.format("%s failed to load!", moduleName), 10)
            error(string.format("CRITICAL MODULE FAILED: %s", moduleName))
            return false
        end
    end
    
    local loadTime = math.floor((tick() - startTime) * 100) / 100
    
    print("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("‚ú® MODULE LOADING COMPLETE")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print(string.format("üì¶ Loaded: %d/%d modules", loadedModules, totalModules))
    print(string.format("‚è±Ô∏è Time: %.2f seconds", loadTime))
    
    if #failedModules > 0 then
        print("\n‚ö†Ô∏è FAILED MODULES:")
        for _, name in ipairs(failedModules) do
            print("   ‚ùå " .. name)
        end
    end
    
    LoadingNotification.Complete(true, loadedModules, totalModules)
    return true
end

local loadSuccess = LoadAllModules()

if not loadSuccess then
    error("Module loading failed - Script halted")
    return
end

local function GetModule(name)
    local module = Modules[name]
    if not module and DEBUG_MODE then
        warn(string.format("‚ö†Ô∏è Module '%s' not available", name))
    end
    return module
end

print("\n‚úÖ Core setup complete - Ready for GUI creation\n")

-- END OF PART 1/8

-- ============================================
-- PART 2/8: COLOR PALETTE & GUI STRUCTURE
-- ============================================

local colors = {
    primary = Color3.fromRGB(255, 140, 0),
    secondary = Color3.fromRGB(147, 112, 219),
    accent = Color3.fromRGB(186, 85, 211),
    galaxy1 = Color3.fromRGB(123, 104, 238),
    galaxy2 = Color3.fromRGB(72, 61, 139),
    success = Color3.fromRGB(34, 197, 94),
    warning = Color3.fromRGB(251, 191, 36),
    danger = Color3.fromRGB(239, 68, 68),
    
    bg1 = Color3.fromRGB(10, 10, 10),
    bg2 = Color3.fromRGB(18, 18, 18),
    bg3 = Color3.fromRGB(25, 25, 25),
    bg4 = Color3.fromRGB(35, 35, 35),
    
    text = Color3.fromRGB(255, 255, 255),
    textDim = Color3.fromRGB(180, 180, 180),
    textDimmer = Color3.fromRGB(120, 120, 120),
    
    border = Color3.fromRGB(50, 50, 50),
    glow = Color3.fromRGB(138, 43, 226),
}

local windowSize = UDim2.new(0, 420, 0, 280)
local minWindowSize = Vector2.new(380, 250)
local maxWindowSize = Vector2.new(550, 400)
local sidebarWidth = 140

-- ============================================
-- MAIN GUI STRUCTURE
-- ============================================

local gui = new("ScreenGui", {
    Name = GUI_IDENTIFIER,
    Parent = localPlayer.PlayerGui,
    IgnoreGuiInset = true,
    ResetOnSpawn = false,
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
    DisplayOrder = 2147483647
})

local function bringToFront()
    gui.DisplayOrder = 2147483647
end

-- Main Window Container
local win = new("Frame", {
    Parent = gui,
    Size = windowSize,
    Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2),
    BackgroundColor3 = colors.bg1,
    BackgroundTransparency = 0.25,
    BorderSizePixel = 0,
    ClipsDescendants = false,
    ZIndex = 3
})
new("UICorner", {Parent = win, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = win,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.9,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
})

-- Inner shadow effect
local innerShadow = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, -2, 1, -2),
    Position = UDim2.new(0, 1, 0, 1),
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    ZIndex = 2
})
new("UICorner", {Parent = innerShadow, CornerRadius = UDim.new(0, 11)})
new("UIStroke", {
    Parent = innerShadow,
    Color = Color3.fromRGB(0, 0, 0),
    Thickness = 1,
    Transparency = 0.8
})

-- Sidebar
local sidebar = new("Frame", {
    Parent = win,
    Size = UDim2.new(0, sidebarWidth, 1, -45),
    Position = UDim2.new(0, 0, 0, 45),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.75,
    BorderSizePixel = 0,
    ClipsDescendants = true,
    ZIndex = 4
})
new("UICorner", {Parent = sidebar, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = sidebar,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

-- Script Header
local scriptHeader = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, 0, 0, 45),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.75,
    BorderSizePixel = 0,
    ZIndex = 5
})
new("UICorner", {Parent = scriptHeader, CornerRadius = UDim.new(0, 12)})

local gradient = new("UIGradient", {
    Parent = scriptHeader,
    Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(72, 61, 139))
    },
    Rotation = 45,
    Transparency = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0.97),
        NumberSequenceKeypoint.new(1, 0.99)
    }
})

-- Drag Handle
local headerDragHandle = new("Frame", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 40, 0, 3),
    Position = UDim2.new(0.5, -20, 0, 8),
    BackgroundColor3 = colors.primary,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = headerDragHandle, CornerRadius = UDim.new(1, 0)})

-- Title with glow
local titleLabel = new("TextLabel", {
    Parent = scriptHeader,
    Text = "LynX",
    Size = UDim2.new(0, 80, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 17,
    TextColor3 = colors.primary,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextStrokeTransparency = 0.9,
    TextStrokeColor3 = colors.primary,
    ZIndex = 6
})

-- Title glow effect
local titleGlow = new("TextLabel", {
    Parent = scriptHeader,
    Text = "LynX",
    Size = titleLabel.Size,
    Position = titleLabel.Position,
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 17,
    TextColor3 = colors.primary,
    TextTransparency = 0.7,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 5
})

-- Animated glow pulse
task.spawn(function()
    while titleGlow and titleGlow.Parent do
        TweenService:Create(titleGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextTransparency = 0.4
        }):Play()
        task.wait(2)
        if not titleGlow or not titleGlow.Parent then break end
        TweenService:Create(titleGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextTransparency = 0.7
        }):Play()
        task.wait(2)
    end
end)

-- Separator
local separator = new("Frame", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 2, 0, 25),
    Position = UDim2.new(0, 95, 0.5, -12.5),
    BackgroundColor3 = colors.primary,
    BackgroundTransparency = 0.3,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = separator, CornerRadius = UDim.new(1, 0)})

local subtitleLabel = new("TextLabel", {
    Parent = scriptHeader,
    Text = "Free Not For Sale",
    Size = UDim2.new(0, 150, 1, 0),
    Position = UDim2.new(0, 105, 0, 0),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    TextColor3 = colors.textDim,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextTransparency = 0.3,
    ZIndex = 6
})

-- Minimize button
local btnMinHeader = new("TextButton", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 30, 0, 30),
    Position = UDim2.new(1, -38, 0.5, -15),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.5,
    BorderSizePixel = 0,
    Text = "‚îÄ",
    Font = Enum.Font.GothamBold,
    TextSize = 18,
    TextColor3 = colors.textDim,
    TextTransparency = 0.3,
    AutoButtonColor = false,
    ZIndex = 7
})
new("UICorner", {Parent = btnMinHeader, CornerRadius = UDim.new(0, 8)})

local btnStroke = new("UIStroke", {
    Parent = btnMinHeader,
    Color = colors.primary,
    Thickness = 0,
    Transparency = 0.8
})

btnMinHeader.MouseEnter:Connect(function()
    TweenService:Create(btnMinHeader, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundColor3 = colors.galaxy1,
        BackgroundTransparency = 0.2,
        TextColor3 = colors.text,
        TextTransparency = 0,
        Size = UDim2.new(0, 32, 0, 32)
    }):Play()
    TweenService:Create(btnStroke, TweenInfo.new(0.25), {
        Thickness = 1.5,
        Transparency = 0.4
    }):Play()
end)

btnMinHeader.MouseLeave:Connect(function()
    TweenService:Create(btnMinHeader, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.5,
        TextColor3 = colors.textDim,
        TextTransparency = 0.3,
        Size = UDim2.new(0, 30, 0, 30)
    }):Play()
    TweenService:Create(btnStroke, TweenInfo.new(0.25), {
        Thickness = 0,
        Transparency = 0.8
    }):Play()
end)

-- Navigation Container
local navContainer = new("ScrollingFrame", {
    Parent = sidebar,
    Size = UDim2.new(1, -8, 1, -12),
    Position = UDim2.new(0, 4, 0, 6),
    BackgroundTransparency = 1,
    ScrollBarThickness = 2,
    ScrollBarImageColor3 = colors.primary,
    BorderSizePixel = 0,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    AutomaticCanvasSize = Enum.AutomaticSize.Y,
    ClipsDescendants = true,
    ZIndex = 5
})
new("UIListLayout", {
    Parent = navContainer,
    Padding = UDim.new(0, 4),
    SortOrder = Enum.SortOrder.LayoutOrder
})

-- Content Area
local contentBg = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, -(sidebarWidth + 10), 1, -52),
    Position = UDim2.new(0, sidebarWidth + 5, 0, 47),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ClipsDescendants = true,
    ZIndex = 4
})
new("UICorner", {Parent = contentBg, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = contentBg,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

-- Top Bar
local topBar = new("Frame", {
    Parent = contentBg,
    Size = UDim2.new(1, -8, 0, 32),
    Position = UDim2.new(0, 4, 0, 4),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 5
})
new("UICorner", {Parent = topBar, CornerRadius = UDim.new(0, 10)})
new("UIStroke", {
    Parent = topBar,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

local pageTitle = new("TextLabel", {
    Parent = topBar,
    Text = "Main Dashboard",
    Size = UDim2.new(1, -20, 1, 0),
    Position = UDim2.new(0, 12, 0, 0),
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 6
})

-- Resize Handle
local resizing = false
local resizeHandle = new("TextButton", {
    Parent = win,
    Size = UDim2.new(0, 18, 0, 18),
    Position = UDim2.new(1, -18, 1, -18),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "‚ã∞",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.textDim,
    TextTransparency = 0.4,
    AutoButtonColor = false,
    ZIndex = 100
})
new("UICorner", {Parent = resizeHandle, CornerRadius = UDim.new(0, 6)})

local resizeStroke = new("UIStroke", {
    Parent = resizeHandle,
    Color = colors.primary,
    Thickness = 0,
    Transparency = 0.8
})

resizeHandle.MouseEnter:Connect(function()
    TweenService:Create(resizeHandle, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundTransparency = 0.3,
        TextTransparency = 0,
        Size = UDim2.new(0, 20, 0, 20)
    }):Play()
    TweenService:Create(resizeStroke, TweenInfo.new(0.25), {
        Thickness = 1.5,
        Transparency = 0.5
    }):Play()
end)

resizeHandle.MouseLeave:Connect(function()
    if not resizing then
        TweenService:Create(resizeHandle, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
            BackgroundTransparency = 0.6,
            TextTransparency = 0.4,
            Size = UDim2.new(0, 18, 0, 18)
        }):Play()
        TweenService:Create(resizeStroke, TweenInfo.new(0.25), {
            Thickness = 0,
            Transparency = 0.8
        }):Play()
    end
end)

-- ============================================
-- PART 3/8: PAGES & NAVIGATION SYSTEM
-- ============================================

local pages = {}
local currentPage = "Main"
local navButtons = {}

-- Create Page Function
local function createPage(name)
    local page = new("ScrollingFrame", {
        Parent = contentBg,
        Size = UDim2.new(1, -16, 1, -44),
        Position = UDim2.new(0, 8, 0, 40),
        BackgroundTransparency = 1,
        ScrollBarThickness = 3,
        ScrollBarImageColor3 = colors.primary,
        BorderSizePixel = 0,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        Visible = false,
        ClipsDescendants = true,
        ZIndex = 5
    })
    new("UIListLayout", {
        Parent = page,
        Padding = UDim.new(0, 8),
        SortOrder = Enum.SortOrder.LayoutOrder
    })
    new("UIPadding", {
        Parent = page,
        PaddingTop = UDim.new(0, 4),
        PaddingBottom = UDim.new(0, 4)
    })
    pages[name] = page
    return page
end

-- Create all pages
local mainPage = createPage("Main")
local teleportPage = createPage("Teleport")
local shopPage = createPage("Shop")
local webhookPage = createPage("Webhook")
local cameraViewPage = createPage("CameraView")
local settingsPage = createPage("Settings")
local infoPage = createPage("Info")
mainPage.Visible = true

-- Navigation Button Creation
local function createNavButton(text, icon, page, order)
    local btn = new("TextButton", {
        Parent = navContainer,
        Size = UDim2.new(1, 0, 0, 38),
        BackgroundColor3 = page == currentPage and colors.bg3 or Color3.fromRGB(0, 0, 0),
        BackgroundTransparency = page == currentPage and 0.7 or 1,
        BorderSizePixel = 0,
        Text = "",
        AutoButtonColor = false,
        LayoutOrder = order,
        ZIndex = 6
    })
    new("UICorner", {Parent = btn, CornerRadius = UDim.new(0, 9)})
    
    local indicator = new("Frame", {
        Parent = btn,
        Size = UDim2.new(0, 3, 0, 20),
        Position = UDim2.new(0, 0, 0.5, -10),
        BackgroundColor3 = colors.primary,
        BorderSizePixel = 0,
        Visible = page == currentPage,
        ZIndex = 7
    })
    new("UICorner", {Parent = indicator, CornerRadius = UDim.new(1, 0)})
    new("UIStroke", {
        Parent = indicator,
        Color = colors.primary,
        Thickness = 2,
        Transparency = 0.7
    })
    
    local iconLabel = new("TextLabel", {
        Parent = btn,
        Text = icon,
        Size = UDim2.new(0, 30, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 15,
        TextColor3 = page == currentPage and colors.primary or colors.textDim,
        TextTransparency = page == currentPage and 0 or 0.3,
        ZIndex = 7
    })
    
    local textLabel = new("TextLabel", {
        Parent = btn,
        Text = text,
        Size = UDim2.new(1, -45, 1, 0),
        Position = UDim2.new(0, 40, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = page == currentPage and colors.text or colors.textDim,
        TextTransparency = page == currentPage and 0.1 or 0.4,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7
    })
    
    btn.MouseEnter:Connect(function()
        if page ~= currentPage then
            TweenService:Create(btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
                BackgroundTransparency = 0.8
            }):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.3), {
                TextTransparency = 0,
                TextColor3 = colors.primary
            }):Play()
            TweenService:Create(textLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.2
            }):Play()
        end
    end)
    
    btn.MouseLeave:Connect(function()
        if page ~= currentPage then
            TweenService:Create(btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
                BackgroundTransparency = 1
            }):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.3,
                TextColor3 = colors.textDim
            }):Play()
            TweenService:Create(textLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.4
            }):Play()
        end
    end)
    
    navButtons[page] = {btn = btn, icon = iconLabel, text = textLabel, indicator = indicator}
    return btn
end

-- Page Switching Function
local function switchPage(pageName, pageTitle_text)
    if currentPage == pageName then return end
    for _, page in pairs(pages) do page.Visible = false end
    
    for name, btnData in pairs(navButtons) do
        local isActive = name == pageName
        TweenService:Create(btnData.btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
            BackgroundColor3 = isActive and colors.bg3 or Color3.fromRGB(0, 0, 0),
            BackgroundTransparency = isActive and 0.7 or 1
        }):Play()
        btnData.indicator.Visible = isActive
        TweenService:Create(btnData.icon, TweenInfo.new(0.3), {
            TextColor3 = isActive and colors.primary or colors.textDim,
            TextTransparency = isActive and 0 or 0.3
        }):Play()
        TweenService:Create(btnData.text, TweenInfo.new(0.3), {
            TextColor3 = isActive and colors.text or colors.textDim,
            TextTransparency = isActive and 0.1 or 0.4
        }):Play()
    end
    
    pages[pageName].Visible = true
    pageTitle.Text = pageTitle_text
    currentPage = pageName
end

-- Create Navigation Buttons
local btnMain = createNavButton("Dashboard", "üè†", "Main", 1)
local btnTeleport = createNavButton("Teleport", "üåç", "Teleport", 2)
local btnShop = createNavButton("Shop", "üõí", "Shop", 3)
local btnWebhook = createNavButton("Webhook", "üîó", "Webhook", 4)
local btnCameraView = createNavButton("Camera View", "üì∑", "CameraView", 5)
local btnSettings = createNavButton("Settings", "‚öôÔ∏è", "Settings", 6)
local btnInfo = createNavButton("About", "‚ÑπÔ∏è", "Info", 7)

-- Connect Navigation Buttons
btnMain.MouseButton1Click:Connect(function() switchPage("Main", "Main Dashboard") end)
btnTeleport.MouseButton1Click:Connect(function() switchPage("Teleport", "Teleport System") end)
btnShop.MouseButton1Click:Connect(function() switchPage("Shop", "Shop Features") end)
btnWebhook.MouseButton1Click:Connect(function() switchPage("Webhook", "Webhook Page") end)
btnCameraView.MouseButton1Click:Connect(function() switchPage("CameraView", "Camera View Settings") end)
btnSettings.MouseButton1Click:Connect(function() switchPage("Settings", "Settings") end)
btnInfo.MouseButton1Click:Connect(function() switchPage("Info", "About Lynx") end)

-- ============================================
-- REUSABLE UI COMPONENTS
-- ============================================

-- Category Component
local function makeCategory(parent, title, icon)
    local categoryFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 36),
        BackgroundColor3 = colors.bg3,
        BackgroundTransparency = 0.6,
        BorderSizePixel = 0,
        AutomaticSize = Enum.AutomaticSize.Y,
        ClipsDescendants = false,
        ZIndex = 6
    })
    new("UICorner", {Parent = categoryFrame, CornerRadius = UDim.new(0, 6)})
    
    local categoryStroke = new("UIStroke", {
        Parent = categoryFrame,
        Color = colors.border,
        Thickness = 0,
        Transparency = 0.8
    })
    
    local header = new("TextButton", {
        Parent = categoryFrame,
        Size = UDim2.new(1, 0, 0, 36),
        BackgroundTransparency = 1,
        Text = "",
        AutoButtonColor = false,
        ClipsDescendants = true,
        ZIndex = 7
    })
    
    local titleLabel = new("TextLabel", {
        Parent = header,
        Text = title,
        Size = UDim2.new(1, -50, 1, 0),
        Position = UDim2.new(0, 8, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 11,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 8
    })
    
    local arrow = new("TextLabel", {
        Parent = header,
        Text = "‚ñº",
        Size = UDim2.new(0, 20, 1, 0),
        Position = UDim2.new(1, -24, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.primary,
        ZIndex = 8
    })
    
    local contentContainer = new("Frame", {
        Parent = categoryFrame,
        Size = UDim2.new(1, -16, 0, 0),
        Position = UDim2.new(0, 8, 0, 38),
        BackgroundTransparency = 1,
        Visible = false,
        AutomaticSize = Enum.AutomaticSize.Y,
        ClipsDescendants = true,
        ZIndex = 7
    })
    new("UIListLayout", {Parent = contentContainer, Padding = UDim.new(0, 6)})
    new("UIPadding", {Parent = contentContainer, PaddingBottom = UDim.new(0, 8)})
    
    local isOpen = false
    header.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        contentContainer.Visible = isOpen
        TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = isOpen and 180 or 0}):Play()
        TweenService:Create(categoryFrame, TweenInfo.new(0.25), {
            BackgroundTransparency = isOpen and 0.4 or 0.6
        }):Play()
        TweenService:Create(categoryStroke, TweenInfo.new(0.25), {Thickness = isOpen and 1 or 0}):Play()
    end)
    
    return contentContainer
end

-- Toggle Component
local function makeToggle(parent, label, callback)
    local frame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundTransparency = 1,
        ZIndex = 7
    })
    
    local labelText = new("TextLabel", {
        Parent = frame,
        Text = label,
        Size = UDim2.new(0.68, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        TextXAlignment = Enum.TextXAlignment.Left,
        BackgroundTransparency = 1,
        TextColor3 = colors.text,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextWrapped = true,
        ZIndex = 8
    })
    
    local toggleBg = new("Frame", {
        Parent = frame,
        Size = UDim2.new(0, 38, 0, 20),
        Position = UDim2.new(1, -38, 0.5, -10),
        BackgroundColor3 = colors.bg4,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = toggleBg, CornerRadius = UDim.new(1, 0)})
    
    local toggleCircle = new("Frame", {
        Parent = toggleBg,
        Size = UDim2.new(0, 16, 0, 16),
        Position = UDim2.new(0, 2, 0.5, -8),
        BackgroundColor3 = colors.textDim,
        BorderSizePixel = 0,
        ZIndex = 9
    })
    new("UICorner", {Parent = toggleCircle, CornerRadius = UDim.new(1, 0)})
    
    local btn = new("TextButton", {
        Parent = toggleBg,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Text = "",
        ZIndex = 10
    })
    
    local on = false
    local isUpdating = false -- Prevent callback during restore
    
    local function updateVisual(newState, animate)
        on = newState
        local duration = animate and 0.25 or 0
        local easing = animate and Enum.EasingStyle.Back or Enum.EasingStyle.Linear
        
        TweenService:Create(toggleBg, TweenInfo.new(duration), {
            BackgroundColor3 = on and colors.primary or colors.bg4
        }):Play()
        
        TweenService:Create(toggleCircle, TweenInfo.new(duration, easing), {
            Position = on and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8),
            BackgroundColor3 = on and colors.text or colors.textDim
        }):Play()
    end
    
    btn.MouseButton1Click:Connect(function()
        if isUpdating then return end
        on = not on
        updateVisual(on, true)
        pcall(callback, on)
    end)
    
    return {
        toggle = btn,
        setOn = function(val, silent)
            if on == val then return end
            isUpdating = silent or false
            updateVisual(val, not silent)
            if not silent then
                pcall(callback, val)
            end
            isUpdating = false
        end,
        getState = function() return on end
    }
end

-- Input Component
local function makeInput(parent, label, defaultValue, callback)
    local frame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundTransparency = 1,
        ZIndex = 7
    })
    
    local lbl = new("TextLabel", {
        Parent = frame,
        Text = label,
        Size = UDim2.new(0.55, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        BackgroundTransparency = 1,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        ZIndex = 8
    })
    
    local inputBg = new("Frame", {
        Parent = frame,
        Size = UDim2.new(0.42, 0, 0, 28),
        Position = UDim2.new(0.58, 0, 0.5, -14),
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.4,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = inputBg, CornerRadius = UDim.new(0, 6)})
    
    local inputStroke = new("UIStroke", {
        Parent = inputBg,
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    })
    
    local inputBox = new("TextBox", {
        Parent = inputBg,
        Size = UDim2.new(1, -12, 1, 0),
        Position = UDim2.new(0, 6, 0, 0),
        BackgroundTransparency = 1,
        Text = tostring(defaultValue),
        PlaceholderText = "0.00",
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        PlaceholderColor3 = colors.textDimmer,
        TextXAlignment = Enum.TextXAlignment.Center,
        ClearTextOnFocus = false,
        ZIndex = 9
    })
    
    inputBox.Focused:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = colors.primary,
            Thickness = 1.5,
            Transparency = 0.3
        }):Play()
    end)
    
    inputBox.FocusLost:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = colors.border,
            Thickness = 1,
            Transparency = 0.7
        }):Play()
        
        local value = tonumber(inputBox.Text)
        if value then
            pcall(callback, value)
        else
            inputBox.Text = tostring(defaultValue)
        end
    end)
    
    return inputBox
end

-- Button Component
local function makeButton(parent, label, callback)
    local btnFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundColor3 = colors.primary,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = btnFrame, CornerRadius = UDim.new(0, 6)})
    
    local btnStroke = new("UIStroke", {
        Parent = btnFrame,
        Color = colors.primary,
        Thickness = 0,
        Transparency = 0.7
    })
    
    local button = new("TextButton", {
        Parent = btnFrame,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Text = label,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.text,
        AutoButtonColor = false,
        ZIndex = 9
    })
    
    button.MouseEnter:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.1,
            Size = UDim2.new(1, 0, 0, 35)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2), {Thickness = 1.5}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.3,
            Size = UDim2.new(1, 0, 0, 32)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2), {Thickness = 0}):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.1), {Size = UDim2.new(0.98, 0, 0, 30)}):Play()
        task.wait(0.1)
        TweenService:Create(btnFrame, TweenInfo.new(0.1), {Size = UDim2.new(1, 0, 0, 32)}):Play()
        pcall(callback)
    end)
    
    return btnFrame
end

-- ============================================
-- PART 4/8: DROPDOWN & CHECKBOX COMPONENTS
-- ============================================

-- ==========================================
-- UPDATED DROPDOWN FUNCTION (Replace your existing makeDropdown)
-- ==========================================
local function makeDropdown(parent, title, icon, items, onSelect, uniqueId, defaultValue)
    local dropdownFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 40),
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        AutomaticSize = Enum.AutomaticSize.Y,
        ZIndex = 7,
        Name = uniqueId or "Dropdown"
    })
    new("UICorner", {Parent = dropdownFrame, CornerRadius = UDim.new(0, 6)})
    
    local dropStroke = new("UIStroke", {
        Parent = dropdownFrame,
        Color = colors.border,
        Thickness = 0,
        Transparency = 0.8
    })
    
    local header = new("TextButton", {
        Parent = dropdownFrame,
        Size = UDim2.new(1, -12, 0, 36),
        Position = UDim2.new(0, 6, 0, 2),
        BackgroundTransparency = 1,
        Text = "",
        AutoButtonColor = false,
        ZIndex = 8
    })
    
    local iconLabel = new("TextLabel", {
        Parent = header,
        Text = icon,
        Size = UDim2.new(0, 24, 1, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 12,
        TextColor3 = colors.primary,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local titleLabel = new("TextLabel", {
        Parent = header,
        Text = title,
        Size = UDim2.new(1, -70, 0, 14),
        Position = UDim2.new(0, 26, 0, 4),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local statusLabel = new("TextLabel", {
        Parent = header,
        Text = "None Selected",
        Size = UDim2.new(1, -70, 0, 12),
        Position = UDim2.new(0, 26, 0, 20),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 8,
        TextColor3 = colors.textDimmer,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local arrow = new("TextLabel", {
        Parent = header,
        Text = "‚ñº",
        Size = UDim2.new(0, 24, 1, 0),
        Position = UDim2.new(1, -24, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.primary,
        ZIndex = 9
    })
    
    local listContainer = new("ScrollingFrame", {
        Parent = dropdownFrame,
        Size = UDim2.new(1, -12, 0, 0),
        Position = UDim2.new(0, 6, 0, 42),
        BackgroundTransparency = 1,
        Visible = false,
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 2,
        ScrollBarImageColor3 = colors.primary,
        BorderSizePixel = 0,
        ClipsDescendants = true,
        ZIndex = 10
    })
    new("UIListLayout", {Parent = listContainer, Padding = UDim.new(0, 4)})
    new("UIPadding", {Parent = listContainer, PaddingBottom = UDim.new(0, 8)})
    
    local isOpen = false
    local selectedItem = nil
    
    -- ‚≠ê Function to set selected item
    local function setSelectedItem(itemName, triggerCallback)
        selectedItem = itemName
        statusLabel.Text = "‚úì " .. itemName
        statusLabel.TextColor3 = colors.success
        if triggerCallback then
            pcall(onSelect, itemName)
        end
    end
    
    header.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        listContainer.Visible = isOpen
        
        TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = isOpen and 180 or 0}):Play()
        TweenService:Create(dropdownFrame, TweenInfo.new(0.25), {
            BackgroundTransparency = isOpen and 0.35 or 0.5
        }):Play()
        TweenService:Create(dropStroke, TweenInfo.new(0.25), {Thickness = isOpen and 1 or 0}):Play()
        
        if isOpen then
            listContainer.Size = UDim2.new(1, -12, 0, math.min(#items * 28, 140))
        end
    end)
    
    for _, itemName in ipairs(items) do
        local itemBtn = new("TextButton", {
            Parent = listContainer,
            Size = UDim2.new(1, 0, 0, 26),
            BackgroundColor3 = colors.bg4,
            BackgroundTransparency = 0.6,
            BorderSizePixel = 0,
            Text = "",
            AutoButtonColor = false,
            ZIndex = 11
        })
        new("UICorner", {Parent = itemBtn, CornerRadius = UDim.new(0, 5)})
        
        local itemStroke = new("UIStroke", {
            Parent = itemBtn,
            Color = colors.border,
            Thickness = 0,
            Transparency = 0.8
        })
        
        local btnLabel = new("TextLabel", {
            Parent = itemBtn,
            Text = itemName,
            Size = UDim2.new(1, -12, 1, 0),
            Position = UDim2.new(0, 6, 0, 0),
            BackgroundTransparency = 1,
            Font = Enum.Font.GothamBold,
            TextSize = 8,
            TextColor3 = colors.textDim,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextTruncate = Enum.TextTruncate.AtEnd,
            ZIndex = 12
        })
        
        itemBtn.MouseEnter:Connect(function()
            if selectedItem ~= itemName then
                TweenService:Create(itemBtn, TweenInfo.new(0.2), {
                    BackgroundColor3 = colors.primary,
                    BackgroundTransparency = 0.3
                }):Play()
                TweenService:Create(btnLabel, TweenInfo.new(0.2), {TextColor3 = colors.text}):Play()
                TweenService:Create(itemStroke, TweenInfo.new(0.2), {Thickness = 1}):Play()
            end
        end)
        
        itemBtn.MouseLeave:Connect(function()
            if selectedItem ~= itemName then
                TweenService:Create(itemBtn, TweenInfo.new(0.2), {
                    BackgroundColor3 = colors.bg4,
                    BackgroundTransparency = 0.6
                }):Play()
                TweenService:Create(btnLabel, TweenInfo.new(0.2), {TextColor3 = colors.textDim}):Play()
                TweenService:Create(itemStroke, TweenInfo.new(0.2), {Thickness = 0}):Play()
            end
        end)
        
        itemBtn.MouseButton1Click:Connect(function()
            setSelectedItem(itemName, true)
            
            task.wait(0.1)
            isOpen = false
            listContainer.Visible = false
            TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = 0}):Play()
            TweenService:Create(dropdownFrame, TweenInfo.new(0.25), {
                BackgroundTransparency = 0.5
            }):Play()
            TweenService:Create(dropStroke, TweenInfo.new(0.25), {Thickness = 0}):Play()
        end)
    end
    
    -- ‚≠ê Set default value if provided
    if defaultValue and table.find(items, defaultValue) then
        task.spawn(function()
            task.wait(0.1)
            setSelectedItem(defaultValue, false) -- false = don't trigger callback yet
            print("‚úÖ Dropdown '" .. title .. "' default set to:", defaultValue)
        end)
    end
    
    return dropdownFrame
end

-- Checkbox List Component
local function makeCheckboxList(parent, items, colorMap, onSelectionChange)
    local selectedItems = {}
    local checkboxRefs = {}
    
    local listContainer = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, #items * 33 + 10),
        BackgroundColor3 = colors.bg2,
        BackgroundTransparency = 0.8,
        BorderSizePixel = 0,
        ZIndex = 7
    })
    new("UICorner", {Parent = listContainer, CornerRadius = UDim.new(0, 8)})
    new("UIStroke", {Parent = listContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})
    
    local function createCheckbox(itemName, yPos)
        local checkboxRow = new("Frame", {
            Parent = listContainer,
            Size = UDim2.new(1, -20, 0, 30),
            Position = UDim2.new(0, 10, 0, yPos),
            BackgroundColor3 = colors.bg3,
            BackgroundTransparency = 0.8,
            BorderSizePixel = 0,
            ZIndex = 8
        })
        new("UICorner", {Parent = checkboxRow, CornerRadius = UDim.new(0, 6)})
        
        local checkbox = new("TextButton", {
            Parent = checkboxRow,
            Size = UDim2.new(0, 24, 0, 24),
            Position = UDim2.new(0, 8, 0, 3),
            BackgroundColor3 = colors.bg1,
            BackgroundTransparency = 0.4,
            BorderSizePixel = 0,
            Text = "",
            ZIndex = 9
        })
        new("UICorner", {Parent = checkbox, CornerRadius = UDim.new(0, 4)})
        
        local itemColor = (colorMap and colorMap[itemName]) or colors.primary
        local checkboxStroke = new("UIStroke", {
            Parent = checkbox,
            Color = itemColor,
            Thickness = 2,
            Transparency = 0.7
        })
        
        local checkmark = new("TextLabel", {
            Parent = checkbox,
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundTransparency = 1,
            Text = "‚úì",
            Font = Enum.Font.GothamBold,
            TextSize = 18,
            TextColor3 = colors.text,
            Visible = false,
            ZIndex = 10
        })
        
        local label = new("TextLabel", {
            Parent = checkboxRow,
            Size = UDim2.new(1, -45, 1, 0),
            Position = UDim2.new(0, 40, 0, 0),
            BackgroundTransparency = 1,
            Text = itemName,
            Font = Enum.Font.GothamBold,
            TextSize = 9,
            TextColor3 = colors.text,
            TextTransparency = 0.1,
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 9
        })
        
        local isSelected = false
        
        checkbox.MouseButton1Click:Connect(function()
            isSelected = not isSelected
            checkmark.Visible = isSelected
            
            if isSelected then
                if not table.find(selectedItems, itemName) then
                    table.insert(selectedItems, itemName)
                end
                TweenService:Create(checkbox, TweenInfo.new(0.25), {
                    BackgroundColor3 = itemColor,
                    BackgroundTransparency = 0.2
                }):Play()
            else
                local idx = table.find(selectedItems, itemName)
                if idx then table.remove(selectedItems, idx) end
                TweenService:Create(checkbox, TweenInfo.new(0.25), {
                    BackgroundColor3 = colors.bg1,
                    BackgroundTransparency = 0.4
                }):Play()
            end
            
            if onSelectionChange then
                pcall(onSelectionChange, selectedItems)
            end
        end)
        
        return {
            checkbox = checkbox,
            checkmark = checkmark,
            isSelected = function() return isSelected end,
            setSelected = function(val)
                if isSelected ~= val then
                    checkbox.MouseButton1Click:Fire()
                end
            end
        }
    end
    
    for i, itemName in ipairs(items) do
        checkboxRefs[itemName] = createCheckbox(itemName, (i - 1) * 33 + 5)
    end
    
    return {
        GetSelected = function() return selectedItems end,
        SelectAll = function()
            for _, item in ipairs(items) do
                if checkboxRefs[item] and not checkboxRefs[item].isSelected() then
                    checkboxRefs[item].setSelected(true)
                end
            end
        end,
        ClearAll = function()
            for _, item in ipairs(items) do
                if checkboxRefs[item] and checkboxRefs[item].isSelected() then
                    checkboxRefs[item].setSelected(false)
                end
            end
        end,
        SelectSpecific = function(itemList)
            for _, item in ipairs(items) do
                if checkboxRefs[item] then
                    local shouldSelect = table.find(itemList, item) ~= nil
                    if checkboxRefs[item].isSelected() ~= shouldSelect then
                        checkboxRefs[item].setSelected(shouldSelect)
                    end
                end
            end
        end
    }
end

-- ============================================
-- PART 5/8: CONFIG SYSTEM & MAIN PAGE FEATURES
-- ============================================

-- Load ConfigSystem
local ConfigSystem
local configSuccess, configError = pcall(function()
    ConfigSystem = loadstring(game:HttpGet("https://raw.githubusercontent.com/akmiliadevi/Tugas_Kuliah/refs/heads/main/Project_code/Misc/SaveConfig.lua"))()
end)

if not configSuccess or not ConfigSystem then
    warn("‚ùå ConfigSystem failed to load:", configError)
    warn("‚ö†Ô∏è Config auto-save will not be available")
else
    print("‚úÖ ConfigSystem loaded successfully")
end

-- Config Helper Functions
local function GetConfigValue(path, default)
    if ConfigSystem then
        local success, value = pcall(function()
            return ConfigSystem.Get(path)
        end)
        if success and value ~= nil then
            return value
        end
    end
    return default
end

local function SetConfigValue(path, value)
    if ConfigSystem then
        pcall(function()
            ConfigSystem.Set(path, value)
        end)
    end
end

local function SaveCurrentConfig()
    if ConfigSystem then
        pcall(function()
            local success, message = ConfigSystem.Save()
            if success and DEBUG_MODE then
                print("üíæ Config auto-saved")
            end
        end)
    end
end

-- ============================================
-- TAMBAHKAN INI SEBELUM "AUTO FISHING SECTION"
-- (Letakkan setelah function makeButton dan sebelum catAutoFishing)
-- ============================================

-- ‚≠ê PENTING: Toggle References untuk menyimpan semua toggle states
local ToggleReferences = {}

-- ==========================================
-- AUTO FISHING SECTION (FIXED)
-- ==========================================
local catAutoFishing = makeCategory(mainPage, "Auto Fishing", "üé£")

-- ‚≠ê Load saved settings first
local savedInstantMode = GetConfigValue("InstantFishing.Mode", "Fast")
local savedFishingDelay = GetConfigValue("InstantFishing.FishingDelay", 1.30)
local savedCancelDelay = GetConfigValue("InstantFishing.CancelDelay", 0.19)
local savedInstantEnabled = GetConfigValue("InstantFishing.Enabled", false)

-- Variables to track current state
local currentInstantMode = savedInstantMode
local fishingDelayValue = savedFishingDelay
local cancelDelayValue = savedCancelDelay
local isInstantFishingEnabled = false

-- ‚≠ê Apply settings to modules immediately on load
task.spawn(function()
    task.wait(0.5)
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if instant then
        instant.Settings.MaxWaitTime = savedFishingDelay
        instant.Settings.CancelDelay = savedCancelDelay
        print("‚úÖ Instant (Fast) settings loaded from config")
    end
    
    if instant2 then
        instant2.Settings.MaxWaitTime = savedFishingDelay
        instant2.Settings.CancelDelay = savedCancelDelay
        print("‚úÖ Instant2 (Perfect) settings loaded from config")
    end
    
    print("‚úÖ Auto Fishing Mode loaded:", savedInstantMode)
end)

-- Instant Fishing Mode Dropdown (‚≠ê with default value)
makeDropdown(catAutoFishing, "Instant Fishing Mode", "‚ö°", {"Fast", "Perfect"}, function(mode)
    currentInstantMode = mode
    SetConfigValue("InstantFishing.Mode", mode)
    SaveCurrentConfig()
    print("‚úÖ Instant Fishing Mode changed to:", mode)
    
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    -- Stop both modules first
    if instant then instant.Stop() end
    if instant2 then instant2.Stop() end
    
    -- Update settings for both modules
    if instant then
        instant.Settings.MaxWaitTime = fishingDelayValue
        instant.Settings.CancelDelay = cancelDelayValue
    end
    if instant2 then
        instant2.Settings.MaxWaitTime = fishingDelayValue
        instant2.Settings.CancelDelay = cancelDelayValue
    end
    
    -- Start the selected mode if enabled
    if isInstantFishingEnabled then
        if mode == "Fast" and instant then
            instant.Start()
            print("‚úÖ Fast mode started")
        elseif mode == "Perfect" and instant2 then
            instant2.Start()
            print("‚úÖ Perfect mode started")
        end
    end
end, "InstantFishingMode", savedInstantMode) -- ‚≠ê Pass default value here

-- Enable Instant Fishing Toggle
ToggleReferences.InstantFishing = makeToggle(catAutoFishing, "Enable Instant Fishing", function(on)
    isInstantFishingEnabled = on
    SetConfigValue("InstantFishing.Enabled", on)
    SaveCurrentConfig()
    print("‚úÖ Instant Fishing enabled:", on)
    
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if on then
        if currentInstantMode == "Fast" and instant then
            instant.Start()
            print("‚úÖ Fast mode activated")
        elseif currentInstantMode == "Perfect" and instant2 then
            instant2.Start()
            print("‚úÖ Perfect mode activated")
        end
    else
        if instant then instant.Stop() end
        if instant2 then instant2.Stop() end
        print("‚úÖ All fishing modes stopped")
    end
end)

-- ‚≠ê Restore toggle state after creation
task.spawn(function()
    task.wait(0.5)
    if savedInstantEnabled and ToggleReferences.InstantFishing then
        ToggleReferences.InstantFishing.setOn(savedInstantEnabled, true)
        isInstantFishingEnabled = true
        print("‚úÖ Instant Fishing toggle restored to ON")
        
        -- ‚≠ê PENTING: Auto-start module yang benar
        local instant = GetModule("instant")
        local instant2 = GetModule("instant2")
        
        if currentInstantMode == "Fast" and instant then
            instant.Start()
            print("‚úÖ Fast mode auto-started on load")
        elseif currentInstantMode == "Perfect" and instant2 then
            instant2.Start()
            print("‚úÖ Perfect mode auto-started on load")
        end
    end
end)

-- Fishing Delay Input
makeInput(catAutoFishing, "Fishing Delay", savedFishingDelay, function(v)
    fishingDelayValue = v
    SetConfigValue("InstantFishing.FishingDelay", v)
    SaveCurrentConfig()
    
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if instant then 
        instant.Settings.MaxWaitTime = v
        print("‚úÖ Fast mode Fishing Delay updated to:", v)
    end
    if instant2 then 
        instant2.Settings.MaxWaitTime = v
        print("‚úÖ Perfect mode Fishing Delay updated to:", v)
    end
end)

-- Cancel Delay Input
makeInput(catAutoFishing, "Cancel Delay", savedCancelDelay, function(v)
    cancelDelayValue = v
    SetConfigValue("InstantFishing.CancelDelay", v)
    SaveCurrentConfig()
    
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if instant then 
        instant.Settings.CancelDelay = v
        print("‚úÖ Fast mode Cancel Delay updated to:", v)
    end
    if instant2 then 
        instant2.Settings.CancelDelay = v
        print("‚úÖ Perfect mode Cancel Delay updated to:", v)
    end
end)

-- ============================================
-- MAIN PAGE - BLATANT MODES
-- ============================================

-- Blatant Tester Category
local catBlatantV2 = makeCategory(mainPage, "Blatant Tester", "üéØ")

-- ‚≠ê Load saved settings first
local savedBlatantTesterCompleteDelay = GetConfigValue("BlatantTester.CompleteDelay", 0.5)
local savedBlatantTesterCancelDelay = GetConfigValue("BlatantTester.CancelDelay", 0.1)

-- ‚≠ê Apply settings to module immediately on load
task.spawn(function()
    task.wait(0.5)
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        blatantv2fix.Settings.CompleteDelay = savedBlatantTesterCompleteDelay
        blatantv2fix.Settings.CancelDelay = savedBlatantTesterCancelDelay
        print("‚úÖ BlatantTester settings loaded from config")
    end
end)

ToggleReferences.BlatantTester = makeToggle(catBlatantV2, "Blatant Tester", function(on)
    SetConfigValue("BlatantTester.Enabled", on)
    SaveCurrentConfig()
    
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        if on then blatantv2fix.Start() else blatantv2fix.Stop() end
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedBlatantTesterCompleteDelay
makeInput(catBlatantV2, "Complete Delay", savedBlatantTesterCompleteDelay, function(v)
    SetConfigValue("BlatantTester.CompleteDelay", v)
    SaveCurrentConfig()
    
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        blatantv2fix.Settings.CompleteDelay = v
        print("‚úÖ BlatantTester CompleteDelay updated to:", v)
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedBlatantTesterCancelDelay
makeInput(catBlatantV2, "Cancel Delay", savedBlatantTesterCancelDelay, function(v)
    SetConfigValue("BlatantTester.CancelDelay", v)
    SaveCurrentConfig()
    
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        blatantv2fix.Settings.CancelDelay = v
        print("‚úÖ BlatantTester CancelDelay updated to:", v)
    end
end)

-- Blatant V1 Category
local catBlatantV1 = makeCategory(mainPage, "Blatant V1", "üíÄ")

-- ‚≠ê Load saved settings first
local savedBlatantV1CompleteDelay = GetConfigValue("BlatantV1.CompleteDelay", 0.05)
local savedBlatantV1CancelDelay = GetConfigValue("BlatantV1.CancelDelay", 0.1)

-- ‚≠ê Apply settings to module immediately on load
task.spawn(function()
    task.wait(0.5)
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then
        blatantv1.Settings.CompleteDelay = savedBlatantV1CompleteDelay
        blatantv1.Settings.CancelDelay = savedBlatantV1CancelDelay
        print("‚úÖ BlatantV1 settings loaded from config")
    end
end)

ToggleReferences.BlatantV1 = makeToggle(catBlatantV1, "Blatant Mode", function(on)
    SetConfigValue("BlatantV1.Enabled", on)
    SaveCurrentConfig()
    
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then
        if on then blatantv1.Start() else blatantv1.Stop() end
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedBlatantV1CompleteDelay
makeInput(catBlatantV1, "Complete Delay", savedBlatantV1CompleteDelay, function(v)
    SetConfigValue("BlatantV1.CompleteDelay", v)
    SaveCurrentConfig()
    
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then 
        blatantv1.Settings.CompleteDelay = v
        print("‚úÖ BlatantV1 CompleteDelay updated to:", v)
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedBlatantV1CancelDelay
makeInput(catBlatantV1, "Cancel Delay", savedBlatantV1CancelDelay, function(v)
    SetConfigValue("BlatantV1.CancelDelay", v)
    SaveCurrentConfig()
    
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then 
        blatantv1.Settings.CancelDelay = v
        print("‚úÖ BlatantV1 CancelDelay updated to:", v)
    end
end)

-- Ultra Blatant V2 Category
local catUltraBlatant = makeCategory(mainPage, "Blatant V2", "‚ö°")

-- ‚≠ê Load saved settings first
local savedUltraBlatantCompleteDelay = GetConfigValue("UltraBlatant.CompleteDelay", 0.05)
local savedUltraBlatantCancelDelay = GetConfigValue("UltraBlatant.CancelDelay", 0.1)

-- ‚≠ê Apply settings to module immediately on load
task.spawn(function()
    task.wait(0.5)
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then
        -- Cek apakah module punya Settings table
        if UltraBlatant.Settings then
            UltraBlatant.Settings.CompleteDelay = savedUltraBlatantCompleteDelay
            UltraBlatant.Settings.CancelDelay = savedUltraBlatantCancelDelay
            print("‚úÖ UltraBlatant settings loaded from config")
        -- Kalau punya UpdateSettings function
        elseif UltraBlatant.UpdateSettings then
            UltraBlatant.UpdateSettings(savedUltraBlatantCompleteDelay, savedUltraBlatantCancelDelay, nil)
            print("‚úÖ UltraBlatant settings loaded via UpdateSettings")
        end
    end
end)

ToggleReferences.UltraBlatant = makeToggle(catUltraBlatant, "Blatant Mode", function(on)
    SetConfigValue("UltraBlatant.Enabled", on)
    SaveCurrentConfig()
    
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then
        if on then UltraBlatant.Start() else UltraBlatant.Stop() end
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedUltraBlatantCompleteDelay
makeInput(catUltraBlatant, "Complete Delay", savedUltraBlatantCompleteDelay, function(v)
    SetConfigValue("UltraBlatant.CompleteDelay", v)
    SaveCurrentConfig()
    
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then
        if UltraBlatant.Settings then
            UltraBlatant.Settings.CompleteDelay = v
            print("‚úÖ UltraBlatant CompleteDelay updated to:", v)
        elseif UltraBlatant.UpdateSettings then
            UltraBlatant.UpdateSettings(v, nil, nil)
            print("‚úÖ UltraBlatant CompleteDelay updated via UpdateSettings to:", v)
        end
    end
end)

-- ‚≠ê PENTING: Gunakan variable savedUltraBlatantCancelDelay
makeInput(catUltraBlatant, "Cancel Delay", savedUltraBlatantCancelDelay, function(v)
    SetConfigValue("UltraBlatant.CancelDelay", v)
    SaveCurrentConfig()
    
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then
        if UltraBlatant.Settings then
            UltraBlatant.Settings.CancelDelay = v
            print("‚úÖ UltraBlatant CancelDelay updated to:", v)
        elseif UltraBlatant.UpdateSettings then
            UltraBlatant.UpdateSettings(nil, v, nil)
            print("‚úÖ UltraBlatant CancelDelay updated via UpdateSettings to:", v)
        end
    end
end)

-- Fast Auto Fishing Perfect Category
local catBlatantV2Fast = makeCategory(mainPage, "Fast Auto Fishing Perfect", "üî•")

ToggleReferences.FastAutoPerfect = makeToggle(catBlatantV2Fast, "Fast Fishing Features", function(on)
    SetConfigValue("FastAutoPerfect.Enabled", on)
    SaveCurrentConfig()
    
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then
        if on then blatantv2.Start() else blatantv2.Stop() end
    end
end)

makeInput(catBlatantV2Fast, "Fishing Delay", GetConfigValue("FastAutoPerfect.FishingDelay", 0.05), function(v)
    SetConfigValue("FastAutoPerfect.FishingDelay", v)
    SaveCurrentConfig()
    
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.FishingDelay = v end
end)

makeInput(catBlatantV2Fast, "Cancel Delay", GetConfigValue("FastAutoPerfect.CancelDelay", 0.01), function(v)
    SetConfigValue("FastAutoPerfect.CancelDelay", v)
    SaveCurrentConfig()
    
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.CancelDelay = v end
end)

makeInput(catBlatantV2Fast, "Timeout Delay", GetConfigValue("FastAutoPerfect.TimeoutDelay", 0.8), function(v)
    SetConfigValue("FastAutoPerfect.TimeoutDelay", v)
    SaveCurrentConfig()
    
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.TimeoutDelay = v end
end)

-- ============================================
-- MAIN PAGE - SUPPORT FEATURES
-- ============================================

local catSupport = makeCategory(mainPage, "Support Features", "üõ†Ô∏è")

ToggleReferences.NoFishingAnimation = makeToggle(catSupport, "No Fishing Animation", function(on)
    SetConfigValue("Support.NoFishingAnimation", on)
    SaveCurrentConfig()
    
    local NoFishingAnimation = GetModule("NoFishingAnimation")
    if NoFishingAnimation then
        if on then NoFishingAnimation.StartWithDelay() else NoFishingAnimation.Stop() end
    end
end)

ToggleReferences.LockPosition = makeToggle(catSupport, "Lock Position", function(on)
    SetConfigValue("Support.LockPosition", on)
    SaveCurrentConfig()
    
    local LockPosition = GetModule("LockPosition")
    local Notify = GetModule("Notify")
    if LockPosition then
        if on then
            LockPosition.Start()
            if Notify then Notify.Send("Lock Position", "Posisi dikunci!", 4) end
        else
            LockPosition.Stop()
            if Notify then Notify.Send("Lock Position", "Posisi dilepas!", 4) end
        end
    end
end)

ToggleReferences.AutoEquipRod = makeToggle(catSupport, "Auto Equip Rod", function(on)
    SetConfigValue("Support.AutoEquipRod", on)
    SaveCurrentConfig()
    
    local AutoEquipRod = GetModule("AutoEquipRod")
    local Notify = GetModule("Notify")
    if AutoEquipRod then
        if on then
            AutoEquipRod.Start()
            if Notify then Notify.Send("Auto Equip Rod", "Rod auto equip aktif!", 4) end
        else
            AutoEquipRod.Stop()
            if Notify then Notify.Send("Auto Equip Rod", "Auto equip dimatikan!", 4) end
        end
    end
end)

ToggleReferences.DisableCutscenes = makeToggle(catSupport, "Disable Cutscenes", function(on)
    SetConfigValue("Support.DisableCutscenes", on)
    SaveCurrentConfig()
    
    local DisableCutscenes = GetModule("DisableCutscenes")
    local Notify = GetModule("Notify")
    if DisableCutscenes then
        if on then
            local success = DisableCutscenes.Start()
            if Notify then
                if success then
                    Notify.Send("Disable Cutscenes", "‚úì Cutscenes dimatikan!", 4)
                else
                    Notify.Send("Disable Cutscenes", "‚ö† Sudah aktif!", 3)
                end
            end
        else
            local success = DisableCutscenes.Stop()
            if Notify then
                if success then
                    Notify.Send("Disable Cutscenes", "‚úì Cutscenes normal.", 4)
                else
                    Notify.Send("Disable Cutscenes", "‚ö† Sudah nonaktif!", 3)
                end
            end
        end
    end
end)

ToggleReferences.DisableObtainedNotif = makeToggle(catSupport, "Disable Obtained Fish Notification", function(on)
    SetConfigValue("Support.DisableObtainedNotif", on)
    SaveCurrentConfig()
    
    local DisableExtras = GetModule("DisableExtras")
    local Notify = GetModule("Notify")
    if DisableExtras then
        if on then
            DisableExtras.StartSmallNotification()
            if Notify then Notify.Send("Disable Notification", "‚úì Notifikasi dinonaktifkan!", 4) end
        else
            DisableExtras.StopSmallNotification()
            if Notify then Notify.Send("Disable Notification", "Notifikasi aktif kembali.", 3) end
        end
    end
end)

ToggleReferences.DisableSkinEffect = makeToggle(catSupport, "Disable Skin Effect", function(on)
    SetConfigValue("Support.DisableSkinEffect", on)
    SaveCurrentConfig()
    
    local DisableExtras = GetModule("DisableExtras")
    local Notify = GetModule("Notify")
    if DisableExtras then
        if on then
            DisableExtras.StartSkinEffect()
            if Notify then Notify.Send("Disable Skin Effect", "‚úì Skin effect dihapus!", 4) end
        else
            DisableExtras.StopSkinEffect()
            if Notify then Notify.Send("Disable Skin Effect", "Skin effect aktif kembali.", 3) end
        end
    end
end)

ToggleReferences.WalkOnWater = makeToggle(catSupport, "Walk On Water", function(on)
    SetConfigValue("Support.WalkOnWater", on)
    SaveCurrentConfig()
    
    local WalkOnWater = GetModule("WalkOnWater")
    local Notify = GetModule("Notify")
    if WalkOnWater then
        if on then
            WalkOnWater.Start()
            if Notify then Notify.Send("Walk On Water", "‚úì Berjalan di air aktif!", 4) end
        else
            WalkOnWater.Stop()
            if Notify then Notify.Send("Walk On Water", "Walk on water dimatikan.", 3) end
        end
    end
end)

ToggleReferences.GoodPerfectionStable = makeToggle(catSupport, "Good/Perfection Stable Mode", function(on)
    SetConfigValue("Support.GoodPerfectionStable", on)
    SaveCurrentConfig()
    
    local GoodPerfectionStable = GetModule("GoodPerfectionStable")
    local Notify = GetModule("Notify")
    if GoodPerfectionStable then
        if on then
            GoodPerfectionStable.Start()
            if Notify then Notify.Send("Good/Perfection Stable", "Fitur dihidupkan!", 4) end
        else
            GoodPerfectionStable.Stop()
            if Notify then Notify.Send("Good/Perfection Stable", "Fitur dimatikan!", 4) end
        end
    end
end)

-- ============================================
-- MAIN PAGE - AUTO TOTEM & SKIN ANIMATION
-- ============================================

local catAutoTotem = makeCategory(mainPage, "Auto Spawn 3X Totem", "üõ†Ô∏è")

makeButton(catAutoTotem, "Auto Totem 3X", function()
    local AutoTotem3X = GetModule("AutoTotem3X")
    local Notify = GetModule("Notify")
    if AutoTotem3X then
        if AutoTotem3X.IsRunning() then
            local success, message = AutoTotem3X.Stop()
            if success and Notify then
                Notify.Send("Auto Totem 3X", "‚èπ " .. message, 4)
            end
        else
            local success, message = AutoTotem3X.Start()
            if Notify then
                if success then
                    Notify.Send("Auto Totem 3X", "‚ñ∂ " .. message, 4)
                else
                    Notify.Send("Auto Totem 3X", "‚ö† " .. message, 3)
                end
            end
        end
    end
end)

local catSkin = makeCategory(mainPage, "Skin Animation", "‚ú®")

makeButton(catSkin, "‚öîÔ∏è Eclipse Katana", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("Eclipse")
        if success then
            SetConfigValue("Support.SkinAnimation.Current", "Eclipse")
            SaveCurrentConfig()
            if Notify then Notify.Send("Skin Animation", "‚öîÔ∏è Eclipse Katana diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeButton(catSkin, "üî± Holy Trident", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("HolyTrident")
        if success then
            SetConfigValue("Support.SkinAnimation.Current", "HolyTrident")
            SaveCurrentConfig()
            if Notify then Notify.Send("Skin Animation", "üî± Holy Trident diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeButton(catSkin, "üíÄ Soul Scythe", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("SoulScythe")
        if success then
            SetConfigValue("Support.SkinAnimation.Current", "SoulScythe")
            SaveCurrentConfig()
            if Notify then Notify.Send("Skin Animation", "üíÄ Soul Scythe diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeToggle(catSkin, "Enable Skin Animation", function(on)
    SetConfigValue("Support.SkinAnimation.Enabled", on)
    SaveCurrentConfig()
    
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        if on then
            local success = SkinAnimation.Enable()
            if Notify then
                if success then
                    local currentSkin = SkinAnimation.GetCurrentSkin()
                    local icon = currentSkin == "Eclipse" and "‚öîÔ∏è" or (currentSkin == "HolyTrident" and "üî±" or "üíÄ")
                    Notify.Send("Skin Animation", "‚úì " .. icon .. " " .. currentSkin .. " aktif!", 4)
                else
                    Notify.Send("Skin Animation", "‚ö† Sudah aktif!", 3)
                end
            end
        else
            local success = SkinAnimation.Disable()
            if Notify then
                if success then
                    Notify.Send("Skin Animation", "‚úì Skin Animation dimatikan!", 4)
                else
                    Notify.Send("Skin Animation", "‚ö† Sudah nonaktif!", 3)
                end
            end
        end
    end
end)

-- ============================================
-- PART 6/8: TELEPORT, SHOP & WEBHOOK PAGES
-- ============================================

-- TELEPORT PAGE
local catTeleport = makeCategory(teleportPage, "Event Teleport", "üéØ")
local selectedEventName = GetConfigValue("Teleport.LastEventSelected", nil)
local EventTeleport = GetModule("EventTeleportDynamic")

if EventTeleport then
    local eventNames = EventTeleport.GetEventNames() or {}
    
    if #eventNames == 0 then
        eventNames = {"- No events available -"}
    end
    
    makeDropdown(catTeleport, "Pilih Event", "üìå", eventNames, function(selected)
        if selected ~= "- No events available -" then
            selectedEventName = selected
            SetConfigValue("Teleport.LastEventSelected", selected)
            SaveCurrentConfig()
            SendNotification("Event", "Event dipilih: " .. tostring(selected), 3)
        end
    end, "EventTeleport")
    
    ToggleReferences.AutoTeleportEvent = makeToggle(catTeleport, "Enable Auto Teleport", function(on)
        SetConfigValue("Teleport.AutoTeleportEvent", on)
        SaveCurrentConfig()
        
        if on then
            if selectedEventName and selectedEventName ~= "- No events available -" and EventTeleport.HasCoords(selectedEventName) then
                EventTeleport.Start(selectedEventName)
                SendNotification("Auto Teleport", "Mulai auto teleport ke " .. selectedEventName, 4)
            else
                SendNotification("Auto Teleport", "Pilih event yang memiliki koordinat dulu!", 3)
            end
        else
            EventTeleport.Stop()
            SendNotification("Auto Teleport", "Auto teleport dihentikan.", 3)
        end
    end)
    
    makeButton(catTeleport, "Teleport Now", function()
        if selectedEventName and selectedEventName ~= "- No events available -" then
            local ok = EventTeleport.TeleportNow(selectedEventName)
            if ok then
                SendNotification("Teleport", "Teleported ke " .. selectedEventName, 3)
            else
                SendNotification("Teleport", "Teleport gagal!", 3)
            end
        else
            SendNotification("Teleport", "Event belum dipilih!", 3)
        end
    end)
end

-- ============================================
-- SHOP PAGE
-- ============================================

-- Auto Sell Timer Category
local catTimer = makeCategory(shopPage, "Auto Sell Timer", "‚è∞")
local AutoSellTimer = GetModule("AutoSellTimer")

if AutoSellTimer then
    makeInput(catTimer, "Sell Interval (seconds)", GetConfigValue("Shop.AutoSellTimer.Interval", 5), function(value)
        SetConfigValue("Shop.AutoSellTimer.Interval", value)
        SaveCurrentConfig()
        
        if AutoSellTimer then
            pcall(function()
                AutoSellTimer.SetInterval(value)
            end)
        end
    end)

    ToggleReferences.AutoSellTimer = makeToggle(catTimer, "Auto Sell Timer", function(on)
        SetConfigValue("Shop.AutoSellTimer.Enabled", on)
        SaveCurrentConfig()
        
        if AutoSellTimer then
            pcall(function()
                if on then
                    local interval = GetConfigValue("Shop.AutoSellTimer.Interval", 5)
                    AutoSellTimer.Start(interval)
                else
                    AutoSellTimer.Stop()
                end
            end)
        end
    end)
else
    -- Show info if module not available
    local infoLabel = new("TextLabel", {
        Parent = catTimer,
        Size = UDim2.new(1, 0, 0, 30),
        BackgroundTransparency = 1,
        Text = "‚ö†Ô∏è AutoSellTimer module not available",
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.warning,
        TextWrapped = true,
        ZIndex = 8
    })
end

-- Auto Buy Weather Category
local catWeather = makeCategory(shopPage, "Auto Buy Weather", "üå¶Ô∏è")
local AutoBuyWeather = GetModule("AutoBuyWeather")

if AutoBuyWeather then
    local weatherCheckboxSystem = makeCheckboxList(
        catWeather,
        AutoBuyWeather.AllWeathers,
        nil,
        function(selectedWeathers)
            AutoBuyWeather.SetSelected(selectedWeathers)
            SetConfigValue("Shop.AutoBuyWeather.SelectedWeathers", selectedWeathers)
            SaveCurrentConfig()
        end
    )
    
    makeButton(catWeather, "‚úì Select All Weather", function()
        weatherCheckboxSystem.SelectAll()
        SendNotification("Weather", "All weather selected!", 2)
    end)
    
    makeButton(catWeather, "‚úó Clear Selection", function()
        weatherCheckboxSystem.ClearAll()
        SendNotification("Weather", "Selection cleared!", 2)
    end)
    
    ToggleReferences.AutoBuyWeather = makeToggle(catWeather, "Enable Auto Weather", function(on)
        SetConfigValue("Shop.AutoBuyWeather.Enabled", on)
        SaveCurrentConfig()
        
        if on then
            local selected = weatherCheckboxSystem.GetSelected()
            if #selected == 0 then
                SendNotification("Auto Weather", "Pilih minimal 1 cuaca!", 3)
                return
            end
            AutoBuyWeather.Start()
            SendNotification("Auto Weather", "Auto buy weather aktif!", 3)
        else
            AutoBuyWeather.Stop()
            SendNotification("Auto Weather", "Auto buy weather dimatikan.", 3)
        end
    end)
end

-- ============================================
-- WEBHOOK PAGE
-- ============================================

local catWebhook = makeCategory(webhookPage, "Webhook Configuration", "üîó")
local WebhookModule = GetModule("Webhook")
local currentWebhookURL = GetConfigValue("Webhook.URL", "")
local currentDiscordID = GetConfigValue("Webhook.DiscordID", "")

-- Webhook URL Input
local webhookURLFrame = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 60),
    BackgroundTransparency = 1,
    ZIndex = 7
})

local webhookURLLabel = new("TextLabel", {
    Parent = webhookURLFrame,
    Text = "Webhook URL",
    Size = UDim2.new(1, 0, 0, 18),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextXAlignment = Enum.TextXAlignment.Left,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    ZIndex = 8
})

local webhookURLBg = new("Frame", {
    Parent = webhookURLFrame,
    Size = UDim2.new(1, 0, 0, 35),
    Position = UDim2.new(0, 0, 0, 22),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.4,
    BorderSizePixel = 0,
    ZIndex = 8
})
new("UICorner", {Parent = webhookURLBg, CornerRadius = UDim.new(0, 6)})

local webhookURLStroke = new("UIStroke", {
    Parent = webhookURLBg,
    Color = colors.border,
    Thickness = 1,
    Transparency = 0.7
})

local webhookTextBox = new("TextBox", {
    Parent = webhookURLBg,
    Size = UDim2.new(1, -12, 1, 0),
    Position = UDim2.new(0, 6, 0, 0),
    BackgroundTransparency = 1,
    Text = currentWebhookURL,
    PlaceholderText = "https://discord.com/api/webhooks/...",
    Font = Enum.Font.Gotham,
    TextSize = 8,
    TextColor3 = colors.text,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 9
})

webhookTextBox.Focused:Connect(function()
    TweenService:Create(webhookURLStroke, TweenInfo.new(0.2), {
        Color = colors.primary,
        Thickness = 1.5,
        Transparency = 0.3
    }):Play()
end)

webhookTextBox.FocusLost:Connect(function()
    TweenService:Create(webhookURLStroke, TweenInfo.new(0.2), {
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    }):Play()
    
    currentWebhookURL = webhookTextBox.Text
    SetConfigValue("Webhook.URL", currentWebhookURL)
    SaveCurrentConfig()
    
    if WebhookModule and currentWebhookURL ~= "" then
        pcall(function()
            WebhookModule:SetWebhookURL(currentWebhookURL)
        end)
        SendNotification("Webhook", "Webhook URL tersimpan!", 2)
    end
end)

-- Discord ID Input
local discordIDFrame = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 60),
    BackgroundTransparency = 1,
    ZIndex = 7
})

local discordIDLabel = new("TextLabel", {
    Parent = discordIDFrame,
    Text = "Discord User ID (Optional)",
    Size = UDim2.new(1, 0, 0, 18),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextXAlignment = Enum.TextXAlignment.Left,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    ZIndex = 8
})

local discordIDBg = new("Frame", {
    Parent = discordIDFrame,
    Size = UDim2.new(1, 0, 0, 35),
    Position = UDim2.new(0, 0, 0, 22),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.4,
    BorderSizePixel = 0,
    ZIndex = 8
})
new("UICorner", {Parent = discordIDBg, CornerRadius = UDim.new(0, 6)})

local discordIDStroke = new("UIStroke", {
    Parent = discordIDBg,
    Color = colors.border,
    Thickness = 1,
    Transparency = 0.7
})

local discordIDTextBox = new("TextBox", {
    Parent = discordIDBg,
    Size = UDim2.new(1, -12, 1, 0),
    Position = UDim2.new(0, 6, 0, 0),
    BackgroundTransparency = 1,
    Text = currentDiscordID,
    PlaceholderText = "123456789012345678",
    Font = Enum.Font.Gotham,
    TextSize = 8,
    TextColor3 = colors.text,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 9
})

discordIDTextBox.Focused:Connect(function()
    TweenService:Create(discordIDStroke, TweenInfo.new(0.2), {
        Color = colors.primary,
        Thickness = 1.5,
        Transparency = 0.3
    }):Play()
end)

discordIDTextBox.FocusLost:Connect(function()
    TweenService:Create(discordIDStroke, TweenInfo.new(0.2), {
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    }):Play()
    
    currentDiscordID = discordIDTextBox.Text
    SetConfigValue("Webhook.DiscordID", currentDiscordID)
    SaveCurrentConfig()
    
    if WebhookModule then
        pcall(function()
            WebhookModule:SetDiscordUserID(currentDiscordID)
        end)
        if currentDiscordID ~= "" then
            SendNotification("Webhook", "Discord ID tersimpan!", 2)
        end
    end
end)

-- Rarity Filter
local AllRarities = {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythical", "Exotic", "Limited"}
local rarityColors = {
    Common = Color3.fromRGB(150, 150, 150),
    Uncommon = Color3.fromRGB(76, 175, 80),
    Rare = Color3.fromRGB(33, 150, 243),
    Epic = Color3.fromRGB(156, 39, 176),
    Legendary = Color3.fromRGB(255, 152, 0),
    Mythical = Color3.fromRGB(233, 30, 99),
    Exotic = Color3.fromRGB(255, 87, 34),
    Limited = Color3.fromRGB(255, 215, 0)
}

local rarityCheckboxSystem = makeCheckboxList(
    catWebhook,
    AllRarities,
    rarityColors,
    function(selectedRarities)
        if WebhookModule then
            pcall(function()
                WebhookModule:SetEnabledRarities(selectedRarities)
            end)
        end
        SetConfigValue("Webhook.EnabledRarities", selectedRarities)
        SaveCurrentConfig()
    end
)

makeButton(catWebhook, "‚úì Select All Rarities", function()
    rarityCheckboxSystem.SelectAll()
    SendNotification("Webhook", "All rarities selected!", 2)
end)

makeButton(catWebhook, "‚úó Clear Selection", function()
    rarityCheckboxSystem.ClearAll()
    SendNotification("Webhook", "Selection cleared!", 2)
end)

ToggleReferences.Webhook = makeToggle(catWebhook, "Enable Webhook", function(on)
    SetConfigValue("Webhook.Enabled", on)
    SaveCurrentConfig()
    
    if not WebhookModule then
        SendNotification("Error", "Webhook module tidak tersedia!", 3)
        return
    end
    
    if on then
        if currentWebhookURL == "" then
            SendNotification("Error", "Masukkan Webhook URL dulu!", 3)
            return
        end
        
        pcall(function()
            WebhookModule:SetWebhookURL(currentWebhookURL)
            if currentDiscordID ~= "" then
                WebhookModule:SetDiscordUserID(currentDiscordID)
            end
            local selected = rarityCheckboxSystem.GetSelected()
            WebhookModule:SetEnabledRarities(selected)
            WebhookModule:Start()
        end)
        
        local selected = rarityCheckboxSystem.GetSelected()
        local filterInfo = #selected > 0 
            and (" (Filter: " .. table.concat(selected, ", ") .. ")")
            or " (All rarities)"
        SendNotification("Webhook", "Webhook logging aktif!" .. filterInfo, 4)
    else
        pcall(function()
            WebhookModule:Stop()
        end)
        SendNotification("Webhook", "Webhook logging dinonaktifkan.", 3)
    end
end)

-- ============================================
-- PART 7/8: CAMERA VIEW, SETTINGS & INFO PAGES
-- ============================================

-- CAMERA VIEW PAGE
local catZoom = makeCategory(cameraViewPage, "Unlimited Zoom", "üîç")
local UnlimitedZoomModule = GetModule("UnlimitedZoomModule")

ToggleReferences.UnlimitedZoom = makeToggle(catZoom, "Enable Unlimited Zoom", function(on)
    SetConfigValue("CameraView.UnlimitedZoom", on)
    SaveCurrentConfig()
    
    if UnlimitedZoomModule then
        if on then
            local success = UnlimitedZoomModule.Enable()
            if success then
                SendNotification("Zoom", "Unlimited Zoom aktif!", 4)
            end
        else
            UnlimitedZoomModule.Disable()
            SendNotification("Zoom", "Unlimited Zoom nonaktif.", 3)
        end
    end
end)

local catFreecam = makeCategory(cameraViewPage, "Freecam", "üìπ")
local FreecamModule = GetModule("FreecamModule")

ToggleReferences.Freecam = makeToggle(catFreecam, "Enable Freecam", function(on)
    SetConfigValue("CameraView.Freecam.Enabled", on)
    SaveCurrentConfig()
    
    if FreecamModule then
        if on then
            if not isMobile then
                FreecamModule.EnableF3Keybind(true)
                SendNotification("Freecam", "Freecam siap! Tekan F3.", 4)
            else
                FreecamModule.Start()
                SendNotification("Freecam", "Freecam aktif!", 4)
            end
        else
            FreecamModule.EnableF3Keybind(false)
            SendNotification("Freecam", "Freecam nonaktif.", 3)
        end
    end
end)

makeInput(catFreecam, "Movement Speed", GetConfigValue("CameraView.Freecam.Speed", 50), function(value)
    SetConfigValue("CameraView.Freecam.Speed", value)
    SaveCurrentConfig()
    
    if FreecamModule then
        FreecamModule.SetSpeed(value)
    end
end)

makeInput(catFreecam, "Mouse Sensitivity", GetConfigValue("CameraView.Freecam.Sensitivity", 0.3), function(value)
    SetConfigValue("CameraView.Freecam.Sensitivity", value)
    SaveCurrentConfig()
    
    if FreecamModule then
        FreecamModule.SetSensitivity(value)
    end
end)

-- ============================================
-- SETTINGS PAGE
-- ============================================

local catAFK = makeCategory(settingsPage, "Anti-AFK", "‚è±Ô∏è")
local AntiAFK = GetModule("AntiAFK")

ToggleReferences.AntiAFK = makeToggle(catAFK, "Enable Anti-AFK", function(on)
    SetConfigValue("Settings.AntiAFK", on)
    SaveCurrentConfig()
    
    if AntiAFK then
        if on then AntiAFK.Start() else AntiAFK.Stop() end
    end
end)

local catBoost = makeCategory(settingsPage, "Performance", "‚ö°")
local FPSBooster = GetModule("FPSBooster")
local DisableRenderingModule = GetModule("DisableRendering")

ToggleReferences.FPSBooster = makeToggle(catBoost, "Enable FPS Booster", function(on)
    SetConfigValue("Settings.FPSBooster", on)
    SaveCurrentConfig()
    
    if FPSBooster then
        if on then
            FPSBooster.Enable()
            SendNotification("FPS Booster", "FPS Booster diaktifkan!", 3)
        else
            FPSBooster.Disable()
            SendNotification("FPS Booster", "FPS Booster dimatikan.", 3)
        end
    end
end)

ToggleReferences.DisableRendering = makeToggle(catBoost, "Disable 3D Rendering", function(on)
    SetConfigValue("Settings.DisableRendering", on)
    SaveCurrentConfig()
    
    if DisableRenderingModule then
        if on then
            DisableRenderingModule.Start()
        else
            DisableRenderingModule.Stop()
        end
    end
end)

local catFPS = makeCategory(settingsPage, "FPS Settings", "üéÆ")
local UnlockFPS = GetModule("UnlockFPS")

makeDropdown(catFPS, "Select FPS Limit", "‚öôÔ∏è", {"60 FPS", "90 FPS", "120 FPS", "240 FPS"}, function(selected)
    local fpsValue = tonumber(selected:match("%d+"))
    SetConfigValue("Settings.FPSLimit", fpsValue)
    SaveCurrentConfig()
    
    if fpsValue and UnlockFPS then
        UnlockFPS.SetCap(fpsValue)
    end
end, "FPSDropdown")

-- Hide Stats Category
local catHideStats = makeCategory(settingsPage, "Hide Stats", "üë§")
local HideStats = GetModule("HideStats")
local currentFakeName = GetConfigValue("Settings.HideStats.FakeName", "Guest")
local currentFakeLevel = GetConfigValue("Settings.HideStats.FakeLevel", "1")

-- Fake Name Input
local fakeNameFrame = new("Frame", {
    Parent = catHideStats,
    Size = UDim2.new(1, 0, 0, 60),
    BackgroundTransparency = 1,
    ZIndex = 7
})

local fakeNameLabel = new("TextLabel", {
    Parent = fakeNameFrame,
    Text = "Fake Name",
    Size = UDim2.new(1, 0, 0, 18),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextXAlignment = Enum.TextXAlignment.Left,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    ZIndex = 8
})

local fakeNameBg = new("Frame", {
    Parent = fakeNameFrame,
    Size = UDim2.new(1, 0, 0, 35),
    Position = UDim2.new(0, 0, 0, 22),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.4,
    BorderSizePixel = 0,
    ZIndex = 8
})
new("UICorner", {Parent = fakeNameBg, CornerRadius = UDim.new(0, 6)})

local fakeNameStroke = new("UIStroke", {
    Parent = fakeNameBg,
    Color = colors.border,
    Thickness = 1,
    Transparency = 0.7
})

local fakeNameTextBox = new("TextBox", {
    Parent = fakeNameBg,
    Size = UDim2.new(1, -12, 1, 0),
    Position = UDim2.new(0, 6, 0, 0),
    BackgroundTransparency = 1,
    Text = currentFakeName,
    PlaceholderText = "Guest",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 9
})

fakeNameTextBox.Focused:Connect(function()
    TweenService:Create(fakeNameStroke, TweenInfo.new(0.2), {
        Color = colors.primary,
        Thickness = 1.5,
        Transparency = 0.3
    }):Play()
end)

fakeNameTextBox.FocusLost:Connect(function()
    TweenService:Create(fakeNameStroke, TweenInfo.new(0.2), {
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    }):Play()
    
    local value = fakeNameTextBox.Text
    if value and value ~= "" then
        currentFakeName = value
        SetConfigValue("Settings.HideStats.FakeName", value)
        SaveCurrentConfig()
        
        if HideStats then
            pcall(function()
                HideStats.SetFakeName(value)
            end)
            SendNotification("Hide Stats", "Fake name set: " .. value, 2)
        end
    end
end)

-- Fake Level Input
local fakeLevelFrame = new("Frame", {
    Parent = catHideStats,
    Size = UDim2.new(1, 0, 0, 60),
    BackgroundTransparency = 1,
    ZIndex = 7
})

local fakeLevelLabel = new("TextLabel", {
    Parent = fakeLevelFrame,
    Text = "Fake Level",
    Size = UDim2.new(1, 0, 0, 18),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextXAlignment = Enum.TextXAlignment.Left,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    ZIndex = 8
})

local fakeLevelBg = new("Frame", {
    Parent = fakeLevelFrame,
    Size = UDim2.new(1, 0, 0, 35),
    Position = UDim2.new(0, 0, 0, 22),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.4,
    BorderSizePixel = 0,
    ZIndex = 8
})
new("UICorner", {Parent = fakeLevelBg, CornerRadius = UDim.new(0, 6)})

local fakeLevelStroke = new("UIStroke", {
    Parent = fakeLevelBg,
    Color = colors.border,
    Thickness = 1,
    Transparency = 0.7
})

local fakeLevelTextBox = new("TextBox", {
    Parent = fakeLevelBg,
    Size = UDim2.new(1, -12, 1, 0),
    Position = UDim2.new(0, 6, 0, 0),
    BackgroundTransparency = 1,
    Text = currentFakeLevel,
    PlaceholderText = "1",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 9
})

fakeLevelTextBox.Focused:Connect(function()
    TweenService:Create(fakeLevelStroke, TweenInfo.new(0.2), {
        Color = colors.primary,
        Thickness = 1.5,
        Transparency = 0.3
    }):Play()
end)

fakeLevelTextBox.FocusLost:Connect(function()
    TweenService:Create(fakeLevelStroke, TweenInfo.new(0.2), {
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    }):Play()
    
    local value = fakeLevelTextBox.Text
    if value and value ~= "" then
        currentFakeLevel = value
        SetConfigValue("Settings.HideStats.FakeLevel", value)
        SaveCurrentConfig()
        
        if HideStats then
            pcall(function()
                HideStats.SetFakeLevel(value)
            end)
            SendNotification("Hide Stats", "Fake level set: " .. value, 2)
        end
    end
end)

ToggleReferences.HideStats = makeToggle(catHideStats, "‚ö° Enable Hide Stats", function(on)
    SetConfigValue("Settings.HideStats.Enabled", on)
    SaveCurrentConfig()
    
    if not HideStats then
        SendNotification("Error", "Hide Stats module tidak tersedia!", 3)
        return
    end
    
    if on then
        pcall(function()
            if currentFakeName ~= "" and currentFakeName ~= "Guest" then
                HideStats.SetFakeName(currentFakeName)
            end
            
            if currentFakeLevel ~= "" and currentFakeLevel ~= "1" then
                HideStats.SetFakeLevel(currentFakeLevel)
            end
            
            HideStats.Enable()
        end)
        
        SendNotification("Hide Stats", "‚úì Hide Stats aktif!\nName: " .. currentFakeName .. " | Level: " .. currentFakeLevel, 4)
    else
        pcall(function()
            HideStats.Disable()
        end)
        
        SendNotification("Hide Stats", "‚úì Hide Stats dimatikan!", 3)
    end
end)

-- Config Management Category
local catConfig = makeCategory(settingsPage, "Configuration Management", "üíæ")

local configStatusContainer = new("Frame", {
    Parent = catConfig,
    Size = UDim2.new(1, 0, 0, 85),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = configStatusContainer, CornerRadius = UDim.new(0, 8)})

local configStatusText = new("TextLabel", {
    Parent = configStatusContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "Loading config status...",
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

makeButton(catConfig, "üíæ Save Current Config", function()
    if ConfigSystem then
        local success, message = ConfigSystem.Save()
        if success then
            SendNotification("Config", "‚úì Configuration saved!", 3)
        else
            SendNotification("Config Error", message or "Failed to save", 3)
        end
    else
        SendNotification("Error", "ConfigSystem not loaded!", 3)
    end
end)

makeButton(catConfig, "üîÑ Reload Config", function()
    if ConfigSystem then
        local success = ConfigSystem.Load()
        if success then
            SendNotification("Config", "‚úì Configuration reloaded!", 3)
        else
            SendNotification("Config", "‚ö† No saved config found", 3)
        end
    else
        SendNotification("Error", "ConfigSystem not loaded!", 3)
    end
end)

makeButton(catConfig, "üîÉ Reset to Default", function()
    if ConfigSystem then
        local success, message = ConfigSystem.Reset()
        if success then
            SendNotification("Config", "‚úì Reset to defaults!", 3)
        else
            SendNotification("Error", message or "Failed to reset", 3)
        end
    else
        SendNotification("Error", "ConfigSystem not loaded!", 3)
    end
end)

makeButton(catConfig, "üóëÔ∏è Delete Config File", function()
    if ConfigSystem then
        if ConfigSystem.Delete() then
            SendNotification("Config", "‚úì Config file deleted!", 3)
        else
            SendNotification("Config", "‚ö† No config file found", 3)
        end
    else
        SendNotification("Error", "ConfigSystem not loaded!", 3)
    end
end)

-- Update config status text
task.spawn(function()
    task.wait(1)
    pcall(function()
        if ConfigSystem and configStatusText and configStatusText.Parent then
            local hasConfigFile = false
            pcall(function()
                hasConfigFile = isfile("LynxGUI_Configs/lynx_config.json")
            end)
            
            local statusIcon = hasConfigFile and "‚úÖ" or "‚ö†Ô∏è"
            local statusMsg = hasConfigFile and "Config file exists" or "No config saved yet"
            
            configStatusText.Text = string.format(
                "üì¶ CONFIG STATUS\n%s %s\n\nüí° Settings auto-save on change!\nüìÅ Folder: LynxGUI_Configs\nüìÑ File: lynx_config.json",
                statusIcon, statusMsg
            )
        end
    end)
end)

-- ============================================
-- INFO PAGE
-- ============================================

local infoContainer = new("Frame", {
    Parent = infoPage,
    Size = UDim2.new(1, 0, 0, 200),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = infoContainer, CornerRadius = UDim.new(0, 8)})

local infoText = new("TextLabel", {
    Parent = infoContainer,
    Size = UDim2.new(1, -24, 0, 100),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "# LynX v2.3 Improved\nFree Not For Sale\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nCreated by Beee\nRefined Edition 2024",
    Font = Enum.Font.Gotham,
    TextSize = 10,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 7
})

local linkButton = new("TextButton", {
    Parent = infoContainer,
    Size = UDim2.new(1, -24, 0, 25),
    Position = UDim2.new(0, 12, 0, 115),
    BackgroundTransparency = 1,
    Text = "üîó Discord: https://discord.gg/6Rpvm2gQ",
    Font = Enum.Font.GothamBold,
    TextSize = 10,
    TextColor3 = Color3.fromRGB(88, 101, 242),
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 7
})

linkButton.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/6Rpvm2gQ")
    linkButton.Text = "‚úÖ Link copied to clipboard!"
    task.wait(2)
    linkButton.Text = "üîó Discord: https://discord.gg/6Rpvm2gQ"
end)

-- Module Status Display
local moduleStatusContainer = new("Frame", {
    Parent = infoPage,
    Size = UDim2.new(1, 0, 0, 150),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = moduleStatusContainer, CornerRadius = UDim.new(0, 8)})

local moduleStatusText = new("TextLabel", {
    Parent = moduleStatusContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "Loading module status...",
    Font = Enum.Font.Gotham,
    TextSize = 8,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 7
})

task.spawn(function()
    task.wait(0.5)
    pcall(function()
        if moduleStatusText and moduleStatusText.Parent then
            local statusText = "üì¶ MODULE STATUS (" .. loadedModules .. "/" .. totalModules .. " loaded)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            
            local sortedModules = {}
            for name, status in pairs(ModuleStatus) do
                table.insert(sortedModules, {name = name, status = status})
            end
            table.sort(sortedModules, function(a, b) return a.name < b.name end)
            
            for _, moduleInfo in ipairs(sortedModules) do
                statusText = statusText .. moduleInfo.status .. " " .. moduleInfo.name .. "\n"
            end
            
            moduleStatusText.Text = statusText
        end
    end)
end)

-- ============================================
-- PART 8/8: INTERACTIONS, ANIMATIONS & FINAL SETUP
-- ============================================

-- MINIMIZE SYSTEM
local minimized = false
local icon
local savedIconPos = UDim2.new(0, 20, 0, 100)

local function createMinimizedIcon()
    if icon then return end
    
    icon = new("ImageLabel", {
        Parent = gui,
        Size = UDim2.new(0, 50, 0, 50),
        Position = savedIconPos,
        BackgroundColor3 = colors.bg2,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        Image = "rbxassetid://91891350821146",
        ScaleType = Enum.ScaleType.Fit,
        ZIndex = 100
    })
    new("UICorner", {Parent = icon, CornerRadius = UDim.new(0, 10)})
    
    local dragging, dragStart, startPos, dragMoved = false, nil, nil, false
    
    icon.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging, dragMoved, dragStart, startPos = true, false, input.Position, icon.Position
        end
    end)
    
    icon.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            if math.sqrt(delta.X^2 + delta.Y^2) > 5 then dragMoved = true end
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            icon.Position = newPos
        end
    end)
    
    icon.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            if dragging then
                dragging = false
                savedIconPos = icon.Position
                if not dragMoved then
                    bringToFront()
                    win.Visible = true
                    TweenService:Create(win, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                        Size = windowSize,
                        Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2)
                    }):Play()
                    if icon then icon:Destroy() icon = nil end
                    minimized = false
                end
            end
        end
    end)
end

btnMinHeader.MouseButton1Click:Connect(function()
    if not minimized then
        TweenService:Create(win, TweenInfo.new(0.35, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }):Play()
        task.wait(0.35)
        win.Visible = false
        createMinimizedIcon()
        minimized = true
    end
end)

-- ============================================
-- DRAGGING SYSTEM
-- ============================================
local dragging, dragStart, startPos = false, nil, nil

scriptHeader.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        bringToFront()
        dragging, dragStart, startPos = true, input.Position, win.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        win.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- ============================================
-- RESIZING SYSTEM
-- ============================================
local resizeStart, startSize = nil, nil

resizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        resizing, resizeStart, startSize = true, input.Position, win.Size
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if resizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - resizeStart
        local newWidth = math.clamp(startSize.X.Offset + delta.X, minWindowSize.X, maxWindowSize.X)
        local newHeight = math.clamp(startSize.Y.Offset + delta.Y, minWindowSize.Y, maxWindowSize.Y)
        win.Size = UDim2.new(0, newWidth, 0, newHeight)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        resizing = false
    end
end)

-- ============================================
-- OPENING ANIMATION
-- ============================================
task.spawn(function()
    win.Size = UDim2.new(0, 0, 0, 0)
    win.Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2)
    win.BackgroundTransparency = 1
    
    task.wait(0.1)
    
    TweenService:Create(win, TweenInfo.new(0.7, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out), {
        Size = windowSize
    }):Play()
    
    TweenService:Create(win, TweenInfo.new(0.5), {
        BackgroundTransparency = 0.25
    }):Play()
end)

-- ============================================
-- APPLY LOADED CONFIG ON STARTUP
-- ============================================
local function ApplyLoadedConfig()
    if not ConfigSystem then return end
    
    print("üîß [GUI] Applying loaded configuration...")
    
    -- RESTORE ALL TOGGLE VISUAL STATES (silent = true untuk tidak trigger callback)
    task.spawn(function()
        task.wait(0.5) -- Wait for GUI to be ready
        
        -- Main Page - Auto Fishing
        if ToggleReferences.InstantFishing then
            local enabled = GetConfigValue("InstantFishing.Enabled", false)
            ToggleReferences.InstantFishing.setOn(enabled, true)
            isInstantFishingEnabled = enabled
        end
        
        -- Blatant Modes
        if ToggleReferences.BlatantTester then
            ToggleReferences.BlatantTester.setOn(GetConfigValue("BlatantTester.Enabled", false), true)
        end
        if ToggleReferences.BlatantV1 then
            ToggleReferences.BlatantV1.setOn(GetConfigValue("BlatantV1.Enabled", false), true)
        end
        if ToggleReferences.UltraBlatant then
            ToggleReferences.UltraBlatant.setOn(GetConfigValue("UltraBlatant.Enabled", false), true)
        end
        if ToggleReferences.FastAutoPerfect then
            ToggleReferences.FastAutoPerfect.setOn(GetConfigValue("FastAutoPerfect.Enabled", false), true)
        end
        
        -- Support Features
        if ToggleReferences.NoFishingAnimation then
            ToggleReferences.NoFishingAnimation.setOn(GetConfigValue("Support.NoFishingAnimation", false), true)
        end
        if ToggleReferences.LockPosition then
            ToggleReferences.LockPosition.setOn(GetConfigValue("Support.LockPosition", false), true)
        end
        if ToggleReferences.AutoEquipRod then
            ToggleReferences.AutoEquipRod.setOn(GetConfigValue("Support.AutoEquipRod", false), true)
        end
        if ToggleReferences.DisableCutscenes then
            ToggleReferences.DisableCutscenes.setOn(GetConfigValue("Support.DisableCutscenes", false), true)
        end
        if ToggleReferences.DisableObtainedNotif then
            ToggleReferences.DisableObtainedNotif.setOn(GetConfigValue("Support.DisableObtainedNotif", false), true)
        end
        if ToggleReferences.DisableSkinEffect then
            ToggleReferences.DisableSkinEffect.setOn(GetConfigValue("Support.DisableSkinEffect", false), true)
        end
        if ToggleReferences.WalkOnWater then
            ToggleReferences.WalkOnWater.setOn(GetConfigValue("Support.WalkOnWater", false), true)
        end
        if ToggleReferences.GoodPerfectionStable then
            ToggleReferences.GoodPerfectionStable.setOn(GetConfigValue("Support.GoodPerfectionStable", false), true)
        end
        
        -- Teleport
        if ToggleReferences.AutoTeleportEvent then
            ToggleReferences.AutoTeleportEvent.setOn(GetConfigValue("Teleport.AutoTeleportEvent", false), true)
        end
        
        -- Shop
        if ToggleReferences.AutoSellTimer then
            ToggleReferences.AutoSellTimer.setOn(GetConfigValue("Shop.AutoSellTimer.Enabled", false), true)
        end
        if ToggleReferences.AutoBuyWeather then
            ToggleReferences.AutoBuyWeather.setOn(GetConfigValue("Shop.AutoBuyWeather.Enabled", false), true)
        end
        
        -- Webhook
        if ToggleReferences.Webhook then
            ToggleReferences.Webhook.setOn(GetConfigValue("Webhook.Enabled", false), true)
        end
        
        -- Camera View
        if ToggleReferences.UnlimitedZoom then
            ToggleReferences.UnlimitedZoom.setOn(GetConfigValue("CameraView.UnlimitedZoom", false), true)
        end
        if ToggleReferences.Freecam then
            ToggleReferences.Freecam.setOn(GetConfigValue("CameraView.Freecam.Enabled", false), true)
        end
        
        -- Settings
        if ToggleReferences.AntiAFK then
            ToggleReferences.AntiAFK.setOn(GetConfigValue("Settings.AntiAFK", false), true)
        end
        if ToggleReferences.FPSBooster then
            ToggleReferences.FPSBooster.setOn(GetConfigValue("Settings.FPSBooster", false), true)
        end
        if ToggleReferences.DisableRendering then
            ToggleReferences.DisableRendering.setOn(GetConfigValue("Settings.DisableRendering", false), true)
        end
        if ToggleReferences.HideStats then
            ToggleReferences.HideStats.setOn(GetConfigValue("Settings.HideStats.Enabled", false), true)
        end
        
        print("‚úÖ [GUI] All toggle states restored!")
    end)
    
    -- START MODULES BASED ON CONFIG (after 1 second delay)
    task.spawn(function()
        task.wait(1)
        
        -- Auto Fishing
        if GetConfigValue("InstantFishing.Enabled", false) then
            local instant = GetModule("instant")
            local instant2 = GetModule("instant2")
            if currentInstantMode == "Fast" and instant then
                instant.Settings.MaxWaitTime = fishingDelayValue
                instant.Settings.CancelDelay = cancelDelayValue
                instant.Start()
            elseif currentInstantMode == "Perfect" and instant2 then
                instant2.Settings.MaxWaitTime = fishingDelayValue
                instant2.Settings.CancelDelay = cancelDelayValue
                instant2.Start()
            end
        end
        
        -- Support Features
        if GetConfigValue("Support.NoFishingAnimation", false) then
            local NoFishingAnimation = GetModule("NoFishingAnimation")
            if NoFishingAnimation then NoFishingAnimation.StartWithDelay() end
        end
        
        if GetConfigValue("Support.LockPosition", false) then
            local LockPosition = GetModule("LockPosition")
            if LockPosition then LockPosition.Start() end
        end
        
        if GetConfigValue("Support.AutoEquipRod", false) then
            local AutoEquipRod = GetModule("AutoEquipRod")
            if AutoEquipRod then AutoEquipRod.Start() end
        end
        
        -- Shop Auto Sell Timer
        if GetConfigValue("Shop.AutoSellTimer.Enabled", false) and AutoSellTimer then
            local interval = GetConfigValue("Shop.AutoSellTimer.Interval", 5)
            pcall(function()
                AutoSellTimer.SetInterval(interval)
                AutoSellTimer.Start(interval)
            end)
        end
        
        -- Settings
        if GetConfigValue("Settings.AntiAFK", false) and AntiAFK then
            AntiAFK.Start()
        end
        
        if GetConfigValue("Settings.FPSBooster", false) and FPSBooster then
            FPSBooster.Enable()
        end
        
        if GetConfigValue("Settings.DisableRendering", false) and DisableRenderingModule then
            DisableRenderingModule.Start()
        end
        
        if GetConfigValue("CameraView.UnlimitedZoom", false) and UnlimitedZoomModule then
            UnlimitedZoomModule.Enable()
        end
        
        -- Webhook
        if WebhookModule and GetConfigValue("Webhook.Enabled", false) then
            local savedURL = GetConfigValue("Webhook.URL", "")
            local savedID = GetConfigValue("Webhook.DiscordID", "")
            local savedRarities = GetConfigValue("Webhook.EnabledRarities", {})
            
            if savedURL ~= "" then
                pcall(function()
                    WebhookModule:SetWebhookURL(savedURL)
                    if savedID ~= "" then
                        WebhookModule:SetDiscordUserID(savedID)
                    end
                    if #savedRarities > 0 and rarityCheckboxSystem then
                        rarityCheckboxSystem.SelectSpecific(savedRarities)
                        WebhookModule:SetEnabledRarities(savedRarities)
                    end
                    WebhookModule:Start()
                end)
            end
        end
        
        -- HideStats
        if HideStats and GetConfigValue("Settings.HideStats.Enabled", false) then
            local savedName = GetConfigValue("Settings.HideStats.FakeName", "Guest")
            local savedLevel = GetConfigValue("Settings.HideStats.FakeLevel", "1")
            
            pcall(function()
                HideStats.SetFakeName(savedName)
                HideStats.SetFakeLevel(savedLevel)
                HideStats.Enable()
            end)
        end
        
        print("‚úÖ [GUI] All modules started from config!")
    end)
    
    print("‚úÖ [GUI] Configuration applied successfully!")
end

-- Apply config after GUI loads
task.spawn(function()
    task.wait(1.5)
    pcall(function()
        ApplyLoadedConfig()
    end)
end)

-- ============================================
-- FINAL SUCCESS MESSAGE
-- ============================================
print("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("‚ú® Lynx GUI v2.3 IMPROVED")
print("FREE NOT FOR SALE")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("üíé Created by Lynx Team")
print("üì¶ Modules: " .. loadedModules .. "/" .. totalModules .. " loaded")

local hideStatsOK = (HideStats ~= nil)
local webhookOK = (WebhookModule ~= nil)
local notifyOK = (GetModule("Notify") ~= nil)

print("‚úÖ HideStats: " .. (hideStatsOK and "VERIFIED ‚úì" or "NOT LOADED ‚úó"))
print("‚úÖ Webhook: " .. (webhookOK and "VERIFIED ‚úì" or "NOT LOADED ‚úó"))
print("‚úÖ Notify: " .. (notifyOK and "VERIFIED ‚úì" or "NOT LOADED ‚úó"))

if hideStatsOK and webhookOK and notifyOK then
    print("üéâ All critical systems operational!")
else
    print("‚ö†Ô∏è  Some critical modules missing - check features")
end

print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("‚ú® IMPROVEMENTS v2.3:")
print("   ‚Ä¢ iOS-style loading notification")
print("   ‚Ä¢ Anti-duplication system")
print("   ‚Ä¢ Reusable components (Category, Toggle, Input, Button)")
print("   ‚Ä¢ Dropdown & Checkbox systems")
print("   ‚Ä¢ Config auto-save for all settings")
print("   ‚Ä¢ Improved error handling")
print("   ‚Ä¢ Clean code structure")
print("   ‚Ä¢ Webhook page with rarity filters")
print("   ‚Ä¢ Hide Stats with custom name/level")
print("   ‚Ä¢ Better module loading with retry")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

if ConfigSystem then
    print("üíæ [ConfigSystem] Integration complete!")
    print("üìù [ConfigSystem] Auto-save enabled for all settings")
end

print("\nüéÆ GUI ready to use!")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n")

-- Send success notification
SendNotification("‚ú® Lynx GUI v2.3", "Loaded successfully! " .. loadedModules .. "/" .. totalModules .. " modules ready.", 5)

-- ============================================
-- üéâ SCRIPT COMPLETE - ALL 8 PARTS DONE!
-- ============================================
-- 
-- ‚úÖ Part 1: Core Setup & Module Loading
-- ‚úÖ Part 2: Color Palette & GUI Structure  
-- ‚úÖ Part 3: Pages & Navigation System
-- ‚úÖ Part 4: Dropdown & Checkbox Components
-- ‚úÖ Part 5: Config System & Main Page Features
-- ‚úÖ Part 6: Teleport, Shop & Webhook Pages
-- ‚úÖ Part 7: Camera View, Settings & Info Pages
-- ‚úÖ Part 8: Interactions, Animations & Final Setup
--
-- üöÄ LYNX GUI v2.3 IMPROVED - READY TO USE!
-- ============================================

============================================================
-- File 11: ./Project_code/Misc/FpsBooster.lua
============================================================

-- ==============================================================
--                ‚≠ê FPS BOOSTER MODULE (OPTIMIZED) ‚≠ê
--                    Ready untuk GUI Integration
-- ==============================================================

local FPSBooster = {}
FPSBooster.Enabled = false

local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Terrain = workspace:FindFirstChildOfClass("Terrain")

-- Storage untuk restore
local originalStates = {
    reflectance = {},
    transparency = {},
    lighting = {},
    effects = {},
    waterProperties = {}
}

-- Connection untuk new objects
local newObjectConnection = nil

-- Fungsi untuk optimize single object
local function optimizeObject(obj)
    if not FPSBooster.Enabled then return end
    
    pcall(function()
        -- Optimize BasePart (Bangunan, model, dll)
        if obj:IsA("BasePart") then
            -- Simpan original states (JANGAN UBAH WARNA & MATERIAL)
            if not originalStates.reflectance[obj] then
                originalStates.reflectance[obj] = obj.Reflectance
            end
            
            -- Hapus reflections & shadows saja
            obj.Reflectance = 0
            obj.CastShadow = false
        end
        
        -- Matikan Decals & Textures
        if obj:IsA("Decal") or obj:IsA("Texture") then
            if not originalStates.transparency[obj] then
                originalStates.transparency[obj] = obj.Transparency
            end
            obj.Transparency = 1 -- Invisible
        end
        
        -- Matikan SurfaceAppearance (texture PBR)
        if obj:IsA("SurfaceAppearance") then
            obj:Destroy()
        end
        
        -- Matikan ParticleEmitter (debu, asap, dll)
        if obj:IsA("ParticleEmitter") then
            obj.Enabled = false
        end
        
        -- Matikan Trail effects
        if obj:IsA("Trail") then
            obj.Enabled = false
        end
        
        -- Matikan Beam effects
        if obj:IsA("Beam") then
            obj.Enabled = false
        end
        
        -- Matikan Fire, Smoke, Sparkles
        if obj:IsA("Fire") or obj:IsA("Smoke") or obj:IsA("Sparkles") then
            obj.Enabled = false
        end
    end)
end

-- Fungsi untuk restore single object
local function restoreObject(obj)
    pcall(function()
        if obj:IsA("BasePart") then
            if originalStates.reflectance[obj] then
                obj.Reflectance = originalStates.reflectance[obj]
                obj.CastShadow = true
            end
        end
        
        if obj:IsA("Decal") or obj:IsA("Texture") then
            if originalStates.transparency[obj] then
                obj.Transparency = originalStates.transparency[obj]
            end
        end
        
        if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") then
            obj.Enabled = true
        end
        
        if obj:IsA("Fire") or obj:IsA("Smoke") or obj:IsA("Sparkles") then
            obj.Enabled = true
        end
    end)
end

-- ============================================
-- MAIN ENABLE FUNCTION
-- ============================================
function FPSBooster.Enable()
    if FPSBooster.Enabled then
        return false, "Already enabled"
    end
    
    FPSBooster.Enabled = true
    
    -----------------------------------------
    -- 1. Optimize semua existing objects
    -----------------------------------------
    for _, obj in ipairs(workspace:GetDescendants()) do
        optimizeObject(obj)
    end
    
    -----------------------------------------
    -- 2. MATIKAN ANIMASI AIR (Terrain Water)
    -----------------------------------------
    if Terrain then
        pcall(function()
            -- Simpan water properties
            originalStates.waterProperties = {
                WaterReflectance = Terrain.WaterReflectance,
                WaterWaveSize = Terrain.WaterWaveSize,
                WaterWaveSpeed = Terrain.WaterWaveSpeed
            }
            
            -- Matikan animasi air (WARNA TETAP DEFAULT)
            Terrain.WaterWaveSize = 0 -- NO WAVES
            Terrain.WaterWaveSpeed = 0 -- NO ANIMATION
            Terrain.WaterReflectance = 0 -- NO REFLECTION
        end)
    end
    
    -----------------------------------------
    -- 3. Optimize Lighting (Hapus Shadows & Fog)
    -----------------------------------------
    originalStates.lighting = {
        GlobalShadows = Lighting.GlobalShadows,
        FogEnd = Lighting.FogEnd,
        FogStart = Lighting.FogStart
    }
    
    Lighting.GlobalShadows = false -- NO SHADOWS
    Lighting.FogStart = 0
    Lighting.FogEnd = 1000000 -- NO FOG
    
    -----------------------------------------
    -- 4. Matikan Post-Processing Effects
    -----------------------------------------
    for _, effect in ipairs(Lighting:GetChildren()) do
        if effect:IsA("PostEffect") then
            originalStates.effects[effect] = effect.Enabled
            effect.Enabled = false
        end
    end
    
    -----------------------------------------
    -- 5. Set Render Quality ke MINIMUM
    -----------------------------------------
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    
    -----------------------------------------
    -- 6. Hook new objects yang spawn
    -----------------------------------------
    newObjectConnection = workspace.DescendantAdded:Connect(function(obj)
        if FPSBooster.Enabled then
            task.wait(0.1) -- Delay kecil
            optimizeObject(obj)
        end
    end)
    
    return true, "FPS Booster enabled"
end

-- ============================================
-- MAIN DISABLE FUNCTION
-- ============================================
function FPSBooster.Disable()
    if not FPSBooster.Enabled then
        return false, "Already disabled"
    end
    
    FPSBooster.Enabled = false
    
    -----------------------------------------
    -- 1. Restore semua objects
    -----------------------------------------
    for _, obj in ipairs(workspace:GetDescendants()) do
        restoreObject(obj)
    end
    
    -----------------------------------------
    -- 2. Restore Terrain Water
    -----------------------------------------
    if Terrain and originalStates.waterProperties then
        pcall(function()
            Terrain.WaterReflectance = originalStates.waterProperties.WaterReflectance
            Terrain.WaterWaveSize = originalStates.waterProperties.WaterWaveSize
            Terrain.WaterWaveSpeed = originalStates.waterProperties.WaterWaveSpeed
        end)
    end
    
    -----------------------------------------
    -- 3. Restore Lighting
    -----------------------------------------
    if originalStates.lighting.GlobalShadows ~= nil then
        Lighting.GlobalShadows = originalStates.lighting.GlobalShadows
        Lighting.FogEnd = originalStates.lighting.FogEnd
        Lighting.FogStart = originalStates.lighting.FogStart
    end
    
    -----------------------------------------
    -- 4. Restore Post-Processing
    -----------------------------------------
    for effect, state in pairs(originalStates.effects) do
        if effect and effect.Parent then
            effect.Enabled = state
        end
    end
    
    -----------------------------------------
    -- 5. Restore Render Quality
    -----------------------------------------
    settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic
    
    -----------------------------------------
    -- 6. Disconnect hook
    -----------------------------------------
    if newObjectConnection then
        newObjectConnection:Disconnect()
        newObjectConnection = nil
    end
    
    -- Clear original states
    originalStates = {
        reflectance = {},
        transparency = {},
        lighting = {},
        effects = {},
        waterProperties = {}
    }
    
    return true, "FPS Booster disabled"
end

-- ============================================
-- UTILITY FUNCTIONS
-- ============================================
function FPSBooster.IsEnabled()
    return FPSBooster.Enabled
end

return FPSBooster

============================================================
-- File 12: ./Project_code/Misc/GuiJam00.lua
============================================================

-- LynxGUI_v2.3.lua - FIXED MODULE LOADING (Part 1/6)
-- Core Setup, Services, Advanced Loading System
-- FREE NOT FOR SALE

-- ‚ùå THIS FILE IS DEPRECATED - USE JackHub.lua INSTEAD ‚ùå
print("‚ö†Ô∏è WARNING: GuiJam00.lua is deprecated!")
print("‚ÑπÔ∏è Please use JackHub.lua instead")
print("üõë Terminating old version to prevent conflicts...")
return -- TERMINATE IMMEDIATELY

-- ============================================
-- UNIVERSAL LOCK CHECK (Prevent Duplicate with Main GUI)
-- ============================================
if getgenv then
    if getgenv().LYNX_GUI_RUNNING then
        warn("‚ö†Ô∏è Main LYNX GUI is already running! This old version will not load.")
        warn("‚ÑπÔ∏è Use JackHub.lua instead of GuiJam00.lua")
        return
    end
elseif _G then
    if _G.LYNX_GUI_RUNNING then
        warn("‚ö†Ô∏è Main LYNX GUI is already running! This old version will not load.")
        warn("‚ÑπÔ∏è Use JackHub.lua instead of GuiJam00.lua")
        return
    end
end

-- ============================================
-- SERVICES & CORE VARIABLES
-- ============================================
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")
local localPlayer = Players.LocalPlayer

repeat task.wait() until localPlayer:FindFirstChild("PlayerGui")

-- Detect platform
local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled

-- ============================================
-- UTILITY FUNCTIONS
-- ============================================
local function new(class, props)
    local inst = Instance.new(class)
    for k, v in pairs(props or {}) do 
        inst[k] = v 
    end
    return inst
end

local function SendNotification(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration or 5,
            Icon = "rbxassetid://91891350821146"
        })
    end)
end

-- ============================================
-- ADVANCED MODULE LOADING SYSTEM WITH RETRY
-- ============================================
local Modules = {}
local ModuleStatus = {}
local totalModules = 0
local loadedModules = 0
local failedModules = {}
local DEBUG_MODE = true -- Set true untuk debug

-- Critical modules yang WAJIB terload
local CRITICAL_MODULES = {
    "HideStats",
    "Webhook",
    "Notify"
}

-- Send initial loading notification
SendNotification("üé£ Lynx Script", "Initializing Security Loader...", 3)
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("üîÑ LYNX GUI v2.3 - LOADING")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")

-- Load Security Loader
local SecurityLoader
local loaderSuccess, loaderError = pcall(function()
    SecurityLoader = loadstring(game:HttpGet("https://raw.githubusercontent.com/akmiliadevi/Tugas_Kuliah/refs/heads/main/SecurityLoader.lua"))()
end)

if not loaderSuccess or not SecurityLoader then
    local errorMsg = loaderError and tostring(loaderError) or "Unknown error"
    SendNotification("‚ùå CRITICAL ERROR", "SecurityLoader failed!", 10)
    warn("‚ùå CRITICAL: SecurityLoader failed to load - " .. errorMsg)
    warn("‚ùå Script cannot continue without SecurityLoader")
    return
end

print("‚úÖ SecurityLoader loaded successfully")
SendNotification("‚úÖ Security OK", "Loading modules...", 2)

-- Module list - MATCHED WITH SecurityLoader (35 modules)
local ModuleList = {
    -- Critical modules first
    "Notify", "HideStats", "Webhook",
    -- Fishing modules
    "instant", "instant2", "blatantv1", "UltraBlatant", "blatantv2", "blatantv2fix",
    "GoodPerfectionStable",
    -- Support features
    "NoFishingAnimation", "LockPosition", "AutoEquipRod", "DisableCutscenes",
    "DisableExtras", "AutoTotem3X", "SkinAnimation", "WalkOnWater",
    -- Teleport
    "TeleportModule", "TeleportToPlayer", "SavedLocation", "EventTeleportDynamic",
    -- Quest
    "AutoQuestModule", "AutoTemple", "TempleDataReader",
    -- Shop
    "AutoSell", "AutoSellTimer", "MerchantSystem", "RemoteBuyer", "AutoBuyWeather",
    -- Camera & Settings
    "FreecamModule", "UnlimitedZoomModule", "AntiAFK", "UnlockFPS", "FPSBooster"
}

totalModules = #ModuleList

-- Validate module list count
if totalModules == 0 then
    warn("‚ùå CRITICAL: Module list is empty!")
    SendNotification("‚ùå Error", "Module list is empty!", 10)
    return
end

print(string.format("üìã Module list validated: %d modules to load", totalModules))

-- ============================================
-- SYNCHRONOUS MODULE LOADING WITH RETRY
-- ============================================
local MAX_RETRIES = 3
local RETRY_DELAY = 1

local function LoadModuleWithRetry(moduleName, retryCount)
    retryCount = retryCount or 0
    
    local success, result = pcall(function()
        return SecurityLoader.LoadModule(moduleName)
    end)
    
    if success and result then
        Modules[moduleName] = result
        ModuleStatus[moduleName] = "‚úÖ Loaded"
        loadedModules = loadedModules + 1
        
        if DEBUG_MODE then
            print(string.format("‚úÖ [%d/%d] %s loaded", loadedModules, totalModules, moduleName))
        end
        
        return true
    else
        if retryCount < MAX_RETRIES then
            warn(string.format("‚ö†Ô∏è Retry %d/%d for %s", retryCount + 1, MAX_RETRIES, moduleName))
            task.wait(RETRY_DELAY)
            return LoadModuleWithRetry(moduleName, retryCount + 1)
        else
            Modules[moduleName] = nil
            ModuleStatus[moduleName] = "‚ùå Failed"
            table.insert(failedModules, moduleName)
            
            warn(string.format("‚ùå FAILED: %s (after %d retries)", moduleName, MAX_RETRIES))
            return false
        end
    end
end

local function LoadAllModules()
    print("\nüì¶ Starting module loading sequence...")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    local startTime = tick()
    
    -- Load modules synchronously
    for index, moduleName in ipairs(ModuleList) do
        local isCritical = table.find(CRITICAL_MODULES, moduleName) ~= nil
        local moduleLabel = isCritical and "[CRITICAL]" or "[OPTIONAL]"
        
        print(string.format("\nüîÑ Loading %s %s...", moduleLabel, moduleName))
        
        local success = LoadModuleWithRetry(moduleName)
        
        if not success and isCritical then
            SendNotification("‚ùå CRITICAL ERROR", 
                string.format("%s failed to load!", moduleName), 
                10)
            error(string.format("CRITICAL MODULE FAILED: %s", moduleName))
            return false
        end
        
        -- Update progress notification every 5 modules
        if index % 5 == 0 then
            local percent = math.floor((loadedModules / totalModules) * 100)
            SendNotification("üì¶ Loading Modules", 
                string.format("%d/%d loaded (%d%%)", loadedModules, totalModules, percent), 
                2)
        end
    end
    
    local loadTime = math.floor((tick() - startTime) * 100) / 100
    
    print("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("‚ú® MODULE LOADING COMPLETE")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print(string.format("üì¶ Loaded: %d/%d modules", loadedModules, totalModules))
    print(string.format("‚è±Ô∏è Time: %.2f seconds", loadTime))
    
    if #failedModules > 0 then
        print("\n‚ö†Ô∏è FAILED MODULES:")
        for _, name in ipairs(failedModules) do
            print("   ‚ùå " .. name)
        end
    end
    
    if DEBUG_MODE then
        print("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
        print("üìã DETAILED MODULE STATUS:")
        for name, status in pairs(ModuleStatus) do
            print(string.format("   %s %s", status, name))
        end
    end
    
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n")
    
    -- Final validation
    local allCriticalLoaded = true
    for _, criticalModule in ipairs(CRITICAL_MODULES) do
        if not Modules[criticalModule] then
            allCriticalLoaded = false
            warn(string.format("‚ùå CRITICAL MODULE MISSING: %s", criticalModule))
        end
    end
    
    if not allCriticalLoaded then
        SendNotification("‚ùå CRITICAL ERROR", "Essential modules failed! Check console.", 10)
        return false
    end
    
    local percent = math.floor((loadedModules / totalModules) * 100)
    SendNotification("‚ú® Lynx Ready!", 
        string.format("%d/%d modules loaded (%d%%)", loadedModules, totalModules, percent), 
        4)
    
    return true
end

-- Start loading and wait for completion
local loadSuccess = LoadAllModules()

if not loadSuccess then
    error("Module loading failed - Script halted")
    return
end

-- Safe module getter with fallback
local function GetModule(name)
    local module = Modules[name]
    if not module then
        if DEBUG_MODE then
            warn(string.format("‚ö†Ô∏è Module '%s' not available (may have failed to load)", name))
        end
    end
    return module
end

-- Verify critical modules one more time before GUI creation
print("\nüîç Final verification of critical modules...")
local criticalModulesOK = true
for _, criticalModule in ipairs(CRITICAL_MODULES) do
    local module = GetModule(criticalModule)
    if module then
        print(string.format("   ‚úÖ %s: VERIFIED", criticalModule))
    else
        print(string.format("   ‚ùå %s: MISSING", criticalModule))
        criticalModulesOK = false
    end
end

if not criticalModulesOK then
    warn("‚ùå Critical module verification failed - GUI will not load")
    SendNotification("‚ùå Critical Error", "Essential modules missing! Check console.", 10)
    return
end

print("\n‚úÖ All critical modules verified - Proceeding to GUI creation...\n")

-- ============================================
-- COLOR PALETTE
-- ============================================
local colors = {
    primary = Color3.fromRGB(255, 140, 0),
    secondary = Color3.fromRGB(147, 112, 219),
    accent = Color3.fromRGB(186, 85, 211),
    galaxy1 = Color3.fromRGB(123, 104, 238),
    galaxy2 = Color3.fromRGB(72, 61, 139),
    success = Color3.fromRGB(34, 197, 94),
    warning = Color3.fromRGB(251, 191, 36),
    danger = Color3.fromRGB(239, 68, 68),
    
    bg1 = Color3.fromRGB(10, 10, 10),
    bg2 = Color3.fromRGB(18, 18, 18),
    bg3 = Color3.fromRGB(25, 25, 25),
    bg4 = Color3.fromRGB(35, 35, 35),
    
    text = Color3.fromRGB(255, 255, 255),
    textDim = Color3.fromRGB(180, 180, 180),
    textDimmer = Color3.fromRGB(120, 120, 120),
    
    border = Color3.fromRGB(50, 50, 50),
    glow = Color3.fromRGB(138, 43, 226),
}

-- Window configuration
local windowSize = UDim2.new(0, 420, 0, 280)
local minWindowSize = Vector2.new(380, 250)
local maxWindowSize = Vector2.new(550, 400)
local sidebarWidth = 140

-- ‚è∏Ô∏è BAGIAN 1/6 SELESAI
-- Tunggu perintah "lanjut" untuk melanjutkan ke bagian 2/6

-- ============================================
-- BAGIAN 2/6: GUI Structure & Window Creation
-- ============================================

local gui = new("ScreenGui", {
    Name = "LynxGUI_Galaxy",
    Parent = localPlayer.PlayerGui,
    IgnoreGuiInset = true,
    ResetOnSpawn = false,
    ZIndexBehavior = Enum.ZIndexBehavior.Sibling,
    DisplayOrder = 2147483647
})

local function bringToFront()
    gui.DisplayOrder = 2147483647
end

-- Main Window Container
local win = new("Frame", {
    Parent = gui,
    Size = windowSize,
    Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2),
    BackgroundColor3 = colors.bg1,
    BackgroundTransparency = 0.25,
    BorderSizePixel = 0,
    ClipsDescendants = false,
    ZIndex = 3
})
new("UICorner", {Parent = win, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = win,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.9,
    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
})

-- Inner shadow effect
local innerShadow = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, -2, 1, -2),
    Position = UDim2.new(0, 1, 0, 1),
    BackgroundTransparency = 1,
    BorderSizePixel = 0,
    ZIndex = 2
})
new("UICorner", {Parent = innerShadow, CornerRadius = UDim.new(0, 11)})
new("UIStroke", {
    Parent = innerShadow,
    Color = Color3.fromRGB(0, 0, 0),
    Thickness = 1,
    Transparency = 0.8
})

-- Sidebar
local sidebar = new("Frame", {
    Parent = win,
    Size = UDim2.new(0, sidebarWidth, 1, -45),
    Position = UDim2.new(0, 0, 0, 45),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.75,
    BorderSizePixel = 0,
    ClipsDescendants = true,
    ZIndex = 4
})
new("UICorner", {Parent = sidebar, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = sidebar,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

-- Script Header
local scriptHeader = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, 0, 0, 45),
    Position = UDim2.new(0, 0, 0, 0),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.75,
    BorderSizePixel = 0,
    ZIndex = 5
})
new("UICorner", {Parent = scriptHeader, CornerRadius = UDim.new(0, 12)})

-- Gradient overlay
local gradient = new("UIGradient", {
    Parent = scriptHeader,
    Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(72, 61, 139))
    },
    Rotation = 45,
    Transparency = NumberSequence.new{
        NumberSequenceKeypoint.new(0, 0.97),
        NumberSequenceKeypoint.new(1, 0.99)
    }
})

-- Drag Handle
local headerDragHandle = new("Frame", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 40, 0, 3),
    Position = UDim2.new(0.5, -20, 0, 8),
    BackgroundColor3 = colors.primary,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = headerDragHandle, CornerRadius = UDim.new(1, 0)})
new("UIStroke", {
    Parent = headerDragHandle,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.85
})

-- Title with glow
local titleLabel = new("TextLabel", {
    Parent = scriptHeader,
    Text = "LynX",
    Size = UDim2.new(0, 80, 1, 0),
    Position = UDim2.new(0, 15, 0, 0),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 17,
    TextColor3 = colors.primary,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextStrokeTransparency = 0.9,
    TextStrokeColor3 = colors.primary,
    ZIndex = 6
})

-- Title glow effect
local titleGlow = new("TextLabel", {
    Parent = scriptHeader,
    Text = "LynX",
    Size = titleLabel.Size,
    Position = titleLabel.Position,
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 17,
    TextColor3 = colors.primary,
    TextTransparency = 0.7,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 5
})

-- Animated glow pulse
task.spawn(function()
    while true do
        TweenService:Create(titleGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextTransparency = 0.4
        }):Play()
        task.wait(2)
        TweenService:Create(titleGlow, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
            TextTransparency = 0.7
        }):Play()
        task.wait(2)
    end
end)

-- Separator
local separator = new("Frame", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 2, 0, 25),
    Position = UDim2.new(0, 95, 0.5, -12.5),
    BackgroundColor3 = colors.primary,
    BackgroundTransparency = 0.3,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = separator, CornerRadius = UDim.new(1, 0)})
new("UIStroke", {
    Parent = separator,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.7
})

local subtitleLabel = new("TextLabel", {
    Parent = scriptHeader,
    Text = "Free Not For Sale",
    Size = UDim2.new(0, 150, 1, 0),
    Position = UDim2.new(0, 105, 0, 0),
    BackgroundTransparency = 1,
    Font = Enum.Font.GothamBold,
    TextSize = 9,
    TextColor3 = colors.textDim,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextTransparency = 0.3,
    ZIndex = 6
})

-- Minimize button
local btnMinHeader = new("TextButton", {
    Parent = scriptHeader,
    Size = UDim2.new(0, 30, 0, 30),
    Position = UDim2.new(1, -38, 0.5, -15),
    BackgroundColor3 = colors.bg4,
    BackgroundTransparency = 0.5,
    BorderSizePixel = 0,
    Text = "‚îÄ",
    Font = Enum.Font.GothamBold,
    TextSize = 18,
    TextColor3 = colors.textDim,
    TextTransparency = 0.3,
    AutoButtonColor = false,
    ZIndex = 7
})
new("UICorner", {Parent = btnMinHeader, CornerRadius = UDim.new(0, 8)})

local btnStroke = new("UIStroke", {
    Parent = btnMinHeader,
    Color = colors.primary,
    Thickness = 0,
    Transparency = 0.8
})

btnMinHeader.MouseEnter:Connect(function()
    TweenService:Create(btnMinHeader, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundColor3 = colors.galaxy1,
        BackgroundTransparency = 0.2,
        TextColor3 = colors.text,
        TextTransparency = 0,
        Size = UDim2.new(0, 32, 0, 32)
    }):Play()
    TweenService:Create(btnStroke, TweenInfo.new(0.25), {
        Thickness = 1.5,
        Transparency = 0.4
    }):Play()
end)

btnMinHeader.MouseLeave:Connect(function()
    TweenService:Create(btnMinHeader, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.5,
        TextColor3 = colors.textDim,
        TextTransparency = 0.3,
        Size = UDim2.new(0, 30, 0, 30)
    }):Play()
    TweenService:Create(btnStroke, TweenInfo.new(0.25), {
        Thickness = 0,
        Transparency = 0.8
    }):Play()
end)

-- Navigation Container
local navContainer = new("ScrollingFrame", {
    Parent = sidebar,
    Size = UDim2.new(1, -8, 1, -12),
    Position = UDim2.new(0, 4, 0, 6),
    BackgroundTransparency = 1,
    ScrollBarThickness = 2,
    ScrollBarImageColor3 = colors.primary,
    BorderSizePixel = 0,
    CanvasSize = UDim2.new(0, 0, 0, 0),
    AutomaticCanvasSize = Enum.AutomaticSize.Y,
    ClipsDescendants = true,
    ZIndex = 5
})
new("UIListLayout", {
    Parent = navContainer,
    Padding = UDim.new(0, 4),
    SortOrder = Enum.SortOrder.LayoutOrder
})

-- Content Area
local contentBg = new("Frame", {
    Parent = win,
    Size = UDim2.new(1, -(sidebarWidth + 10), 1, -52),
    Position = UDim2.new(0, sidebarWidth + 5, 0, 47),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ClipsDescendants = true,
    ZIndex = 4
})
new("UICorner", {Parent = contentBg, CornerRadius = UDim.new(0, 12)})
new("UIStroke", {
    Parent = contentBg,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

-- Top Bar
local topBar = new("Frame", {
    Parent = contentBg,
    Size = UDim2.new(1, -8, 0, 32),
    Position = UDim2.new(0, 4, 0, 4),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 5
})
new("UICorner", {Parent = topBar, CornerRadius = UDim.new(0, 10)})
new("UIStroke", {
    Parent = topBar,
    Color = colors.primary,
    Thickness = 1,
    Transparency = 0.95
})

local pageTitle = new("TextLabel", {
    Parent = topBar,
    Text = "Main Dashboard",
    Size = UDim2.new(1, -20, 1, 0),
    Position = UDim2.new(0, 12, 0, 0),
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    BackgroundTransparency = 1,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 6
})

-- Resize Handle
local resizing = false
local resizeHandle = new("TextButton", {
    Parent = win,
    Size = UDim2.new(0, 18, 0, 18),
    Position = UDim2.new(1, -18, 1, -18),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "‚ã∞",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.textDim,
    TextTransparency = 0.4,
    AutoButtonColor = false,
    ZIndex = 100
})
new("UICorner", {Parent = resizeHandle, CornerRadius = UDim.new(0, 6)})

local resizeStroke = new("UIStroke", {
    Parent = resizeHandle,
    Color = colors.primary,
    Thickness = 0,
    Transparency = 0.8
})

resizeHandle.MouseEnter:Connect(function()
    TweenService:Create(resizeHandle, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
        BackgroundTransparency = 0.3,
        TextTransparency = 0,
        Size = UDim2.new(0, 20, 0, 20)
    }):Play()
    TweenService:Create(resizeStroke, TweenInfo.new(0.25), {
        Thickness = 1.5,
        Transparency = 0.5
    }):Play()
end)

resizeHandle.MouseLeave:Connect(function()
    if not resizing then
        TweenService:Create(resizeHandle, TweenInfo.new(0.25, Enum.EasingStyle.Quint), {
            BackgroundTransparency = 0.6,
            TextTransparency = 0.4,
            Size = UDim2.new(0, 18, 0, 18)
        }):Play()
        TweenService:Create(resizeStroke, TweenInfo.new(0.25), {
            Thickness = 0,
            Transparency = 0.8
        }):Play()
    end
end)

-- Pages
local pages = {}
local currentPage = "Main"
local navButtons = {}

local function createPage(name)
    local page = new("ScrollingFrame", {
        Parent = contentBg,
        Size = UDim2.new(1, -16, 1, -44),
        Position = UDim2.new(0, 8, 0, 40),
        BackgroundTransparency = 1,
        ScrollBarThickness = 3,
        ScrollBarImageColor3 = colors.primary,
        BorderSizePixel = 0,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        Visible = false,
        ClipsDescendants = true,
        ZIndex = 5
    })
    new("UIListLayout", {
        Parent = page,
        Padding = UDim.new(0, 8),
        SortOrder = Enum.SortOrder.LayoutOrder
    })
    new("UIPadding", {
        Parent = page,
        PaddingTop = UDim.new(0, 4),
        PaddingBottom = UDim.new(0, 4)
    })
    pages[name] = page
    return page
end

-- Create all pages
local mainPage = createPage("Main")
local teleportPage = createPage("Teleport")
local questPage = createPage("Quest")
local shopPage = createPage("Shop")
local webhookPage = createPage("Webhook")
local cameraViewPage = createPage("CameraView")
local settingsPage = createPage("Settings")
local infoPage = createPage("Info")
mainPage.Visible = true

-- ‚è∏Ô∏è BAGIAN 2/6 SELESAI
-- Tunggu perintah "lanjut" untuk melanjutkan ke bagian 3/6

-- ============================================
-- BAGIAN 3/6: Navigation & UI Components
-- ============================================

-- Navigation Button Creation
local function createNavButton(text, icon, page, order)
    local btn = new("TextButton", {
        Parent = navContainer,
        Size = UDim2.new(1, 0, 0, 38),
        BackgroundColor3 = page == currentPage and colors.bg3 or Color3.fromRGB(0, 0, 0),
        BackgroundTransparency = page == currentPage and 0.7 or 1,
        BorderSizePixel = 0,
        Text = "",
        AutoButtonColor = false,
        LayoutOrder = order,
        ZIndex = 6
    })
    new("UICorner", {Parent = btn, CornerRadius = UDim.new(0, 9)})
    
    local indicator = new("Frame", {
        Parent = btn,
        Size = UDim2.new(0, 3, 0, 20),
        Position = UDim2.new(0, 0, 0.5, -10),
        BackgroundColor3 = colors.primary,
        BorderSizePixel = 0,
        Visible = page == currentPage,
        ZIndex = 7
    })
    new("UICorner", {Parent = indicator, CornerRadius = UDim.new(1, 0)})
    new("UIStroke", {
        Parent = indicator,
        Color = colors.primary,
        Thickness = 2,
        Transparency = 0.7
    })
    
    local iconLabel = new("TextLabel", {
        Parent = btn,
        Text = icon,
        Size = UDim2.new(0, 30, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 15,
        TextColor3 = page == currentPage and colors.primary or colors.textDim,
        TextTransparency = page == currentPage and 0 or 0.3,
        ZIndex = 7
    })
    
    local textLabel = new("TextLabel", {
        Parent = btn,
        Text = text,
        Size = UDim2.new(1, -45, 1, 0),
        Position = UDim2.new(0, 40, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = page == currentPage and colors.text or colors.textDim,
        TextTransparency = page == currentPage and 0.1 or 0.4,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7
    })
    
    btn.MouseEnter:Connect(function()
        if page ~= currentPage then
            TweenService:Create(btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
                BackgroundTransparency = 0.8
            }):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.3), {
                TextTransparency = 0,
                TextColor3 = colors.primary
            }):Play()
            TweenService:Create(textLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.2
            }):Play()
        end
    end)
    
    btn.MouseLeave:Connect(function()
        if page ~= currentPage then
            TweenService:Create(btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
                BackgroundTransparency = 1
            }):Play()
            TweenService:Create(iconLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.3,
                TextColor3 = colors.textDim
            }):Play()
            TweenService:Create(textLabel, TweenInfo.new(0.3), {
                TextTransparency = 0.4
            }):Play()
        end
    end)
    
    navButtons[page] = {btn = btn, icon = iconLabel, text = textLabel, indicator = indicator}
    return btn
end

-- Page Switching Function
local function switchPage(pageName, pageTitle_text)
    if currentPage == pageName then return end
    for _, page in pairs(pages) do page.Visible = false end
    
    for name, btnData in pairs(navButtons) do
        local isActive = name == pageName
        TweenService:Create(btnData.btn, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {
            BackgroundColor3 = isActive and colors.bg3 or Color3.fromRGB(0, 0, 0),
            BackgroundTransparency = isActive and 0.7 or 1
        }):Play()
        btnData.indicator.Visible = isActive
        TweenService:Create(btnData.icon, TweenInfo.new(0.3), {
            TextColor3 = isActive and colors.primary or colors.textDim,
            TextTransparency = isActive and 0 or 0.3
        }):Play()
        TweenService:Create(btnData.text, TweenInfo.new(0.3), {
            TextColor3 = isActive and colors.text or colors.textDim,
            TextTransparency = isActive and 0.1 or 0.4
        }):Play()
    end
    
    pages[pageName].Visible = true
    pageTitle.Text = pageTitle_text
    currentPage = pageName
end

-- Create Navigation Buttons
local btnMain = createNavButton("Dashboard", "üè†", "Main", 1)
local btnTeleport = createNavButton("Teleport", "üåç", "Teleport", 2)
local btnQuest = createNavButton("Quest", "üìú", "Quest", 3)
local btnShop = createNavButton("Shop", "üõí", "Shop", 4)
local btnWebhook = createNavButton("Webhook", "üîó", "Webhook", 5)
local btnCameraView = createNavButton("Camera View", "üì∑", "CameraView", 6)
local btnSettings = createNavButton("Settings", "‚öôÔ∏è", "Settings", 7)
local btnInfo = createNavButton("About", "‚ÑπÔ∏è", "Info", 8)

-- Connect Navigation Buttons
btnMain.MouseButton1Click:Connect(function() switchPage("Main", "Main Dashboard") end)
btnTeleport.MouseButton1Click:Connect(function() switchPage("Teleport", "Teleport System") end)
btnQuest.MouseButton1Click:Connect(function() switchPage("Quest", "Auto Quest") end)
btnShop.MouseButton1Click:Connect(function() switchPage("Shop", "Shop Features") end)
btnWebhook.MouseButton1Click:Connect(function() switchPage("Webhook", "Webhook Page") end)
btnCameraView.MouseButton1Click:Connect(function() switchPage("CameraView", "Camera View Settings") end)
btnSettings.MouseButton1Click:Connect(function() switchPage("Settings", "Settings") end)
btnInfo.MouseButton1Click:Connect(function() switchPage("Info", "About Lynx") end)

-- ============================================
-- UI COMPONENT FUNCTIONS
-- ============================================

-- Category Component
local function makeCategory(parent, title, icon)
    local categoryFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 36),
        BackgroundColor3 = colors.bg3,
        BackgroundTransparency = 0.6,
        BorderSizePixel = 0,
        AutomaticSize = Enum.AutomaticSize.Y,
        ClipsDescendants = false,
        ZIndex = 6
    })
    new("UICorner", {Parent = categoryFrame, CornerRadius = UDim.new(0, 6)})
    
    local categoryStroke = new("UIStroke", {
        Parent = categoryFrame,
        Color = colors.border,
        Thickness = 0,
        Transparency = 0.8
    })
    
    local header = new("TextButton", {
        Parent = categoryFrame,
        Size = UDim2.new(1, 0, 0, 36),
        BackgroundTransparency = 1,
        Text = "",
        AutoButtonColor = false,
        ClipsDescendants = true,
        ZIndex = 7
    })
    
    local titleLabel = new("TextLabel", {
        Parent = header,
        Text = title,
        Size = UDim2.new(1, -50, 1, 0),
        Position = UDim2.new(0, 8, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 11,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 8
    })
    
    local arrow = new("TextLabel", {
        Parent = header,
        Text = "‚ñº",
        Size = UDim2.new(0, 20, 1, 0),
        Position = UDim2.new(1, -24, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.primary,
        ZIndex = 8
    })
    
    local contentContainer = new("Frame", {
        Parent = categoryFrame,
        Size = UDim2.new(1, -16, 0, 0),
        Position = UDim2.new(0, 8, 0, 38),
        BackgroundTransparency = 1,
        Visible = false,
        AutomaticSize = Enum.AutomaticSize.Y,
        ClipsDescendants = true,
        ZIndex = 7
    })
    new("UIListLayout", {Parent = contentContainer, Padding = UDim.new(0, 6)})
    new("UIPadding", {Parent = contentContainer, PaddingBottom = UDim.new(0, 8)})
    
    local isOpen = false
    header.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        contentContainer.Visible = isOpen
        TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = isOpen and 180 or 0}):Play()
        TweenService:Create(categoryFrame, TweenInfo.new(0.25), {
            BackgroundTransparency = isOpen and 0.4 or 0.6
        }):Play()
        TweenService:Create(categoryStroke, TweenInfo.new(0.25), {Thickness = isOpen and 1 or 0}):Play()
    end)
    
    return contentContainer
end

-- Toggle Component
local function makeToggle(parent, label, callback)
    local frame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundTransparency = 1,
        ZIndex = 7
    })
    
    local labelText = new("TextLabel", {
        Parent = frame,
        Text = label,
        Size = UDim2.new(0.68, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        TextXAlignment = Enum.TextXAlignment.Left,
        BackgroundTransparency = 1,
        TextColor3 = colors.text,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextWrapped = true,
        ZIndex = 8
    })
    
    local toggleBg = new("Frame", {
        Parent = frame,
        Size = UDim2.new(0, 38, 0, 20),
        Position = UDim2.new(1, -38, 0.5, -10),
        BackgroundColor3 = colors.bg4,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = toggleBg, CornerRadius = UDim.new(1, 0)})
    
    local toggleCircle = new("Frame", {
        Parent = toggleBg,
        Size = UDim2.new(0, 16, 0, 16),
        Position = UDim2.new(0, 2, 0.5, -8),
        BackgroundColor3 = colors.textDim,
        BorderSizePixel = 0,
        ZIndex = 9
    })
    new("UICorner", {Parent = toggleCircle, CornerRadius = UDim.new(1, 0)})
    
    local btn = new("TextButton", {
        Parent = toggleBg,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Text = "",
        ZIndex = 10
    })
    
    local on = false
    btn.MouseButton1Click:Connect(function()
        on = not on
        TweenService:Create(toggleBg, TweenInfo.new(0.25), {BackgroundColor3 = on and colors.primary or colors.bg4}):Play()
        TweenService:Create(toggleCircle, TweenInfo.new(0.3, Enum.EasingStyle.Back), {
            Position = on and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8),
            BackgroundColor3 = on and colors.text or colors.textDim
        }):Play()
        pcall(callback, on)
    end)
end

-- Input Component (Horizontal)
local function makeInput(parent, label, defaultValue, callback)
    local frame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundTransparency = 1,
        ZIndex = 7
    })
    
    local lbl = new("TextLabel", {
        Parent = frame,
        Text = label,
        Size = UDim2.new(0.55, 0, 1, 0),
        Position = UDim2.new(0, 0, 0, 0),
        BackgroundTransparency = 1,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        ZIndex = 8
    })
    
    local inputBg = new("Frame", {
        Parent = frame,
        Size = UDim2.new(0.42, 0, 0, 28),
        Position = UDim2.new(0.58, 0, 0.5, -14),
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.4,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = inputBg, CornerRadius = UDim.new(0, 6)})
    
    local inputStroke = new("UIStroke", {
        Parent = inputBg,
        Color = colors.border,
        Thickness = 1,
        Transparency = 0.7
    })
    
    local inputBox = new("TextBox", {
        Parent = inputBg,
        Size = UDim2.new(1, -12, 1, 0),
        Position = UDim2.new(0, 6, 0, 0),
        BackgroundTransparency = 1,
        Text = tostring(defaultValue),
        PlaceholderText = "0.00",
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        PlaceholderColor3 = colors.textDimmer,
        TextXAlignment = Enum.TextXAlignment.Center,
        ClearTextOnFocus = false,
        ZIndex = 9
    })
    
    inputBox.Focused:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = colors.primary,
            Thickness = 1.5,
            Transparency = 0.3
        }):Play()
    end)
    
    inputBox.FocusLost:Connect(function()
        TweenService:Create(inputStroke, TweenInfo.new(0.2), {
            Color = colors.border,
            Thickness = 1,
            Transparency = 0.7
        }):Play()
        
        local value = tonumber(inputBox.Text)
        if value then
            pcall(callback, value)
        else
            inputBox.Text = tostring(defaultValue)
        end
    end)
end

-- Button Component
local function makeButton(parent, label, callback)
    local btnFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 32),
        BackgroundColor3 = colors.primary,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = btnFrame, CornerRadius = UDim.new(0, 6)})
    
    local btnStroke = new("UIStroke", {
        Parent = btnFrame,
        Color = colors.primary,
        Thickness = 0,
        Transparency = 0.7
    })
    
    local button = new("TextButton", {
        Parent = btnFrame,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Text = label,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.text,
        AutoButtonColor = false,
        ZIndex = 9
    })
    
    button.MouseEnter:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.1,
            Size = UDim2.new(1, 0, 0, 35)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2), {Thickness = 1.5}):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.2), {
            BackgroundTransparency = 0.3,
            Size = UDim2.new(1, 0, 0, 32)
        }):Play()
        TweenService:Create(btnStroke, TweenInfo.new(0.2), {Thickness = 0}):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        TweenService:Create(btnFrame, TweenInfo.new(0.1), {Size = UDim2.new(0.98, 0, 0, 30)}):Play()
        task.wait(0.1)
        TweenService:Create(btnFrame, TweenInfo.new(0.1), {Size = UDim2.new(1, 0, 0, 32)}):Play()
        pcall(callback)
    end)
    
    return btnFrame
end

-- ‚è∏Ô∏è BAGIAN 3/6 SELESAI
-- Tunggu perintah "lanjut" untuk melanjutkan ke bagian 4/6

-- ============================================
-- BAGIAN 4/6: Dropdown Component & Main Page Features
-- ============================================

-- Dropdown Component
local function makeDropdown(parent, title, icon, items, onSelect, uniqueId)
    local dropdownFrame = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, 0, 0, 40),
        BackgroundColor3 = colors.bg4,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        AutomaticSize = Enum.AutomaticSize.Y,
        ZIndex = 7,
        Name = uniqueId or "Dropdown"
    })
    new("UICorner", {Parent = dropdownFrame, CornerRadius = UDim.new(0, 6)})
    
    local dropStroke = new("UIStroke", {
        Parent = dropdownFrame,
        Color = colors.border,
        Thickness = 0,
        Transparency = 0.8
    })
    
    local header = new("TextButton", {
        Parent = dropdownFrame,
        Size = UDim2.new(1, -12, 0, 36),
        Position = UDim2.new(0, 6, 0, 2),
        BackgroundTransparency = 1,
        Text = "",
        AutoButtonColor = false,
        ZIndex = 8
    })
    
    local iconLabel = new("TextLabel", {
        Parent = header,
        Text = icon,
        Size = UDim2.new(0, 24, 1, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 12,
        TextColor3 = colors.primary,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local titleLabel = new("TextLabel", {
        Parent = header,
        Text = title,
        Size = UDim2.new(1, -70, 0, 14),
        Position = UDim2.new(0, 26, 0, 4),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local statusLabel = new("TextLabel", {
        Parent = header,
        Text = "None Selected",
        Size = UDim2.new(1, -70, 0, 12),
        Position = UDim2.new(0, 26, 0, 20),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 8,
        TextColor3 = colors.textDimmer,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local arrow = new("TextLabel", {
        Parent = header,
        Text = "‚ñº",
        Size = UDim2.new(0, 24, 1, 0),
        Position = UDim2.new(1, -24, 0, 0),
        BackgroundTransparency = 1,
        Font = Enum.Font.GothamBold,
        TextSize = 10,
        TextColor3 = colors.primary,
        ZIndex = 9
    })
    
    local listContainer = new("ScrollingFrame", {
        Parent = dropdownFrame,
        Size = UDim2.new(1, -12, 0, 0),
        Position = UDim2.new(0, 6, 0, 42),
        BackgroundTransparency = 1,
        Visible = false,
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        ScrollBarThickness = 2,
        ScrollBarImageColor3 = colors.primary,
        BorderSizePixel = 0,
        ClipsDescendants = true,
        ZIndex = 10
    })
    new("UIListLayout", {Parent = listContainer, Padding = UDim.new(0, 4)})
    new("UIPadding", {Parent = listContainer, PaddingBottom = UDim.new(0, 8)})
    
    local isOpen = false
    local selectedItem = nil
    
    header.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        listContainer.Visible = isOpen
        
        TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = isOpen and 180 or 0}):Play()
        TweenService:Create(dropdownFrame, TweenInfo.new(0.25), {
            BackgroundTransparency = isOpen and 0.35 or 0.5
        }):Play()
        TweenService:Create(dropStroke, TweenInfo.new(0.25), {Thickness = isOpen and 1 or 0}):Play()
        
        if isOpen then
            listContainer.Size = UDim2.new(1, -12, 0, math.min(#items * 28, 140))
        end
    end)
    
    for _, itemName in ipairs(items) do
        local itemBtn = new("TextButton", {
            Parent = listContainer,
            Size = UDim2.new(1, 0, 0, 26),
            BackgroundColor3 = colors.bg4,
            BackgroundTransparency = 0.6,
            BorderSizePixel = 0,
            Text = "",
            AutoButtonColor = false,
            ZIndex = 11
        })
        new("UICorner", {Parent = itemBtn, CornerRadius = UDim.new(0, 5)})
        
        local itemStroke = new("UIStroke", {
            Parent = itemBtn,
            Color = colors.border,
            Thickness = 0,
            Transparency = 0.8
        })
        
        local btnLabel = new("TextLabel", {
            Parent = itemBtn,
            Text = itemName,
            Size = UDim2.new(1, -12, 1, 0),
            Position = UDim2.new(0, 6, 0, 0),
            BackgroundTransparency = 1,
            Font = Enum.Font.GothamBold,
            TextSize = 8,
            TextColor3 = colors.textDim,
            TextXAlignment = Enum.TextXAlignment.Left,
            TextTruncate = Enum.TextTruncate.AtEnd,
            ZIndex = 12
        })
        
        itemBtn.MouseEnter:Connect(function()
            if selectedItem ~= itemName then
                TweenService:Create(itemBtn, TweenInfo.new(0.2), {
                    BackgroundColor3 = colors.primary,
                    BackgroundTransparency = 0.3
                }):Play()
                TweenService:Create(btnLabel, TweenInfo.new(0.2), {TextColor3 = colors.text}):Play()
                TweenService:Create(itemStroke, TweenInfo.new(0.2), {Thickness = 1}):Play()
            end
        end)
        
        itemBtn.MouseLeave:Connect(function()
            if selectedItem ~= itemName then
                TweenService:Create(itemBtn, TweenInfo.new(0.2), {
                    BackgroundColor3 = colors.bg4,
                    BackgroundTransparency = 0.6
                }):Play()
                TweenService:Create(btnLabel, TweenInfo.new(0.2), {TextColor3 = colors.textDim}):Play()
                TweenService:Create(itemStroke, TweenInfo.new(0.2), {Thickness = 0}):Play()
            end
        end)
        
        itemBtn.MouseButton1Click:Connect(function()
            selectedItem = itemName
            statusLabel.Text = "‚úì " .. itemName
            statusLabel.TextColor3 = colors.success
            pcall(onSelect, itemName)
            
            task.wait(0.1)
            isOpen = false
            listContainer.Visible = false
            TweenService:Create(arrow, TweenInfo.new(0.3, Enum.EasingStyle.Back), {Rotation = 0}):Play()
            TweenService:Create(dropdownFrame, TweenInfo.new(0.25), {
                BackgroundTransparency = 0.5
            }):Play()
            TweenService:Create(dropStroke, TweenInfo.new(0.25), {Thickness = 0}):Play()
        end)
    end
    
    return dropdownFrame
end

-- ============================================
-- MAIN PAGE FEATURES
-- ============================================

-- Auto Fishing Category
local catAutoFishing = makeCategory(mainPage, "Auto Fishing", "üé£")
local currentInstantMode = "None"
local fishingDelayValue = 1.30
local cancelDelayValue = 0.19
local isInstantFishingEnabled = false

makeDropdown(catAutoFishing, "Instant Fishing Mode", "‚ö°", {"Fast", "Perfect"}, function(mode)
    currentInstantMode = mode
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if instant then instant.Stop() end
    if instant2 then instant2.Stop() end
    
    if isInstantFishingEnabled then
        if mode == "Fast" and instant then
            instant.Settings.MaxWaitTime = fishingDelayValue
            instant.Settings.CancelDelay = cancelDelayValue
            instant.Start()
        elseif mode == "Perfect" and instant2 then
            instant2.Settings.MaxWaitTime = fishingDelayValue
            instant2.Settings.CancelDelay = cancelDelayValue
            instant2.Start()
        end
    else
        if instant then
            instant.Settings.MaxWaitTime = fishingDelayValue
            instant.Settings.CancelDelay = cancelDelayValue
        end
        if instant2 then
            instant2.Settings.MaxWaitTime = fishingDelayValue
            instant2.Settings.CancelDelay = cancelDelayValue
        end
    end
end, "InstantFishingMode")

makeToggle(catAutoFishing, "Enable Instant Fishing", function(on)
    isInstantFishingEnabled = on
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    
    if on then
        if currentInstantMode == "Fast" and instant then
            instant.Start()
        elseif currentInstantMode == "Perfect" and instant2 then
            instant2.Start()
        end
    else
        if instant then instant.Stop() end
        if instant2 then instant2.Stop() end
    end
end)

makeInput(catAutoFishing, "Fishing Delay", 1.30, function(v)
    fishingDelayValue = v
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    if instant then instant.Settings.MaxWaitTime = v end
    if instant2 then instant2.Settings.MaxWaitTime = v end
end)

makeInput(catAutoFishing, "Cancel Delay", 0.19, function(v)
    cancelDelayValue = v
    local instant = GetModule("instant")
    local instant2 = GetModule("instant2")
    if instant then instant.Settings.CancelDelay = v end
    if instant2 then instant2.Settings.CancelDelay = v end
end)

-- Blatant Tester Category
local catBlatantV2 = makeCategory(mainPage, "Blatant Tester", "üéØ")

makeToggle(catBlatantV2, "Blatant Tester", function(on)
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        if on then blatantv2fix.Start() else blatantv2fix.Stop() end
    end
end)

makeInput(catBlatantV2, "Complete Delay", 0.5, function(v)
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        blatantv2fix.Settings.CompleteDelay = v
    end
end)

makeInput(catBlatantV2, "Cancel Delay", 0.1, function(v)
    local blatantv2fix = GetModule("blatantv2fix")
    if blatantv2fix then
        blatantv2fix.Settings.CancelDelay = v
    end
end)

-- Blatant V1 Category
local catBlatantV1 = makeCategory(mainPage, "Blatant V1", "üíÄ")

makeToggle(catBlatantV1, "Blatant Mode", function(on)
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then
        if on then blatantv1.Start() else blatantv1.Stop() end
    end
end)

makeInput(catBlatantV1, "Complete Delay", 0.05, function(v)
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then blatantv1.Settings.CompleteDelay = v end
end)

makeInput(catBlatantV1, "Cancel Delay", 0.1, function(v)
    local blatantv1 = GetModule("blatantv1")
    if blatantv1 then blatantv1.Settings.CancelDelay = v end
end)

-- Ultra Blatant V2 Category
local catUltraBlatant = makeCategory(mainPage, "Blatant V2", "‚ö°")

makeToggle(catUltraBlatant, "Ultra Blatant Mode", function(on)
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then
        if on then UltraBlatant.Start() else UltraBlatant.Stop() end
    end
end)

makeInput(catUltraBlatant, "Complete Delay", 0.05, function(v)
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then UltraBlatant.UpdateSettings(v, nil, nil) end
end)

makeInput(catUltraBlatant, "Cancel Delay", 0.1, function(v)
    local UltraBlatant = GetModule("UltraBlatant")
    if UltraBlatant then UltraBlatant.UpdateSettings(nil, v, nil) end
end)

-- Fast Auto Fishing Perfect Category
local catBlatantV2Fast = makeCategory(mainPage, "Fast Auto Fishing Perfect", "üî•")

makeToggle(catBlatantV2Fast, "Blatant Features", function(on)
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then
        if on then blatantv2.Start() else blatantv2.Stop() end
    end
end)

makeInput(catBlatantV2Fast, "Fishing Delay", 0.05, function(v)
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.FishingDelay = v end
end)

makeInput(catBlatantV2Fast, "Cancel Delay", 0.01, function(v)
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.CancelDelay = v end
end)

makeInput(catBlatantV2Fast, "Timeout Delay", 0.8, function(v)
    local blatantv2 = GetModule("blatantv2")
    if blatantv2 then blatantv2.Settings.TimeoutDelay = v end
end)

-- Support Features Category
local catSupport = makeCategory(mainPage, "Support Features", "üõ†Ô∏è")

makeToggle(catSupport, "No Fishing Animation", function(on)
    local NoFishingAnimation = GetModule("NoFishingAnimation")
    if NoFishingAnimation then
        if on then NoFishingAnimation.StartWithDelay() else NoFishingAnimation.Stop() end
    end
end)

makeToggle(catSupport, "Lock Position", function(on)
    local LockPosition = GetModule("LockPosition")
    local Notify = GetModule("Notify")
    if LockPosition then
        if on then
            LockPosition.Start()
            if Notify then Notify.Send("Lock Position", "Posisi dikunci!", 4) end
        else
            LockPosition.Stop()
            if Notify then Notify.Send("Lock Position", "Posisi dilepas!", 4) end
        end
    end
end)

makeToggle(catSupport, "Auto Equip Rod", function(on)
    local AutoEquipRod = GetModule("AutoEquipRod")
    local Notify = GetModule("Notify")
    if AutoEquipRod then
        if on then
            AutoEquipRod.Start()
            if Notify then Notify.Send("Auto Equip Rod", "Rod auto equip aktif!", 4) end
        else
            AutoEquipRod.Stop()
            if Notify then Notify.Send("Auto Equip Rod", "Auto equip dimatikan!", 4) end
        end
    end
end)

makeToggle(catSupport, "Disable Cutscenes", function(on)
    local DisableCutscenes = GetModule("DisableCutscenes")
    local Notify = GetModule("Notify")
    if DisableCutscenes then
        if on then
            local success = DisableCutscenes.Start()
            if Notify then
                if success then
                    Notify.Send("Disable Cutscenes", "‚úì Cutscenes dimatikan!", 4)
                else
                    Notify.Send("Disable Cutscenes", "‚ö† Sudah aktif!", 3)
                end
            end
        else
            local success = DisableCutscenes.Stop()
            if Notify then
                if success then
                    Notify.Send("Disable Cutscenes", "‚úì Cutscenes normal.", 4)
                else
                    Notify.Send("Disable Cutscenes", "‚ö† Sudah nonaktif!", 3)
                end
            end
        end
    end
end)

makeToggle(catSupport, "Disable Obtained Fish Notification", function(on)
    local DisableExtras = GetModule("DisableExtras")
    local Notify = GetModule("Notify")
    if DisableExtras then
        if on then
            DisableExtras.StartSmallNotification()
            if Notify then Notify.Send("Disable Notification", "‚úì Notifikasi dinonaktifkan!", 4) end
        else
            DisableExtras.StopSmallNotification()
            if Notify then Notify.Send("Disable Notification", "Notifikasi aktif kembali.", 3) end
        end
    end
end)

makeToggle(catSupport, "Disable Skin Effect", function(on)
    local DisableExtras = GetModule("DisableExtras")
    local Notify = GetModule("Notify")
    if DisableExtras then
        if on then
            DisableExtras.StartSkinEffect()
            if Notify then Notify.Send("Disable Skin Effect", "‚úì Skin effect dihapus!", 4) end
        else
            DisableExtras.StopSkinEffect()
            if Notify then Notify.Send("Disable Skin Effect", "Skin effect aktif kembali.", 3) end
        end
    end
end)

makeToggle(catSupport, "Walk On Water", function(on)
    local WalkOnWater = GetModule("WalkOnWater")
    local Notify = GetModule("Notify")
    if WalkOnWater then
        if on then
            WalkOnWater.Start()
            if Notify then Notify.Send("Walk On Water", "‚úì Berjalan di air aktif!", 4) end
        else
            WalkOnWater.Stop()
            if Notify then Notify.Send("Walk On Water", "Walk on water dimatikan.", 3) end
        end
    end
end)

makeToggle(catSupport, "Good/Perfection Stable Mode", function(on)
    local GoodPerfectionStable = GetModule("GoodPerfectionStable")
    local Notify = GetModule("Notify")
    if GoodPerfectionStable then
        if on then
            GoodPerfectionStable.Start()
            if Notify then Notify.Send("Good/Perfection Stable", "Fitur dihidupkan!", 4) end
        else
            GoodPerfectionStable.Stop()
            if Notify then Notify.Send("Good/Perfection Stable", "Fitur dimatikan!", 4) end
        end
    end
end)

-- Auto Totem Category
local catAutoTotem = makeCategory(mainPage, "Auto Spawn 3X Totem", "üõ†Ô∏è")

makeButton(catAutoTotem, "Auto Totem 3X", function()
    local AutoTotem3X = GetModule("AutoTotem3X")
    local Notify = GetModule("Notify")
    if AutoTotem3X then
        if AutoTotem3X.IsRunning() then
            local success, message = AutoTotem3X.Stop()
            if success and Notify then
                Notify.Send("Auto Totem 3X", "‚èπ " .. message, 4)
            end
        else
            local success, message = AutoTotem3X.Start()
            if Notify then
                if success then
                    Notify.Send("Auto Totem 3X", "‚ñ∂ " .. message, 4)
                else
                    Notify.Send("Auto Totem 3X", "‚ö† " .. message, 3)
                end
            end
        end
    end
end)

-- Skin Animation Category
local catSkin = makeCategory(mainPage, "Skin Animation", "‚ú®")

makeButton(catSkin, "‚öîÔ∏è Eclipse Katana", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("Eclipse")
        if success then
            if Notify then Notify.Send("Skin Animation", "‚öîÔ∏è Eclipse Katana diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeButton(catSkin, "üî± Holy Trident", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("HolyTrident")
        if success then
            if Notify then Notify.Send("Skin Animation", "üî± Holy Trident diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeButton(catSkin, "üíÄ Soul Scythe", function()
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        local success = SkinAnimation.SwitchSkin("SoulScythe")
        if success then
            if Notify then Notify.Send("Skin Animation", "üíÄ Soul Scythe diaktifkan!", 4) end
            if not SkinAnimation.IsEnabled() then
                SkinAnimation.Enable()
            end
        elseif Notify then
            Notify.Send("Skin Animation", "‚ö† Gagal mengganti skin!", 3)
        end
    end
end)

makeToggle(catSkin, "Enable Skin Animation", function(on)
    local SkinAnimation = GetModule("SkinAnimation")
    local Notify = GetModule("Notify")
    if SkinAnimation then
        if on then
            local success = SkinAnimation.Enable()
            if Notify then
                if success then
                    local currentSkin = SkinAnimation.GetCurrentSkin()
                    local icon = currentSkin == "Eclipse" and "‚öîÔ∏è" or (currentSkin == "HolyTrident" and "üî±" or "üíÄ")
                    Notify.Send("Skin Animation", "‚úì " .. icon .. " " .. currentSkin .. " aktif!", 4)
                else
                    Notify.Send("Skin Animation", "‚ö† Sudah aktif!", 3)
                end
            end
        else
            local success = SkinAnimation.Disable()
            if Notify then
                if success then
                    Notify.Send("Skin Animation", "‚úì Skin Animation dimatikan!", 4)
                else
                    Notify.Send("Skin Animation", "‚ö† Sudah nonaktif!", 3)
                end
            end
        end
    end
end)

-- ‚è∏Ô∏è BAGIAN 4/6 SELESAI
-- Tunggu perintah "lanjut" untuk melanjutkan ke bagian 5/6

-- ============================================
-- BAGIAN 5/6: Teleport, Quest, Shop, Webhook & HideStats Pages
-- ============================================

-- TELEPORT PAGE
local TeleportModule = GetModule("TeleportModule")
local TeleportToPlayer = GetModule("TeleportToPlayer")
local SavedLocation = GetModule("SavedLocation")
local EventTeleport = GetModule("EventTeleportDynamic")

-- Location Teleport
if TeleportModule then
    local locationItems = {}
    for name, _ in pairs(TeleportModule.Locations) do
        table.insert(locationItems, name)
    end
    table.sort(locationItems)
    
    makeDropdown(teleportPage, "Teleport to Location", "üìç", locationItems, function(selectedLocation)
        TeleportModule.TeleportTo(selectedLocation)
    end, "LocationTeleport")
end

-- Player Teleport with Auto Refresh
local playerDropdown
local function updatePlayerList()
    local playerItems = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            table.insert(playerItems, player.Name)
        end
    end
    table.sort(playerItems)
    
    if playerDropdown and playerDropdown.Parent then
        playerDropdown:Destroy()
    end
    
    if TeleportToPlayer then
        playerDropdown = makeDropdown(teleportPage, "Teleport to Player", "üë§", playerItems, function(selectedPlayer)
            TeleportToPlayer.TeleportTo(selectedPlayer)
        end, "PlayerTeleport")
    end
end

updatePlayerList()

Players.PlayerAdded:Connect(function(player)
    task.wait(0.5)
    updatePlayerList()
end)

Players.PlayerRemoving:Connect(function(player)
    task.wait(0.1)
    updatePlayerList()
end)

-- Saved Location Category
local catSaved = makeCategory(teleportPage, "Saved Location", "‚≠ê")

makeButton(catSaved, "Save Current Location", function()
    if SavedLocation then
        SavedLocation.Save()
        SendNotification("Saved Location", "Lokasi berhasil disimpan.", 3)
    end
end)

makeButton(catSaved, "Teleport Saved Location", function()
    if SavedLocation then
        if SavedLocation.Teleport() then
            SendNotification("Teleported", "Berhasil teleport ke lokasi tersimpan.", 3)
        else
            SendNotification("Error", "Tidak ada lokasi yang disimpan!", 3)
        end
    end
end)

makeButton(catSaved, "Reset Saved Location", function()
    if SavedLocation then
        SavedLocation.Reset()
        SendNotification("Reset", "Lokasi tersimpan telah dihapus.", 3)
    end
end)

-- Event Teleport Category
local catTeleport = makeCategory(teleportPage, "Event Teleport", "üéØ")
local selectedEventName = nil

if EventTeleport then
    local eventNames = EventTeleport.GetEventNames() or {"- No events -"}
    
    makeDropdown(catTeleport, "Pilih Event", "üìå", eventNames, function(selected)
        selectedEventName = selected
        SendNotification("Event", "Event dipilih: " .. tostring(selected), 3)
    end, "EventTeleport")
    
    makeToggle(catTeleport, "Enable Auto Teleport", function(on)
        if on then
            if selectedEventName and EventTeleport.HasCoords(selectedEventName) then
                EventTeleport.Start(selectedEventName)
                SendNotification("Auto Teleport", "Mulai auto teleport ke " .. selectedEventName, 4)
            else
                SendNotification("Auto Teleport", "Pilih event yang memiliki koordinat dulu!", 3)
            end
        else
            EventTeleport.Stop()
            SendNotification("Auto Teleport", "Auto teleport dihentikan.", 3)
        end
    end)
    
    makeButton(catTeleport, "Teleport Now", function()
        if selectedEventName then
            local ok = EventTeleport.TeleportNow(selectedEventName)
            if ok then
                SendNotification("Teleport", "Teleported ke " .. selectedEventName, 3)
            else
                SendNotification("Teleport", "Teleport gagal!", 3)
            end
        else
            SendNotification("Teleport", "Event belum dipilih!", 3)
        end
    end)
end

-- QUEST PAGE
local AutoQuestModule = GetModule("AutoQuestModule")
local AutoTemple = GetModule("AutoTemple")
local TempleDataReader = GetModule("TempleDataReader")

-- Deep Sea Quest Category
local catDeepSea = makeCategory(questPage, "Deep Sea Quest (Ghostfinn Rod)")

local deepSeaProgressFrame = new("Frame", {
    Parent = catDeepSea,
    Size = UDim2.new(1, 0, 0, 160),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = deepSeaProgressFrame, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = deepSeaProgressFrame, Color = colors.border, Thickness = 1, Transparency = 0.7})

local deepSeaLabel = new("TextLabel", {
    Parent = deepSeaProgressFrame,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = AutoQuestModule and AutoQuestModule.GetQuestInfo("DeepSeaQuest") or "Loading...",
    Font = Enum.Font.GothamBold,
    TextSize = 8,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

makeButton(catDeepSea, "Refresh Progress", function()
    if AutoQuestModule then
        deepSeaLabel.Text = AutoQuestModule.GetQuestInfo("DeepSeaQuest")
        SendNotification("Refresh", "Progress updated!", 2)
    end
end)

makeToggle(catDeepSea, "Auto Teleport", function(on)
    if AutoQuestModule then
        if on then
            AutoQuestModule.StartAutoTeleport("DeepSeaQuest")
            SendNotification("Auto Teleport", "Deep Sea Quest Auto Teleport AKTIF!", 2)
        else
            AutoQuestModule.StopAutoTeleport()
            SendNotification("Auto Teleport", "Deep Sea Quest Auto Teleport DIMATIKAN!", 2)
        end
        deepSeaLabel.Text = AutoQuestModule.GetQuestInfo("DeepSeaQuest")
    end
end)

-- Element Quest Category
local catElement = makeCategory(questPage, "Element Quest (Element Rod)")

local elementProgressFrame = new("Frame", {
    Parent = catElement,
    Size = UDim2.new(1, 0, 0, 160),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = elementProgressFrame, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = elementProgressFrame, Color = colors.border, Thickness = 1, Transparency = 0.7})

local elementLabel = new("TextLabel", {
    Parent = elementProgressFrame,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = AutoQuestModule and AutoQuestModule.GetQuestInfo("ElementQuest") or "Loading...",
    Font = Enum.Font.GothamBold,
    TextSize = 8,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

makeButton(catElement, "Refresh Progress", function()
    if AutoQuestModule then
        elementLabel.Text = AutoQuestModule.GetQuestInfo("ElementQuest")
        SendNotification("Refresh", "Progress updated!", 2)
    end
end)

makeToggle(catElement, "Auto Teleport", function(on)
    if AutoQuestModule then
        if on then
            AutoQuestModule.StartAutoTeleport("ElementQuest")
            SendNotification("Auto Teleport", "Element Quest Auto Teleport AKTIF!", 2)
        else
            AutoQuestModule.StopAutoTeleport()
            SendNotification("Auto Teleport", "Element Quest Auto Teleport DIMATIKAN!", 2)
        end
        elementLabel.Text = AutoQuestModule.GetQuestInfo("ElementQuest")
    end
end)

-- Real-time Quest Updates
task.spawn(function()
    while true do
        task.wait(2)
        pcall(function()
            if deepSeaLabel and deepSeaLabel.Parent and AutoQuestModule then
                local questInfo = AutoQuestModule.GetQuestInfo("DeepSeaQuest")
                if questInfo then
                    deepSeaLabel.Text = questInfo
                end
            end
        end)
        pcall(function()
            if elementLabel and elementLabel.Parent and AutoQuestModule then
                local questInfo = AutoQuestModule.GetQuestInfo("ElementQuest")
                if questInfo then
                    elementLabel.Text = questInfo
                end
            end
        end)
    end
end)

-- Temple Quest Category
local catTemple = makeCategory(questPage, "Sacred Temple", "‚õ©Ô∏è")

local templeProgressFrame = new("Frame", {
    Parent = catTemple,
    Size = UDim2.new(1, 0, 0, 120),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = templeProgressFrame, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = templeProgressFrame, Color = colors.border, Thickness = 1, Transparency = 0.7})

local templeLabel = new("TextLabel", {
    Parent = templeProgressFrame,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "Loading Temple Status...",
    Font = Enum.Font.GothamBold,
    TextSize = 8,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

local function BuildTempleText(status)
    return "Sacred Temple Progress:\n\n" ..
           "- Crescent Artifact: " .. (status["Crescent Artifact"] and "‚úîÔ∏è" or "‚ùå") .. "\n" ..
           "- Arrow Artifact: " .. (status["Arrow Artifact"] and "‚úîÔ∏è" or "‚ùå") .. "\n" ..
           "- Diamond Artifact: " .. (status["Diamond Artifact"] and "‚úîÔ∏è" or "‚ùå") .. "\n" ..
           "- Hourglass Artifact: " .. (status["Hourglass Diamond Artifact"] and "‚úîÔ∏è" or "‚ùå")
end

if TempleDataReader then
    TempleDataReader.OnTempleUpdate(function(status)
        templeLabel.Text = BuildTempleText(status)
    end)
end

makeButton(catTemple, "Refresh Progress", function()
    if TempleDataReader then
        local status = TempleDataReader.GetTempleStatus()
        templeLabel.Text = BuildTempleText(status)
        SendNotification("Refresh", "Temple progress updated!", 2)
    end
end)

makeToggle(catTemple, "Auto Open Sacred Temple", function(on)
    if AutoTemple then
        if on then
            AutoTemple.Start()
            SendNotification("Temple", "Auto Sacred Temple AKTIF!", 2)
        else
            AutoTemple.Stop()
            SendNotification("Temple", "Auto Sacred Temple DIMATIKAN!", 2)
        end
        
        if TempleDataReader then
            templeLabel.Text = BuildTempleText(TempleDataReader.GetTempleStatus())
        end
    end
end)

-- SHOP PAGE
local AutoSell = GetModule("AutoSell")
local AutoSellTimer = GetModule("AutoSellTimer")
local MerchantSystem = GetModule("MerchantSystem")
local RemoteBuyer = GetModule("RemoteBuyer")
local AutoBuyWeather = GetModule("AutoBuyWeather")

-- Sell All Category
local catSell = makeCategory(shopPage, "Sell All", "üí∞")

makeButton(catSell, "Sell All Now", function()
    if AutoSell and AutoSell.SellOnce then
        AutoSell.SellOnce()
    end
end)

-- Auto Sell Timer Category
local catTimer = makeCategory(shopPage, "Auto Sell Timer", "‚è∞")

makeInput(catTimer, "Sell Interval (seconds)", 5, function(value)
    if AutoSellTimer then
        AutoSellTimer.SetInterval(value)
    end
end)

makeToggle(catTimer, "Auto Sell Timer", function(on)
    if AutoSellTimer then
        if on then
            AutoSellTimer.Start(AutoSellTimer.Interval)
        else
            AutoSellTimer.Stop()
        end
    end
end)

-- Auto Buy Weather Category
local catWeather = makeCategory(shopPage, "Auto Buy Weather", "üå¶Ô∏è")

if AutoBuyWeather then
    local weatherCheckboxContainer = new("Frame", {
        Parent = catWeather,
        Size = UDim2.new(1, 0, 0, 210),
        BackgroundColor3 = colors.bg2,
        BackgroundTransparency = 0.8,
        BorderSizePixel = 0,
        ZIndex = 7
    })
    new("UICorner", {Parent = weatherCheckboxContainer, CornerRadius = UDim.new(0, 8)})
    new("UIStroke", {Parent = weatherCheckboxContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})
    
    local selectedWeathers = {}
    local checkboxes = {}
    
    local function createWeatherCheckbox(parent, weatherName, yPos)
        local checkboxRow = new("Frame", {
            Parent = parent,
            Size = UDim2.new(1, -20, 0, 30),
            Position = UDim2.new(0, 10, 0, yPos),
            BackgroundColor3 = colors.bg3,
            BackgroundTransparency = 0.8,
            BorderSizePixel = 0,
            ZIndex = 8
        })
        new("UICorner", {Parent = checkboxRow, CornerRadius = UDim.new(0, 6)})
        
        local checkbox = new("TextButton", {
            Parent = checkboxRow,
            Size = UDim2.new(0, 24, 0, 24),
            Position = UDim2.new(0, 8, 0, 3),
            BackgroundColor3 = colors.bg1,
            BackgroundTransparency = 0.4,
            BorderSizePixel = 0,
            Text = "",
            ZIndex = 9
        })
        new("UICorner", {Parent = checkbox, CornerRadius = UDim.new(0, 4)})
        
        local checkmark = new("TextLabel", {
            Parent = checkbox,
            Size = UDim2.new(1, 0, 1, 0),
            BackgroundTransparency = 1,
            Text = "‚úì",
            Font = Enum.Font.GothamBold,
            TextSize = 18,
            TextColor3 = colors.text,
            Visible = false,
            ZIndex = 10
        })
        
        local label = new("TextLabel", {
            Parent = checkboxRow,
            Size = UDim2.new(1, -45, 1, 0),
            Position = UDim2.new(0, 40, 0, 0),
            BackgroundTransparency = 1,
            Text = weatherName,
            Font = Enum.Font.GothamBold,
            TextSize = 9,
            TextColor3 = colors.text,
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 9
        })
        
        local isSelected = false
        checkbox.MouseButton1Click:Connect(function()
            isSelected = not isSelected
            checkmark.Visible = isSelected
            
            if isSelected then
                table.insert(selectedWeathers, weatherName)
                TweenService:Create(checkbox, TweenInfo.new(0.25), {BackgroundColor3 = colors.primary}):Play()
            else
                local idx = table.find(selectedWeathers, weatherName)
                if idx then table.remove(selectedWeathers, idx) end
                TweenService:Create(checkbox, TweenInfo.new(0.25), {BackgroundColor3 = colors.bg1}):Play()
            end
            
            if AutoBuyWeather then
                AutoBuyWeather.SetSelected(selectedWeathers)
            end
        end)
        
        return {checkbox = checkbox, checkmark = checkmark, isSelected = function() return isSelected end}
    end
    
    for i, weather in ipairs(AutoBuyWeather.AllWeathers) do
        checkboxes[weather] = createWeatherCheckbox(weatherCheckboxContainer, weather, (i - 1) * 33 + 5)
    end
    
    makeToggle(catWeather, "Enable Auto Weather", function(on)
        if on then
            if #selectedWeathers == 0 then
                SendNotification("Auto Weather", "Pilih minimal 1 cuaca!", 3)
                return
            end
            AutoBuyWeather.Start()
        else
            AutoBuyWeather.Stop()
        end
    end)
end

-- Merchant Category
local catMerchant = makeCategory(shopPage, "Remote Merchant", "üõí")

makeButton(catMerchant, "Open Merchant", function()
    if MerchantSystem then
        MerchantSystem.Open()
        SendNotification("Merchant", "Merchant dibuka!", 3)
    end
end)

makeButton(catMerchant, "Close Merchant", function()
    if MerchantSystem then
        MerchantSystem.Close()
        SendNotification("Merchant", "Merchant ditutup!", 3)
    end
end)

-- Buy Rod Category
local catRod = makeCategory(shopPage, "Buy Rod", "üé£")

if RemoteBuyer then
    local RodData = {
        ["Chrome Rod"] = {id = 7, price = 437000},
        ["Lucky Rod"] = {id = 4, price = 15000},
        ["Starter Rod"] = {id = 1, price = 50},
        ["Carbon Rod"] = {id = 76, price = 750},
        ["Astral Rod"] = {id = 5, price = 1000000},
    }
    
    local RodList = {}
    local RodMap = {}
    for rodName, info in pairs(RodData) do
        local display = rodName .. " (" .. tostring(info.price) .. ")"
        table.insert(RodList, display)
        RodMap[display] = rodName
    end
    
    local SelectedRod = nil
    
    makeDropdown(catRod, "Select Rod", "üé£", RodList, function(displayName)
        SelectedRod = RodMap[displayName]
        SendNotification("Rod Selected", "Rod: " .. SelectedRod, 3)
    end, "RodDropdown")
    
    makeButton(catRod, "BUY SELECTED ROD", function()
        if SelectedRod then
            RemoteBuyer.BuyRod(RodData[SelectedRod].id)
            SendNotification("Buy Rod", "Membeli " .. SelectedRod .. "...", 3)
        else
            SendNotification("Buy Rod", "Pilih rod dulu!", 3)
        end
    end)
end

-- Buy Bait Category
local catBait = makeCategory(shopPage, "Buy Bait", "ü™±")

if RemoteBuyer then
    local BaitData = {
        ["Chroma Bait"] = {id = 6, price = 290000},
        ["Luck Bait"] = {id = 2, price = 1000},
        ["Midnight Bait"] = {id = 3, price = 3000},
    }
    
    local BaitList = {}
    local BaitMap = {}
    for baitName, info in pairs(BaitData) do
        local display = baitName .. " (" .. tostring(info.price) .. ")"
        table.insert(BaitList, display)
        BaitMap[display] = baitName
    end
    
    local SelectedBait = nil
    
    makeDropdown(catBait, "Select Bait", "ü™±", BaitList, function(displayName)
        SelectedBait = BaitMap[displayName]
        SendNotification("Bait Selected", "Bait: " .. SelectedBait, 3)
    end, "BaitDropdown")
    
    makeButton(catBait, "BUY SELECTED BAIT", function()
        if SelectedBait then
            RemoteBuyer.BuyBait(BaitData[SelectedBait].id)
            SendNotification("Buy Bait", "Membeli " .. SelectedBait .. "...", 3)
        else
            SendNotification("Buy Bait", "Pilih bait dulu!", 3)
        end
    end)
end

-- ‚è∏Ô∏è BAGIAN 5/6 SELESAI (PART 1)
-- Lanjutan Webhook & HideStats di update berikutnya...

-- ============================================
-- WEBHOOK PAGE - FIXED WITH PROPER MODULE LOADING
-- ============================================
local WebhookModule = GetModule("Webhook")

local catWebhook = makeCategory(webhookPage, "Discord Webhook Fish Caught", "üîî")

-- Info Container
local webhookInfoContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 85),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = webhookInfoContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = webhookInfoContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local webhookInfoText = new("TextLabel", {
    Parent = webhookInfoContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "üìå WEBHOOK INFO\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nKirim notifikasi Discord saat menangkap ikan!\nMasukkan Discord Webhook URL di bawah.",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

-- Webhook URL Input
local currentWebhookURL = ""
local webhookInputContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 80),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = webhookInputContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = webhookInputContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local webhookLabel = new("TextLabel", {
    Parent = webhookInputContainer,
    Size = UDim2.new(1, -20, 0, 22),
    Position = UDim2.new(0, 10, 0, 8),
    BackgroundTransparency = 1,
    Text = "Discord Webhook URL",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 8
})

local webhookTextBox = new("TextBox", {
    Parent = webhookInputContainer,
    Size = UDim2.new(1, -20, 0, 38),
    Position = UDim2.new(0, 10, 0, 35),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "",
    PlaceholderText = "https://discord.com/api/webhooks/...",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 8
})
new("UICorner", {Parent = webhookTextBox, CornerRadius = UDim.new(0, 6)})
new("UIStroke", {Parent = webhookTextBox, Color = colors.border, Thickness = 1, Transparency = 0.9})
new("UIPadding", {Parent = webhookTextBox, PaddingLeft = UDim.new(0, 8), PaddingRight = UDim.new(0, 8)})

webhookTextBox.FocusLost:Connect(function()
    currentWebhookURL = webhookTextBox.Text
    if WebhookModule and currentWebhookURL ~= "" then
        pcall(function()
            WebhookModule:SetWebhookURL(currentWebhookURL)
        end)
        SendNotification("Webhook", "Webhook URL tersimpan!", 2)
    end
end)

-- Discord User ID Input
local currentDiscordID = ""
local discordIDContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 80),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = discordIDContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = discordIDContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local discordIDLabel = new("TextLabel", {
    Parent = discordIDContainer,
    Size = UDim2.new(1, -20, 0, 22),
    Position = UDim2.new(0, 10, 0, 8),
    BackgroundTransparency = 1,
    Text = "Discord User ID (Optional - untuk mention)",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 8
})

local discordIDTextBox = new("TextBox", {
    Parent = discordIDContainer,
    Size = UDim2.new(1, -20, 0, 38),
    Position = UDim2.new(0, 10, 0, 35),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "",
    PlaceholderText = "123456789012345678",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 8
})
new("UICorner", {Parent = discordIDTextBox, CornerRadius = UDim.new(0, 6)})
new("UIStroke", {Parent = discordIDTextBox, Color = colors.border, Thickness = 1, Transparency = 0.9})
new("UIPadding", {Parent = discordIDTextBox, PaddingLeft = UDim.new(0, 8), PaddingRight = UDim.new(0, 8)})

discordIDTextBox.FocusLost:Connect(function()
    currentDiscordID = discordIDTextBox.Text
    if WebhookModule then
        pcall(function()
            WebhookModule:SetDiscordUserID(currentDiscordID)
        end)
        if currentDiscordID ~= "" then
            SendNotification("Webhook", "Discord ID tersimpan!", 2)
        end
    end
end)

-- Rarity Filter
local rarityInfoContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 80),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = rarityInfoContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = rarityInfoContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local rarityInfoText = new("TextLabel", {
    Parent = rarityInfoContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "RARITY FILTER\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nPilih rarity ikan yang akan dikirim ke Discord.\nKlik pada rarity untuk toggle ON/OFF.\nKosongkan untuk kirim semua rarity.",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

local AllRarities = {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic", "SECRET"}
local selectedRarities = {}

local checkboxContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 240),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = checkboxContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = checkboxContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local rarityColors = {
    Common = Color3.fromRGB(150, 150, 150),
    Uncommon = Color3.fromRGB(85, 255, 85),
    Rare = Color3.fromRGB(85, 170, 255),
    Epic = Color3.fromRGB(170, 85, 255),
    Legendary = Color3.fromRGB(255, 200, 85),
    Mythic = Color3.fromRGB(255, 85, 85),
    SECRET = Color3.fromRGB(85, 255, 220)
}

local function createRarityCheckbox(parent, rarityName, yPos)
    local checkboxRow = new("Frame", {
        Parent = parent,
        Size = UDim2.new(1, -20, 0, 30),
        Position = UDim2.new(0, 10, 0, yPos),
        BackgroundColor3 = colors.bg3,
        BackgroundTransparency = 0.8,
        BorderSizePixel = 0,
        ZIndex = 8
    })
    new("UICorner", {Parent = checkboxRow, CornerRadius = UDim.new(0, 6)})
    
    local checkbox = new("TextButton", {
        Parent = checkboxRow,
        Size = UDim2.new(0, 24, 0, 24),
        Position = UDim2.new(0, 8, 0, 3),
        BackgroundColor3 = colors.bg1,
        BackgroundTransparency = 0.4,
        BorderSizePixel = 0,
        Text = "",
        ZIndex = 9
    })
    new("UICorner", {Parent = checkbox, CornerRadius = UDim.new(0, 4)})
    
    local checkboxStroke = new("UIStroke", {
        Parent = checkbox,
        Color = rarityColors[rarityName] or colors.primary,
        Thickness = 2,
        Transparency = 0.7
    })
    
    local checkmark = new("TextLabel", {
        Parent = checkbox,
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundTransparency = 1,
        Text = "‚úì",
        Font = Enum.Font.GothamBold,
        TextSize = 18,
        TextColor3 = colors.text,
        Visible = false,
        ZIndex = 10
    })
    
    local label = new("TextLabel", {
        Parent = checkboxRow,
        Size = UDim2.new(1, -45, 1, 0),
        Position = UDim2.new(0, 40, 0, 0),
        BackgroundTransparency = 1,
        Text = rarityName,
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        TextTransparency = 0.1,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 9
    })
    
    local isSelected = false
    
    checkbox.MouseButton1Click:Connect(function()
        isSelected = not isSelected
        checkmark.Visible = isSelected
        
        if isSelected then
            if not table.find(selectedRarities, rarityName) then
                table.insert(selectedRarities, rarityName)
            end
            TweenService:Create(checkbox, TweenInfo.new(0.25), {
                BackgroundColor3 = rarityColors[rarityName],
                BackgroundTransparency = 0.2
            }):Play()
        else
            local idx = table.find(selectedRarities, rarityName)
            if idx then table.remove(selectedRarities, idx) end
            TweenService:Create(checkbox, TweenInfo.new(0.25), {
                BackgroundColor3 = colors.bg1,
                BackgroundTransparency = 0.4
            }):Play()
        end
        
        if WebhookModule then
            pcall(function()
                WebhookModule:SetEnabledRarities(selectedRarities)
            end)
        end
    end)
    
    return {checkbox = checkbox, checkmark = checkmark, isSelected = function() return isSelected end, setSelected = function(val)
        if isSelected ~= val then
            checkbox.MouseButton1Click:Fire()
        end
    end}
end

local checkboxes = {}
for i, rarityName in ipairs(AllRarities) do
    checkboxes[rarityName] = createRarityCheckbox(checkboxContainer, rarityName, (i - 1) * 33 + 5)
end

makeButton(catWebhook, "‚úì Select All Rarities", function()
    for _, rarity in ipairs(AllRarities) do
        if checkboxes[rarity] and not checkboxes[rarity].isSelected() then
            checkboxes[rarity].setSelected(true)
        end
    end
    SendNotification("Rarity Filter", "All rarities selected!", 2)
end)

makeButton(catWebhook, "‚úó Clear All Selections", function()
    for _, rarity in ipairs(AllRarities) do
        if checkboxes[rarity] and checkboxes[rarity].isSelected() then
            checkboxes[rarity].setSelected(false)
        end
    end
    SendNotification("Rarity Filter", "Filter cleared!", 2)
end)

makeButton(catWebhook, "‚≠ê Select High Rarity Only", function()
    local highRarities = {"Epic", "Legendary", "Mythic", "SECRET"}
    for _, rarity in ipairs(AllRarities) do
        if checkboxes[rarity] then
            local shouldSelect = table.find(highRarities, rarity) ~= nil
            if checkboxes[rarity].isSelected() ~= shouldSelect then
                checkboxes[rarity].setSelected(shouldSelect)
            end
        end
    end
    SendNotification("Rarity Filter", "High rarities selected!", 3)
end)

makeToggle(catWebhook, "Enable Webhook", function(on)
    if not WebhookModule then
        SendNotification("Error", "Webhook module tidak tersedia!", 3)
        return
    end
    
    if on then
        if currentWebhookURL == "" then
            SendNotification("Error", "Masukkan Webhook URL dulu!", 3)
            return
        end
        
        pcall(function()
            WebhookModule:SetWebhookURL(currentWebhookURL)
            if currentDiscordID ~= "" then
                WebhookModule:SetDiscordUserID(currentDiscordID)
            end
            WebhookModule:SetEnabledRarities(selectedRarities)
            WebhookModule:Start()
        end)
        
        local filterInfo = #selectedRarities > 0 
            and (" (Filter: " .. table.concat(selectedRarities, ", ") .. ")")
            or " (All rarities)"
        SendNotification("Webhook", "Webhook logging aktif!" .. filterInfo, 4)
    else
        pcall(function()
            WebhookModule:Stop()
        end)
        SendNotification("Webhook", "Webhook logging dinonaktifkan.", 3)
    end
end)

makeButton(catWebhook, "Test Webhook Connection", function()
    if currentWebhookURL == "" then
        SendNotification("Error", "Masukkan Webhook URL dulu!", 3)
        return
    end
    
    local HttpService = game:GetService("HttpService")
    local requestFunc = (syn and syn.request) or (http and http.request) or http_request or request
    
    if requestFunc then
        local filterText = #selectedRarities > 0 
            and ("\n**Active Filter:** " .. table.concat(selectedRarities, ", "))
            or "\n**Filter:** All rarities enabled"
        
        local testPayload = {
            embeds = {{
                title = "üé£ Webhook Test Successful!",
                description = "Your Discord webhook is working correctly!\n\nLynx GUI is ready to send fish notifications." .. filterText,
                color = 3447003,
                timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
            }}
        }
        
        local success = pcall(function()
            requestFunc({
                Url = currentWebhookURL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = HttpService:JSONEncode(testPayload)
            })
        end)
        
        if success then
            SendNotification("Success", "Test message sent! Check Discord.", 4)
        else
            SendNotification("Error", "Test failed!", 3)
        end
    else
        SendNotification("Error", "HTTP request tidak didukung!", 3)
    end
end)

-- Status Display
local statusContainer = new("Frame", {
    Parent = catWebhook,
    Size = UDim2.new(1, 0, 0, 50),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = statusContainer, CornerRadius = UDim.new(0, 8)})

local statusText = new("TextLabel", {
    Parent = statusContainer,
    Size = UDim2.new(1, -20, 1, 0),
    Position = UDim2.new(0, 10, 0, 0),
    BackgroundTransparency = 1,
    Text = "Status: Ready",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.warning,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 8
})

task.spawn(function()
    while true do
        task.wait(1)
        pcall(function()
            if WebhookModule and statusText and statusText.Parent then
                local isRunning = false
                pcall(function()
                    isRunning = WebhookModule:IsRunning()
                end)
                
                if isRunning then
                    statusText.TextColor3 = colors.success
                    local filterInfo = #selectedRarities > 0 
                        and (" | " .. #selectedRarities .. " rarities")
                        or " | All rarities"
                    statusText.Text = "Status: üü¢ Active & Monitoring" .. filterInfo
                else
                    statusText.TextColor3 = colors.warning
                    statusText.Text = "Status: üü° Ready (Not Active)"
                end
            elseif statusText and statusText.Parent then
                statusText.TextColor3 = colors.danger
                statusText.Text = "Status: üî¥ Module Not Loaded"
            end
        end)
    end
end)

-- ‚è∏Ô∏è BAGIAN 5/6 SELESAI
-- Tunggu perintah "lanjut" untuk melanjutkan ke bagian 6/6 (FINAL)

-- ============================================
-- BAGIAN 6/6: HideStats, Camera, Settings, Info Pages + Controls & Animations (FINAL)
-- ============================================

-- CAMERA VIEW PAGE
local FreecamModule = GetModule("FreecamModule")
local UnlimitedZoomModule = GetModule("UnlimitedZoomModule")

if FreecamModule then
    FreecamModule.SetMainGuiName("LynxGUI_Galaxy")
end

-- Unlimited Zoom Category
local catZoom = makeCategory(cameraViewPage, "Unlimited Zoom", "üî≠")

makeToggle(catZoom, "Enable Unlimited Zoom", function(on)
    if UnlimitedZoomModule then
        if on then
            local success = UnlimitedZoomModule.Enable()
            if success then
                SendNotification("Zoom", "Unlimited Zoom aktif!", 4)
            end
        else
            UnlimitedZoomModule.Disable()
            SendNotification("Zoom", "Unlimited Zoom nonaktif.", 3)
        end
    end
end)

-- Freecam Category
local catFreecam = makeCategory(cameraViewPage, "Freecam Camera", "üì∑")

if not isMobile then
    local noteContainer = new("Frame", {
        Parent = catFreecam,
        Size = UDim2.new(1, 0, 0, 70),
        BackgroundColor3 = colors.bg3,
        BackgroundTransparency = 0.6,
        BorderSizePixel = 0,
        ZIndex = 7
    })
    new("UICorner", {Parent = noteContainer, CornerRadius = UDim.new(0, 8)})
    
    local noteText = new("TextLabel", {
        Parent = noteContainer,
        Size = UDim2.new(1, -24, 1, -24),
        Position = UDim2.new(0, 12, 0, 12),
        BackgroundTransparency = 1,
        Text = "üìå FREECAM CONTROLS (PC)\n1. Toggle freecam on\n2. Press F3 to activate\n3. WASD - Move | Mouse - Rotate",
        Font = Enum.Font.GothamBold,
        TextSize = 9,
        TextColor3 = colors.text,
        TextWrapped = true,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextYAlignment = Enum.TextYAlignment.Top,
        ZIndex = 8
    })
end

makeToggle(catFreecam, "Enable Freecam", function(on)
    if FreecamModule then
        if on then
            if not isMobile then
                FreecamModule.EnableF3Keybind(true)
                SendNotification("Freecam", "Freecam siap! Tekan F3.", 4)
            else
                FreecamModule.Start()
                SendNotification("Freecam", "Freecam aktif!", 4)
            end
        else
            FreecamModule.EnableF3Keybind(false)
            SendNotification("Freecam", "Freecam nonaktif.", 3)
        end
    end
end)

makeInput(catFreecam, "Movement Speed", 50, function(value)
    if FreecamModule then
        FreecamModule.SetSpeed(value)
    end
end)

makeInput(catFreecam, "Mouse Sensitivity", 0.3, function(value)
    if FreecamModule then
        FreecamModule.SetSensitivity(value)
    end
end)

-- SETTINGS PAGE
local AntiAFK = GetModule("AntiAFK")
local UnlockFPS = GetModule("UnlockFPS")
local FPSBooster = GetModule("FPSBooster")
local HideStats = GetModule("HideStats")

-- Anti-AFK Category
local catAFK = makeCategory(settingsPage, "Anti-AFK Protection", "üßç‚Äç‚ôÇÔ∏è")

makeToggle(catAFK, "Enable Anti-AFK", function(on)
    if AntiAFK then
        if on then AntiAFK.Start() else AntiAFK.Stop() end
    end
end)

-- Server Features Category
local catServer = makeCategory(settingsPage, "Server Features", "üîÑ")

makeButton(catServer, "Rejoin Server", function()
    local TeleportService = game:GetService("TeleportService")
    pcall(function()
        TeleportService:Teleport(game.PlaceId, localPlayer)
    end)
    SendNotification("Rejoin", "Teleporting to new server...", 3)
end)

-- FPS Booster Category
local catBoost = makeCategory(settingsPage, "FPS Booster", "‚ö°")

makeToggle(catBoost, "Enable FPS Booster", function(on)
    if FPSBooster then
        if on then
            FPSBooster.Enable()
            SendNotification("FPS Booster", "FPS Booster diaktifkan!", 3)
        else
            FPSBooster.Disable()
            SendNotification("FPS Booster", "FPS Booster dimatikan.", 3)
        end
    end
end)

-- FPS Unlocker Category
local catFPS = makeCategory(settingsPage, "FPS Unlocker", "üéûÔ∏è")

makeDropdown(catFPS, "Select FPS Limit", "‚öôÔ∏è", {"60 FPS", "90 FPS", "120 FPS", "240 FPS"}, function(selected)
    local fpsValue = tonumber(selected:match("%d+"))
    if fpsValue and UnlockFPS then
        UnlockFPS.SetCap(fpsValue)
    end
end, "FPSDropdown")

-- ============================================
-- HIDE STATS CATEGORY - FIXED WITH PROPER MODULE LOADING
-- ============================================

local catHideStats = makeCategory(settingsPage, "Hide Stats Identifier", "üë§")

-- INFO CONTAINER
local hideStatsInfoContainer = new("Frame", {
    Parent = catHideStats,
    Size = UDim2.new(1, 0, 0, 85),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = hideStatsInfoContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {
    Parent = hideStatsInfoContainer,
    Color = colors.border,
    Thickness = 1,
    Transparency = 0.95
})

local hideStatsInfoText = new("TextLabel", {
    Parent = hideStatsInfoContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "üìå HIDE STATS INFO\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nSembunyikan nama dan level asli Anda!\nMasukkan fake name & level di bawah.",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 8
})

-- FAKE NAME INPUT
local currentFakeName = "Guest"

local fakeNameContainer = new("Frame", {
    Parent = catHideStats,
    Size = UDim2.new(1, 0, 0, 80),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = fakeNameContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = fakeNameContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local fakeNameLabel = new("TextLabel", {
    Parent = fakeNameContainer,
    Size = UDim2.new(1, -20, 0, 22),
    Position = UDim2.new(0, 10, 0, 8),
    BackgroundTransparency = 1,
    Text = "Fake Name",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 8
})

local fakeNameTextBox = new("TextBox", {
    Parent = fakeNameContainer,
    Size = UDim2.new(1, -20, 0, 38),
    Position = UDim2.new(0, 10, 0, 35),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "",
    PlaceholderText = "Enter fake name...",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 8
})
new("UICorner", {Parent = fakeNameTextBox, CornerRadius = UDim.new(0, 6)})
new("UIStroke", {Parent = fakeNameTextBox, Color = colors.border, Thickness = 1, Transparency = 0.9})
new("UIPadding", {Parent = fakeNameTextBox, PaddingLeft = UDim.new(0, 8), PaddingRight = UDim.new(0, 8)})

fakeNameTextBox.FocusLost:Connect(function()
    local value = fakeNameTextBox.Text
    if value and value ~= "" then
        currentFakeName = value
        
        if HideStats then
            local success, err = pcall(function()
                HideStats.SetFakeName(value)
            end)
            
            if success then
                SendNotification("Hide Stats", "Fake name set: " .. value, 2)
                print("‚úÖ Fake name updated:", value)
            else
                warn("‚ùå Failed to set fake name:", err)
                SendNotification("Error", "Gagal set fake name!", 2)
            end
        end
    end
end)

-- FAKE LEVEL INPUT
local currentFakeLevel = "1"

local fakeLevelContainer = new("Frame", {
    Parent = catHideStats,
    Size = UDim2.new(1, 0, 0, 80),
    BackgroundColor3 = colors.bg2,
    BackgroundTransparency = 0.8,
    BorderSizePixel = 0,
    ZIndex = 7
})
new("UICorner", {Parent = fakeLevelContainer, CornerRadius = UDim.new(0, 8)})
new("UIStroke", {Parent = fakeLevelContainer, Color = colors.border, Thickness = 1, Transparency = 0.95})

local fakeLevelLabel = new("TextLabel", {
    Parent = fakeLevelContainer,
    Size = UDim2.new(1, -20, 0, 22),
    Position = UDim2.new(0, 10, 0, 8),
    BackgroundTransparency = 1,
    Text = "Fake Level",
    Font = Enum.Font.GothamBold,
    TextSize = 11,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 8
})

local fakeLevelTextBox = new("TextBox", {
    Parent = fakeLevelContainer,
    Size = UDim2.new(1, -20, 0, 38),
    Position = UDim2.new(0, 10, 0, 35),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    Text = "",
    PlaceholderText = "Enter fake level...",
    Font = Enum.Font.Gotham,
    TextSize = 9,
    TextColor3 = colors.text,
    TextTransparency = 0.2,
    PlaceholderColor3 = colors.textDimmer,
    TextXAlignment = Enum.TextXAlignment.Left,
    ClearTextOnFocus = false,
    ZIndex = 8
})
new("UICorner", {Parent = fakeLevelTextBox, CornerRadius = UDim.new(0, 6)})
new("UIStroke", {Parent = fakeLevelTextBox, Color = colors.border, Thickness = 1, Transparency = 0.9})
new("UIPadding", {Parent = fakeLevelTextBox, PaddingLeft = UDim.new(0, 8), PaddingRight = UDim.new(0, 8)})

fakeLevelTextBox.FocusLost:Connect(function()
    local value = fakeLevelTextBox.Text
    if value and value ~= "" then
        currentFakeLevel = value
        
        if HideStats then
            local success, err = pcall(function()
                HideStats.SetFakeLevel(value)
            end)
            
            if success then
                SendNotification("Hide Stats", "Fake level set: " .. value, 2)
                print("‚úÖ Fake level updated:", value)
            else
                warn("‚ùå Failed to set fake level:", err)
                SendNotification("Error", "Gagal set fake level!", 2)
            end
        end
    end
end)

-- TOGGLE ENABLE HIDE STATS
makeToggle(catHideStats, "‚ö° Enable Hide Stats", function(on)
    if not HideStats then
        SendNotification("Error", "Hide Stats module tidak tersedia!", 3)
        warn("‚ùå HideStats module not loaded")
        return
    end
    
    if on then
        local success, err = pcall(function()
            -- Set fake name terlebih dahulu
            if currentFakeName ~= "" and currentFakeName ~= "Guest" then
                HideStats.SetFakeName(currentFakeName)
                print("üîß Setting fake name:", currentFakeName)
            end
            
            -- Set fake level
            if currentFakeLevel ~= "" and currentFakeLevel ~= "1" then
                HideStats.SetFakeLevel(currentFakeLevel)
                print("üîß Setting fake level:", currentFakeLevel)
            end
            
            -- Enable Hide Stats
            HideStats.Enable()
            print("üîß Enabling Hide Stats...")
        end)
        
        if success then
            SendNotification("Hide Stats", "‚úì Hide Stats aktif!\nName: " .. currentFakeName .. " | Level: " .. currentFakeLevel, 4)
            print("‚úÖ Hide Stats enabled successfully!")
            print("   - Fake Name:", currentFakeName)
            print("   - Fake Level:", currentFakeLevel)
        else
            SendNotification("Error", "Gagal enable Hide Stats: " .. tostring(err), 3)
            warn("‚ùå Hide Stats enable failed:", err)
        end
    else
        local success, err = pcall(function()
            HideStats.Disable()
        end)
        
        if success then
            SendNotification("Hide Stats", "‚úì Hide Stats dimatikan!", 3)
            print("‚èπ Hide Stats disabled")
        else
            SendNotification("Error", "Gagal disable Hide Stats: " .. tostring(err), 3)
            warn("‚ùå Hide Stats disable failed:", err)
        end
    end
end)

-- INFO PAGE
local infoContainer = new("Frame", {
    Parent = infoPage,
    Size = UDim2.new(1, 0, 0, 200),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = infoContainer, CornerRadius = UDim.new(0, 8)})

local infoText = new("TextLabel", {
    Parent = infoContainer,
    Size = UDim2.new(1, -24, 0, 100),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "# LynX v2.3\nFree Not For Sale\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nCreated by Beee\nRefined Edition 2024",
    Font = Enum.Font.Gotham,
    TextSize = 10,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 7
})

local linkButton = new("TextButton", {
    Parent = infoContainer,
    Size = UDim2.new(1, -24, 0, 25),
    Position = UDim2.new(0, 12, 0, 115),
    BackgroundTransparency = 1,
    Text = "üîó Discord: https://discord.gg/6Rpvm2gQ",
    Font = Enum.Font.GothamBold,
    TextSize = 10,
    TextColor3 = Color3.fromRGB(88, 101, 242),
    TextXAlignment = Enum.TextXAlignment.Left,
    ZIndex = 7
})

linkButton.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/6Rpvm2gQ")
    linkButton.Text = "‚úÖ Link copied to clipboard!"
    task.wait(2)
    linkButton.Text = "üîó Discord: https://discord.gg/6Rpvm2gQ"
end)

-- Module Status Display
local moduleStatusContainer = new("Frame", {
    Parent = infoPage,
    Size = UDim2.new(1, 0, 0, 150),
    BackgroundColor3 = colors.bg3,
    BackgroundTransparency = 0.6,
    BorderSizePixel = 0,
    ZIndex = 6
})
new("UICorner", {Parent = moduleStatusContainer, CornerRadius = UDim.new(0, 8)})

local moduleStatusText = new("TextLabel", {
    Parent = moduleStatusContainer,
    Size = UDim2.new(1, -24, 1, -24),
    Position = UDim2.new(0, 12, 0, 12),
    BackgroundTransparency = 1,
    Text = "Loading module status...",
    Font = Enum.Font.Gotham,
    TextSize = 8,
    TextColor3 = colors.text,
    TextWrapped = true,
    TextXAlignment = Enum.TextXAlignment.Left,
    TextYAlignment = Enum.TextYAlignment.Top,
    ZIndex = 7
})

task.spawn(function()
    task.wait(0.5)
    pcall(function()
        if moduleStatusText and moduleStatusText.Parent then
            local statusText = "üì¶ MODULE STATUS (" .. loadedModules .. "/" .. totalModules .. " loaded)\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
            
            -- Sort modules for better readability
            local sortedModules = {}
            for name, status in pairs(ModuleStatus) do
                table.insert(sortedModules, {name = name, status = status})
            end
            table.sort(sortedModules, function(a, b) return a.name < b.name end)
            
            for _, moduleInfo in ipairs(sortedModules) do
                statusText = statusText .. moduleInfo.status .. " " .. moduleInfo.name .. "\n"
            end
            
            moduleStatusText.Text = statusText
        end
    end)
end)

-- ============================================
-- MINIMIZE SYSTEM
-- ============================================
local minimized = false
local icon
local savedIconPos = UDim2.new(0, 20, 0, 100)

local function createMinimizedIcon()
    if icon then return end
    
    icon = new("ImageLabel", {
        Parent = gui,
        Size = UDim2.new(0, 50, 0, 50),
        Position = savedIconPos,
        BackgroundColor3 = colors.bg2,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        Image = "rbxassetid://91891350821146",
        ScaleType = Enum.ScaleType.Fit,
        ZIndex = 100
    })
    new("UICorner", {Parent = icon, CornerRadius = UDim.new(0, 10)})
    
    local dragging, dragStart, startPos, dragMoved = false, nil, nil, false
    
    icon.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging, dragMoved, dragStart, startPos = true, false, input.Position, icon.Position
        end
    end)
    
    icon.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            if math.sqrt(delta.X^2 + delta.Y^2) > 5 then dragMoved = true end
            local newPos = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
            icon.Position = newPos
        end
    end)
    
    icon.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            if dragging then
                dragging = false
                savedIconPos = icon.Position
                if not dragMoved then
                    bringToFront()
                    win.Visible = true
                    TweenService:Create(win, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
                        Size = windowSize,
                        Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2)
                    }):Play()
                    if icon then icon:Destroy() icon = nil end
                    minimized = false
                end
            end
        end
    end)
end

btnMinHeader.MouseButton1Click:Connect(function()
    if not minimized then
        TweenService:Create(win, TweenInfo.new(0.35, Enum.EasingStyle.Back, Enum.EasingDirection.In), {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        }):Play()
        task.wait(0.35)
        win.Visible = false
        createMinimizedIcon()
        minimized = true
    end
end)

-- ============================================
-- DRAGGING SYSTEM
-- ============================================
local dragging, dragStart, startPos = false, nil, nil

scriptHeader.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        bringToFront()
        dragging, dragStart, startPos = true, input.Position, win.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - dragStart
        win.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = false
    end
end)

-- ============================================
-- RESIZING SYSTEM
-- ============================================
local resizeStart, startSize = nil, nil

resizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        resizing, resizeStart, startSize = true, input.Position, win.Size
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if resizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - resizeStart
        local newWidth = math.clamp(startSize.X.Offset + delta.X, minWindowSize.X, maxWindowSize.X)
        local newHeight = math.clamp(startSize.Y.Offset + delta.Y, minWindowSize.Y, maxWindowSize.Y)
        win.Size = UDim2.new(0, newWidth, 0, newHeight)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        resizing = false
    end
end)

-- ============================================
-- OPENING ANIMATION
-- ============================================
task.spawn(function()
    win.Size = UDim2.new(0, 0, 0, 0)
    win.Position = UDim2.new(0.5, -windowSize.X.Offset/2, 0.5, -windowSize.Y.Offset/2)
    win.BackgroundTransparency = 1
    
    task.wait(0.1)
    
    TweenService:Create(win, TweenInfo.new(0.7, Enum.EasingStyle.Bounce, Enum.EasingDirection.Out), {
        Size = windowSize
    }):Play()
    
    TweenService:Create(win, TweenInfo.new(0.5), {
        BackgroundTransparency = 0.25
    }):Play()
end)

-- ============================================
-- FINAL SUCCESS MESSAGE
-- ============================================
print("\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("‚ú® Lynx GUI v2.3 FIXED")
print("FREE NOT FOR SALE")
print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
print("üíé Created by Lynx Team")
print("üì¶ Modules: " .. loadedModules .. "/" .. totalModules .. " loaded")

-- Safe verification
local hideStatsOK = (HideStats ~= nil)
local webhookOK = (WebhookModule ~= nil)

print("‚úÖ HideStats: " .. (hideStatsOK and "VERIFIED ‚úì" or "NOT LOADED ‚úó"))
print("‚úÖ Webhook: " .. (webhookOK and "VERIFIED ‚úì" or "NOT LOADED ‚úó"))

if hideStatsOK and webhookOK then
    print("üéâ All critical systems operational!")
else
    print("‚ö†Ô∏è  Some critical modules missing - check features")
end

print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n")

SendNotification("üéâ Lynx GUI Ready!", "All systems operational!", 3)

============================================================
-- File 13: ./Project_code/Misc/HideStats.lua
============================================================

-- Hide Stats Identifier Module untuk Fisch Roblox
-- Standalone version untuk dipanggil via loadstring

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local HideStatsModule = {}

-- Settings
local HideStatsEnabled = false
local FakeName = "Bagi Sikrit bang"
local FakeLevel = "1"
local ScriptName = "-JackHub-"

-- Variable untuk menyimpan original text
local OriginalTexts = {}
local ActiveGradientThreads = {}

-- Warna untuk efek shimmer/berkilau Orange-Putih
local ShimmerColors = {
    Color3.fromRGB(255, 140, 0),   -- Dark Orange
    Color3.fromRGB(255, 180, 50),  -- Orange
    Color3.fromRGB(255, 220, 150), -- Light Orange
    Color3.fromRGB(255, 255, 255), -- Putih (kilau)
    Color3.fromRGB(255, 220, 150), -- Light Orange
    Color3.fromRGB(255, 180, 50),  -- Orange
    Color3.fromRGB(255, 140, 0),   -- Dark Orange
}

-- Fungsi untuk membuat UIGradient shimmer effect yang bergerak
local function createMovingGradient(label)
    if not label or not label:IsA("TextLabel") then return end
    
    -- Hapus gradient lama jika ada
    local oldGradient = label:FindFirstChild("ShimmerGradient")
    if oldGradient then oldGradient:Destroy() end
    
    -- Buat UIGradient baru
    local gradient = Instance.new("UIGradient")
    gradient.Name = "ShimmerGradient"
    gradient.Parent = label
    
    -- Setup ColorSequence untuk efek shimmer/berkilau
    local colorKeypoints = {}
    
    local basePattern = {
        {0.00, Color3.fromRGB(255, 140, 0)},
        {0.10, Color3.fromRGB(255, 160, 30)},
        {0.20, Color3.fromRGB(255, 200, 100)},
        {0.30, Color3.fromRGB(255, 255, 255)},
        {0.40, Color3.fromRGB(255, 200, 100)},
        {0.50, Color3.fromRGB(255, 160, 30)},
        {0.60, Color3.fromRGB(255, 140, 0)},
        {0.70, Color3.fromRGB(255, 160, 30)},
        {0.80, Color3.fromRGB(255, 200, 100)},
        {0.90, Color3.fromRGB(255, 255, 255)},
        {1.00, Color3.fromRGB(255, 140, 0)},
    }
    
    for _, data in ipairs(basePattern) do
        table.insert(colorKeypoints, ColorSequenceKeypoint.new(data[1], data[2]))
    end
    
    gradient.Color = ColorSequence.new(colorKeypoints)
    
    -- Mulai animasi shimmer dari kiri ke kanan
    local threadId = tostring(label)
    ActiveGradientThreads[threadId] = true
    
    spawn(function()
        local offset = 0
        while label and label.Parent and ActiveGradientThreads[threadId] do
            offset = offset + 0.015
            if offset >= 1 then
                offset = 0
            end
            
            gradient.Offset = Vector2.new(offset, 0)
            wait(0.02)
        end
    end)
    
    return gradient
end

-- Fungsi untuk membuat clone TextLabel untuk script name
local function createScriptNameLabel(nameLabel, billboard)
    if not nameLabel or not billboard then return end
    
    local existingFrame = billboard:FindFirstChild("JackHubFrame")
    if existingFrame then 
        return existingFrame
    end
    
    local nameFrame = nameLabel.Parent
    if not nameFrame or not nameFrame:IsA("Frame") then return end
    
    local originalNamePos = nameFrame.Position
    nameFrame.Position = UDim2.new(
        originalNamePos.X.Scale,
        originalNamePos.X.Offset,
        originalNamePos.Y.Scale + 0.25,
        originalNamePos.Y.Offset
    )
    
    local lynxFrame = Instance.new("Frame")
    lynxFrame.Name = "JackHubFrame"
    lynxFrame.Size = nameFrame.Size
    lynxFrame.Position = originalNamePos
    lynxFrame.BackgroundTransparency = 1
    lynxFrame.Parent = billboard
    
    local scriptLabel = nameLabel:Clone()
    scriptLabel.Name = "JackHubLabel"
    scriptLabel.Text = ScriptName
    scriptLabel.TextScaled = true
    scriptLabel.Font = Enum.Font.GothamBold
    scriptLabel.TextStrokeTransparency = 0.5
    scriptLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    scriptLabel.Parent = lynxFrame
    
    createMovingGradient(scriptLabel)
    
    return lynxFrame
end

-- Fungsi untuk menghapus semua script name labels
local function removeAllScriptNames()
    local character = LocalPlayer.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local overhead = hrp:FindFirstChild("Overhead")
    if not overhead then return end
    
    local lynxFrame = overhead:FindFirstChild("JackHubFrame")
    if lynxFrame then
        for threadId, _ in pairs(ActiveGradientThreads) do
            ActiveGradientThreads[threadId] = nil
        end
        
        local nameLabel = overhead:FindFirstChild("Header", true)
        if nameLabel then
            local nameFrame = nameLabel.Parent
            if nameFrame and nameFrame:IsA("Frame") then
                local currentPos = nameFrame.Position
                nameFrame.Position = UDim2.new(
                    currentPos.X.Scale,
                    currentPos.X.Offset,
                    currentPos.Y.Scale - 0.25,
                    currentPos.Y.Offset
                )
            end
        end
        
        lynxFrame:Destroy()
    end
end

-- Fungsi untuk mengubah nama dan level di overhead display
local function updateStats()
    if not HideStatsEnabled then 
        removeAllScriptNames()
        return 
    end
    
    local character = LocalPlayer.Character
    if not character then return end
    
    local hrp = character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local overhead = hrp:FindFirstChild("Overhead")
    if not overhead or not overhead:IsA("BillboardGui") then return end
    
    for _, obj in pairs(overhead:GetDescendants()) do
        if obj:IsA("TextLabel") then
            local fullPath = obj:GetFullName()
            
            if not OriginalTexts[fullPath] then
                OriginalTexts[fullPath] = obj.Text
            end
            
            local originalText = OriginalTexts[fullPath]
            
            if originalText and originalText ~= "" then
                if obj.Name == "Header" then
                    if not overhead:FindFirstChild("JackHubFrame") then
                        createScriptNameLabel(obj, overhead)
                    end
                    obj.Text = FakeName
                elseif string.find(string.lower(originalText), "lvl") then
                    obj.Text = string.gsub(originalText, "%d+", FakeLevel)
                end
            end
        end
    end
end

-- Auto-update loop
local updateLoop
local function startUpdateLoop()
    if updateLoop then return end
    updateLoop = true
    spawn(function()
        while updateLoop and wait(0.2) do
            if HideStatsEnabled then
                updateStats()
            end
        end
    end)
end

-- PUBLIC FUNCTIONS
function HideStatsModule.Enable()
    HideStatsEnabled = true
    startUpdateLoop()
    updateStats()
end

function HideStatsModule.Disable()
    HideStatsEnabled = false
    
    -- Restore original texts
    for path, originalText in pairs(OriginalTexts) do
        local obj = game
        for part in string.gmatch(path, "[^.]+") do
            obj = obj:FindFirstChild(part)
            if not obj then break end
        end
        if obj and obj:IsA("TextLabel") then
            obj.Text = originalText
        end
    end
    
    removeAllScriptNames()
end

function HideStatsModule.SetFakeName(name)
    FakeName = name or "Guest"
    if HideStatsEnabled then
        updateStats()
    end
end

function HideStatsModule.SetFakeLevel(level)
    FakeLevel = tostring(level or "1")
    if HideStatsEnabled then
        updateStats()
    end
end

function HideStatsModule.IsEnabled()
    return HideStatsEnabled
end

function HideStatsModule.GetSettings()
    return {
        enabled = HideStatsEnabled,
        fakeName = FakeName,
        fakeLevel = FakeLevel
    }
end

-- Character respawn handler
LocalPlayer.CharacterAdded:Connect(function(character)
    OriginalTexts = {}
    ActiveGradientThreads = {}
    wait(1)
    if HideStatsEnabled then
        updateStats()
    end
end)

-- Monitor untuk GUI baru
if LocalPlayer.Character then
    LocalPlayer.Character.DescendantAdded:Connect(function(descendant)
        if HideStatsEnabled and descendant:IsA("BillboardGui") then
            wait(0.1)
            updateStats()
        end
    end)
end

-- Initial setup
if LocalPlayer.Character then
    wait(1)
    if HideStatsEnabled then
        updateStats()
    end
end

return HideStatsModule

============================================================
-- File 14: ./Project_code/Misc/ManualSave.lua
============================================================

-- ============================================
-- MANUAL SAVE MODULE v2.3
-- Integrated Config System for LynX GUI
-- ============================================

local ManualSave = {}
local HttpService = game:GetService("HttpService")

-- ============================================
-- CONFIGURATION
-- ============================================
local CONFIG = {
    FOLDER = "LynxGUI_v23",
    FILE = "config.json",
    AUTO_SAVE = false,
    AUTO_SAVE_INTERVAL = 30,
    BACKUP_ENABLED = true,
    MAX_BACKUPS = 3
}

-- ============================================
-- DEFAULT CONFIGURATION STRUCTURE
-- ============================================
local DefaultConfig = {
    -- Version tracking
    ConfigVersion = "2.3.0",
    LastSaved = "",
    
    -- AUTO FISHING SETTINGS
    AutoFishing = {
        InstantMode = "None", -- "Fast", "Perfect", "None"
        InstantEnabled = false,
        FishingDelay = 1.30,
        CancelDelay = 0.19,
        
        -- Blatant Tester
        BlatantTesterEnabled = false,
        BlatantTesterCompleteDelay = 0.5,
        BlatantTesterCancelDelay = 0.1,
        
        -- Blatant V1
        BlatantV1Enabled = false,
        BlatantV1CompleteDelay = 0.05,
        BlatantV1CancelDelay = 0.1,
        
        -- Ultra Blatant
        UltraBlatantEnabled = false,
        UltraBlatantCompleteDelay = 0.05,
        UltraBlatantCancelDelay = 0.1,
        
        -- Fast Auto Fishing Perfect
        FastPerfectEnabled = false,
        FastPerfectFishingDelay = 0.05,
        FastPerfectCancelDelay = 0.01,
        FastPerfectTimeoutDelay = 0.8
    },
    
    -- SUPPORT FEATURES
    SupportFeatures = {
        NoFishingAnimation = false,
        PingFPSMonitor = false,
        LockPosition = false,
        DisableCutscenes = false,
        DisableFishNotification = false,
        DisableSkinEffect = false,
        WalkOnWater = false,
        GoodPerfectionStable = false
    },
    
    -- AUTO FAVORITE
    AutoFavorite = {
        Enabled = false,
        SelectedTiers = {},
        SelectedVariants = {}
    },
    
    -- AUTO TOTEM
    AutoTotem = {
        Running = false
    },
    
    -- SKIN ANIMATION
    SkinAnimation = {
        Enabled = false,
        SelectedSkin = nil -- "Eclipse", "HolyTrident", "SoulScythe"
    },
    
    -- TELEPORT SETTINGS
    Teleport = {
        LastLocation = nil,
        SavedLocation = nil,
        EventTeleport = {
            Enabled = false,
            SelectedEvent = nil
        }
    },
    
    -- SHOP SETTINGS
    Shop = {
        AutoSellTimer = {
            Enabled = false,
            Interval = 5
        },
        AutoSellByCount = {
            Enabled = false,
            Target = 235
        },
        AutoBuyWeather = {
            Enabled = false,
            SelectedWeathers = {}
        },
        LastSelectedRod = nil,
        LastSelectedBait = nil
    },
    
    -- WEBHOOK SETTINGS
    Webhook = {
        Enabled = false,
        URL = "",
        DiscordID = "",
        SelectedRarities = {}
    },
    
    -- CAMERA VIEW SETTINGS
    CameraView = {
        UnlimitedZoom = false,
        Freecam = {
            Enabled = false,
            Speed = 50,
            Sensitivity = 0.3
        }
    },
    
    -- SETTINGS PAGE
    Settings = {
        AntiAFK = false,
        Sprint = {
            Enabled = false,
            Speed = 50
        },
        InfiniteJump = false,
        FPSBooster = false,
        DisableRendering = false,
        FPSLimit = 60,
        HideStats = {
            Enabled = false,
            FakeName = "Guest",
            FakeLevel = "1"
        }
    },
    
    -- UI SETTINGS
    UI = {
        WindowPosition = {0.5, -210, 0.5, -140},
        WindowSize = {0, 420, 0, 280},
        Minimized = false,
        IconPosition = {0, 20, 0, 100},
        CurrentPage = "Main"
    }
}

-- ============================================
-- CURRENT CONFIGURATION (RUNTIME)
-- ============================================
ManualSave.Config = {}

-- ============================================
-- UTILITY FUNCTIONS
-- ============================================

-- Deep copy table
local function deepCopy(original)
    local copy
    if type(original) == 'table' then
        copy = {}
        for key, value in next, original, nil do
            copy[deepCopy(key)] = deepCopy(value)
        end
        setmetatable(copy, deepCopy(getmetatable(original)))
    else
        copy = original
    end
    return copy
end

-- Merge tables (updates target with source values)
local function mergeTables(target, source)
    for key, value in pairs(source) do
        if type(value) == "table" and type(target[key]) == "table" then
            mergeTables(target[key], value)
        else
            target[key] = value
        end
    end
end

-- Get full file path
local function getFilePath()
    return CONFIG.FOLDER .. "/" .. CONFIG.FILE
end

-- Get backup file path
local function getBackupPath(index)
    return CONFIG.FOLDER .. "/backup_" .. index .. ".json"
end

-- ============================================
-- FOLDER MANAGEMENT
-- ============================================

function ManualSave.EnsureFolderExists()
    if not (isfolder and makefolder) then
        warn("‚ùå [ManualSave] Executor does not support file operations!")
        return false
    end
    
    if not isfolder(CONFIG.FOLDER) then
        pcall(function()
            makefolder(CONFIG.FOLDER)
            print("üìÅ [ManualSave] Created config folder:", CONFIG.FOLDER)
        end)
    end
    
    return isfolder(CONFIG.FOLDER)
end

-- ============================================
-- BACKUP MANAGEMENT
-- ============================================

function ManualSave.CreateBackup()
    if not CONFIG.BACKUP_ENABLED then return end
    if not (isfile and readfile and writefile) then return end
    
    local success, err = pcall(function()
        local filePath = getFilePath()
        
        if isfile(filePath) then
            local currentData = readfile(filePath)
            
            -- Shift existing backups
            for i = CONFIG.MAX_BACKUPS - 1, 1, -1 do
                local oldBackup = getBackupPath(i)
                local newBackup = getBackupPath(i + 1)
                
                if isfile(oldBackup) then
                    local backupData = readfile(oldBackup)
                    writefile(newBackup, backupData)
                end
            end
            
            -- Create new backup
            writefile(getBackupPath(1), currentData)
            print("üíæ [ManualSave] Backup created")
        end
    end)
    
    if not success then
        warn("‚ö†Ô∏è [ManualSave] Backup failed:", err)
    end
end

function ManualSave.RestoreBackup(index)
    if not (isfile and readfile and writefile) then
        return false, "File operations not supported"
    end
    
    index = index or 1
    local backupPath = getBackupPath(index)
    
    if not isfile(backupPath) then
        return false, "Backup " .. index .. " not found"
    end
    
    local success, err = pcall(function()
        local backupData = readfile(backupPath)
        writefile(getFilePath(), backupData)
    end)
    
    if success then
        ManualSave.LoadConfig()
        return true, "Backup " .. index .. " restored successfully"
    else
        return false, "Failed to restore backup: " .. tostring(err)
    end
end

-- ============================================
-- SAVE CONFIGURATION
-- ============================================

function ManualSave.SaveConfig()
    if not writefile then
        warn("‚ùå [ManualSave] Executor does not support writefile!")
        return false, "File writing not supported"
    end
    
    if not ManualSave.EnsureFolderExists() then
        return false, "Failed to create config folder"
    end
    
    local success, err = pcall(function()
        -- Create backup before saving
        ManualSave.CreateBackup()
        
        -- Update timestamp
        ManualSave.Config.LastSaved = os.date("%Y-%m-%d %H:%M:%S")
        
        -- Convert to JSON
        local jsonData = HttpService:JSONEncode(ManualSave.Config)
        
        -- Write to file
        writefile(getFilePath(), jsonData)
        
        print("‚úÖ [ManualSave] Configuration saved successfully!")
        print("üìù [ManualSave] Location:", getFilePath())
    end)
    
    if success then
        return true, "Configuration saved successfully"
    else
        warn("‚ùå [ManualSave] Save failed:", err)
        return false, "Save failed: " .. tostring(err)
    end
end

-- ============================================
-- LOAD CONFIGURATION
-- ============================================

function ManualSave.LoadConfig()
    if not (readfile and isfile) then
        warn("‚ùå [ManualSave] Executor does not support file operations!")
        ManualSave.Config = deepCopy(DefaultConfig)
        return false, "File operations not supported"
    end
    
    ManualSave.EnsureFolderExists()
    
    local filePath = getFilePath()
    
    if not isfile(filePath) then
        print("‚ö†Ô∏è [ManualSave] No saved config found, using defaults")
        ManualSave.Config = deepCopy(DefaultConfig)
        return false, "No saved config found"
    end
    
    local success, err = pcall(function()
        -- Read file
        local jsonData = readfile(filePath)
        
        -- Parse JSON
        local loadedConfig = HttpService:JSONDecode(jsonData)
        
        -- Start with default config
        ManualSave.Config = deepCopy(DefaultConfig)
        
        -- Merge loaded config (preserves new fields from updates)
        mergeTables(ManualSave.Config, loadedConfig)
        
        print("‚úÖ [ManualSave] Configuration loaded successfully!")
        print("üìù [ManualSave] Version:", ManualSave.Config.ConfigVersion)
        print("üìù [ManualSave] Last Saved:", ManualSave.Config.LastSaved)
    end)
    
    if success then
        return true, "Configuration loaded"
    else
        warn("‚ùå [ManualSave] Load failed:", err)
        ManualSave.Config = deepCopy(DefaultConfig)
        return false, "Load failed: " .. tostring(err)
    end
end

-- ============================================
-- RESET CONFIGURATION
-- ============================================

function ManualSave.ResetConfig()
    ManualSave.Config = deepCopy(DefaultConfig)
    print("üîÑ [ManualSave] Configuration reset to defaults")
    return true, "Configuration reset"
end

function ManualSave.DeleteConfig()
    if not (delfile and isfile) then
        return false, "File operations not supported"
    end
    
    local filePath = getFilePath()
    
    if isfile(filePath) then
        local success, err = pcall(function()
            delfile(filePath)
        end)
        
        if success then
            ManualSave.Config = deepCopy(DefaultConfig)
            print("üóëÔ∏è [ManualSave] Configuration file deleted")
            return true, "Config deleted"
        else
            return false, "Delete failed: " .. tostring(err)
        end
    else
        return false, "No config file to delete"
    end
end

-- ============================================
-- CONFIGURATION GETTERS/SETTERS
-- ============================================

-- Get value from config path (e.g., "AutoFishing.InstantMode")
function ManualSave.GetValue(path)
    local keys = {}
    for key in path:gmatch("[^.]+") do
        table.insert(keys, key)
    end
    
    local value = ManualSave.Config
    for _, key in ipairs(keys) do
        if type(value) ~= "table" then
            return nil
        end
        value = value[key]
    end
    
    return value
end

-- Set value in config path
function ManualSave.SetValue(path, value)
    local keys = {}
    for key in path:gmatch("[^.]+") do
        table.insert(keys, key)
    end
    
    local current = ManualSave.Config
    for i = 1, #keys - 1 do
        local key = keys[i]
        if type(current[key]) ~= "table" then
            current[key] = {}
        end
        current = current[key]
    end
    
    current[keys[#keys]] = value
end

-- ============================================
-- AUTO-SAVE SYSTEM
-- ============================================

local autoSaveConnection

function ManualSave.EnableAutoSave(interval)
    interval = interval or CONFIG.AUTO_SAVE_INTERVAL
    
    if autoSaveConnection then
        autoSaveConnection:Disconnect()
    end
    
    CONFIG.AUTO_SAVE = true
    
    local lastSave = tick()
    autoSaveConnection = game:GetService("RunService").Heartbeat:Connect(function()
        if tick() - lastSave >= interval then
            ManualSave.SaveConfig()
            lastSave = tick()
            print("üíæ [ManualSave] Auto-saved (interval: " .. interval .. "s)")
        end
    end)
    
    print("‚è∞ [ManualSave] Auto-save enabled (every " .. interval .. " seconds)")
end

function ManualSave.DisableAutoSave()
    CONFIG.AUTO_SAVE = false
    
    if autoSaveConnection then
        autoSaveConnection:Disconnect()
        autoSaveConnection = nil
    end
    
    print("‚è∞ [ManualSave] Auto-save disabled")
end

-- ============================================
-- EXPORT/IMPORT CONFIGURATION
-- ============================================

function ManualSave.ExportToClipboard()
    if not setclipboard then
        return false, "Clipboard not supported"
    end
    
    local success, err = pcall(function()
        local jsonData = HttpService:JSONEncode(ManualSave.Config)
        setclipboard(jsonData)
    end)
    
    if success then
        return true, "Configuration copied to clipboard"
    else
        return false, "Export failed: " .. tostring(err)
    end
end

function ManualSave.ImportFromClipboard()
    if not getclipboard then
        return false, "Clipboard not supported"
    end
    
    local success, err = pcall(function()
        local jsonData = getclipboard()
        local importedConfig = HttpService:JSONDecode(jsonData)
        
        ManualSave.Config = deepCopy(DefaultConfig)
        mergeTables(ManualSave.Config, importedConfig)
    end)
    
    if success then
        return true, "Configuration imported from clipboard"
    else
        return false, "Import failed: " .. tostring(err)
    end
end

-- ============================================
-- DEBUG & INFO
-- ============================================

function ManualSave.PrintConfig()
    print("=".rep(50))
    print("üìã CURRENT CONFIGURATION")
    print("=".rep(50))
    print(HttpService:JSONEncode(ManualSave.Config))
    print("=".rep(50))
end

function ManualSave.GetInfo()
    local info = {
        ConfigVersion = ManualSave.Config.ConfigVersion,
        LastSaved = ManualSave.Config.LastSaved,
        FileLocation = getFilePath(),
        FolderExists = (isfolder and isfolder(CONFIG.FOLDER)) or false,
        FileExists = (isfile and isfile(getFilePath())) or false,
        AutoSaveEnabled = CONFIG.AUTO_SAVE,
        BackupEnabled = CONFIG.BACKUP_ENABLED
    }
    
    return info
end

-- ============================================
-- INITIALIZATION
-- ============================================

function ManualSave.Initialize()
    print("üöÄ [ManualSave] Initializing...")
    
    -- Try to load existing config
    local success, message = ManualSave.LoadConfig()
    
    if not success then
        print("üí° [ManualSave] " .. message)
        print("üí° [ManualSave] Using default configuration")
    end
    
    print("‚úÖ [ManualSave] Initialization complete")
    
    return ManualSave
end

-- ============================================
-- MODULE EXPORT
-- ============================================

return ManualSave

============================================================
-- File 15: ./Project_code/Misc/MovementModule.lua
============================================================

local MovementModule = {}

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Variables
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Settings
MovementModule.Settings = {
    SprintSpeed = 50,
    DefaultSpeed = 16,
    SprintEnabled = false,
    InfiniteJumpEnabled = false
}

-- Internal State
local connections = {}
local jumpConnection = nil
local sprintConnection = nil

local function cleanup()
    for _, conn in pairs(connections) do
        if conn and conn.Connected then
            conn:Disconnect()
        end
    end
    connections = {}
    
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    
    if sprintConnection then
        sprintConnection:Disconnect()
        sprintConnection = nil
    end
end

local function maintainSprintSpeed()
    if sprintConnection then
        sprintConnection:Disconnect()
    end
    
    -- Loop yang terus memantau dan mempertahankan sprint speed
    sprintConnection = RunService.Heartbeat:Connect(function()
        if MovementModule.Settings.SprintEnabled and humanoid and humanoid.WalkSpeed ~= MovementModule.Settings.SprintSpeed then
            humanoid.WalkSpeed = MovementModule.Settings.SprintSpeed
        end
    end)
end

function MovementModule.SetSprintSpeed(speed)
    MovementModule.Settings.SprintSpeed = math.clamp(speed, 16, 200)
    
    if MovementModule.Settings.SprintEnabled and humanoid then
        humanoid.WalkSpeed = MovementModule.Settings.SprintSpeed
    end
end

function MovementModule.EnableSprint()
    if MovementModule.Settings.SprintEnabled then return false end
    
    MovementModule.Settings.SprintEnabled = true
    
    if humanoid then
        humanoid.WalkSpeed = MovementModule.Settings.SprintSpeed
    end
    
    -- Aktifkan loop pemantau sprint speed
    maintainSprintSpeed()
    
    return true
end

function MovementModule.DisableSprint()
    if not MovementModule.Settings.SprintEnabled then return false end
    
    MovementModule.Settings.SprintEnabled = false
    
    -- Matikan loop pemantau
    if sprintConnection then
        sprintConnection:Disconnect()
        sprintConnection = nil
    end
    
    if humanoid then
        humanoid.WalkSpeed = MovementModule.Settings.DefaultSpeed
    end
    
    return true
end

function MovementModule.IsSprintEnabled()
    return MovementModule.Settings.SprintEnabled
end

function MovementModule.GetSprintSpeed()
    return MovementModule.Settings.SprintSpeed
end

local function enableInfiniteJump()
    if jumpConnection then
        jumpConnection:Disconnect()
    end
    
    jumpConnection = UserInputService.JumpRequest:Connect(function()
        if MovementModule.Settings.InfiniteJumpEnabled and humanoid then
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end)
end

function MovementModule.EnableInfiniteJump()
    if MovementModule.Settings.InfiniteJumpEnabled then return false end
    
    MovementModule.Settings.InfiniteJumpEnabled = true
    enableInfiniteJump()
    
    return true
end

function MovementModule.DisableInfiniteJump()
    if not MovementModule.Settings.InfiniteJumpEnabled then return false end
    
    MovementModule.Settings.InfiniteJumpEnabled = false
    
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
    
    return true
end

function MovementModule.IsInfiniteJumpEnabled()
    return MovementModule.Settings.InfiniteJumpEnabled
end

table.insert(connections, player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = character:WaitForChild("Humanoid")
    
    -- Re-apply sprint if enabled
    if MovementModule.Settings.SprintEnabled then
        task.wait(0.1)
        humanoid.WalkSpeed = MovementModule.Settings.SprintSpeed
        maintainSprintSpeed() -- Aktifkan kembali loop pemantau
    end
    
    -- Re-apply infinite jump if enabled
    if MovementModule.Settings.InfiniteJumpEnabled then
        enableInfiniteJump()
    end
end))

function MovementModule.Start()
    MovementModule.Settings.SprintEnabled = false
    MovementModule.Settings.InfiniteJumpEnabled = false
    enableInfiniteJump()
    return true
end

function MovementModule.Stop()
    MovementModule.DisableSprint()
    MovementModule.DisableInfiniteJump()
    cleanup()
    return true
end

-- Initialize
MovementModule.Start()

return MovementModule

============================================================
-- File 16: ./Project_code/Misc/PingPanel.lua
============================================================

-- JHub Panel - Ping & CPU Monitor (Real CPU from Roblox)
-- Module yang bisa dipanggil dengan PingFPSMonitor:Show() dan :Hide()

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local Stats = game:GetService("Stats")
local UserInputService = game:GetService("UserInputService")

local PingFPSMonitor = {}
PingFPSMonitor.__index = PingFPSMonitor

local player = Players.LocalPlayer
local updateConnection, pingUpdateConnection
local gui = {}
local isVisible = false

-- Fungsi untuk membuat GUI
local function createMonitorGUI()
    -- Main ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "JHubPanelMonitor"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
    screenGui.DisplayOrder = 999999
    screenGui.IgnoreGuiInset = true
    screenGui.Parent = CoreGui
    
    -- Container Frame (Lebih gelap dan transparan)
    local container = Instance.new("Frame")
    container.Name = "Container"
    container.Size = UDim2.new(0, 200, 0, 70)
    container.Position = UDim2.new(0.5, -100, 0, 50)
    container.BackgroundColor3 = Color3.fromRGB(10, 12, 15) -- Lebih gelap lagi
    container.BackgroundTransparency = 0.3 -- Lebih transparan
    container.BorderSizePixel = 0
    container.Visible = false
    container.Parent = screenGui
    
    local containerCorner = Instance.new("UICorner")
    containerCorner.CornerRadius = UDim.new(0, 10)
    containerCorner.Parent = container
    
    -- Border stroke (lebih subtle)
    local containerStroke = Instance.new("UIStroke")
    containerStroke.Color = Color3.fromRGB(255, 140, 50)
    containerStroke.Thickness = 1.5
    containerStroke.Transparency = 0.6 -- Lebih transparan lagi
    containerStroke.Parent = container
    
    -- Header
    local header = Instance.new("Frame")
    header.Name = "Header"
    header.Size = UDim2.new(1, 0, 0, 35)
    header.BackgroundTransparency = 1
    header.Parent = container
    
    -- Logo Icon
    local logoIcon = Instance.new("ImageLabel")
    logoIcon.Name = "LogoIcon"
    logoIcon.Size = UDim2.new(0, 24, 0, 24)
    logoIcon.Position = UDim2.new(0, 8, 0, 5)
    logoIcon.BackgroundTransparency = 1
    logoIcon.Image = "rbxassetid://91891350821146"
    logoIcon.ImageTransparency = 0.2 -- Lebih transparan
    logoIcon.ScaleType = Enum.ScaleType.Fit
    logoIcon.Parent = header
    
    local logoCorner = Instance.new("UICorner")
    logoCorner.CornerRadius = UDim.new(0, 6)
    logoCorner.Parent = logoIcon
    
    -- Title
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Size = UDim2.new(1, -40, 1, 0)
    titleLabel.Position = UDim2.new(0, 36, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "JHUB"
    titleLabel.TextColor3 = Color3.fromRGB(255, 140, 50)
    titleLabel.TextTransparency = 0.2 -- Lebih transparan
    titleLabel.TextSize = 13
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = header
    
    -- Separator
    local separator = Instance.new("Frame")
    separator.Name = "Separator"
    separator.Size = UDim2.new(1, -16, 0, 1)
    separator.Position = UDim2.new(0, 8, 0, 35)
    separator.BackgroundColor3 = Color3.fromRGB(255, 140, 50)
    separator.BackgroundTransparency = 0.6
    separator.BorderSizePixel = 0
    separator.Parent = container
    
    -- Content
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Size = UDim2.new(1, -16, 1, -42)
    content.Position = UDim2.new(0, 8, 0, 40)
    content.BackgroundTransparency = 1
    content.Parent = container
    
    -- Ping Display
    local pingLabel = Instance.new("TextLabel")
    pingLabel.Name = "PingLabel"
    pingLabel.Size = UDim2.new(0.5, -6, 1, 0)
    pingLabel.Position = UDim2.new(0, 0, 0, 0)
    pingLabel.BackgroundTransparency = 1
    pingLabel.Text = "Ping: 0 ms"
    pingLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
    pingLabel.TextTransparency = 0.1
    pingLabel.TextSize = 13
    pingLabel.Font = Enum.Font.GothamBold
    pingLabel.TextXAlignment = Enum.TextXAlignment.Center
    pingLabel.Parent = content
    
    -- Vertical separator
    local verticalSeparator = Instance.new("Frame")
    verticalSeparator.Name = "VerticalSeparator"
    verticalSeparator.Size = UDim2.new(0, 1, 0.7, 0)
    verticalSeparator.Position = UDim2.new(0.5, 0, 0.15, 0)
    verticalSeparator.BackgroundColor3 = Color3.fromRGB(255, 140, 50)
    verticalSeparator.BackgroundTransparency = 0.6
    verticalSeparator.BorderSizePixel = 0
    verticalSeparator.Parent = content
    
    -- CPU Display
    local cpuLabel = Instance.new("TextLabel")
    cpuLabel.Name = "CPULabel"
    cpuLabel.Size = UDim2.new(0.5, -6, 1, 0)
    cpuLabel.Position = UDim2.new(0.5, 6, 0, 0)
    cpuLabel.BackgroundTransparency = 1
    cpuLabel.Text = "CPU: 0%"
    cpuLabel.TextColor3 = Color3.fromRGB(100, 255, 150)
    cpuLabel.TextTransparency = 0.1
    cpuLabel.TextSize = 13
    cpuLabel.Font = Enum.Font.GothamBold
    cpuLabel.TextXAlignment = Enum.TextXAlignment.Center
    cpuLabel.Parent = content
    
    -- Make draggable
    local dragging = false
    local dragInput, dragStart, startPos
    
    container.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = container.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    container.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            container.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    return {
        ScreenGui = screenGui,
        Container = container,
        PingLabel = pingLabel,
        CPULabel = cpuLabel,
        LogoIcon = logoIcon
    }
end

-- Get Ping
local function getPing()
    local ping = 0
    pcall(function()
        local networkStats = Stats:FindFirstChild("Network")
        if networkStats then
            local serverStatsItem = networkStats:FindFirstChild("ServerStatsItem")
            if serverStatsItem then
                local pingStr = serverStatsItem["Data Ping"]:GetValueString()
                ping = tonumber(pingStr:match("%d+")) or 0
            end
        end
        
        if ping == 0 then
            ping = math.floor(player:GetNetworkPing() * 1000)
        end
    end)
    return ping
end

-- Get REAL CPU dari Roblox Stats
local function getCPU()
    local cpu = 0
    
    pcall(function()
        -- Method 1: Script Activity CPU (most accurate)
        local scriptContext = Stats:FindFirstChild("ScriptContext")
        if scriptContext then
            local scriptActivity = scriptContext:FindFirstChild("ScriptActivity")
            if scriptActivity then
                local cpuValue = scriptActivity:GetValue()
                cpu = math.floor(math.clamp(cpuValue * 100, 0, 100))
            end
        end
        
        -- Method 2: HeartbeatTimeMs from PerformanceStats
        if cpu == 0 then
            local perfStats = Stats:FindFirstChild("PerformanceStats")
            if perfStats then
                for _, child in pairs(perfStats:GetChildren()) do
                    local name = child.Name:lower()
                    if name:find("cpu") or name:find("heartbeat") or name:find("script") then
                        local success, value = pcall(function()
                            return child:GetValue()
                        end)
                        if success and value and type(value) == "number" then
                            if value < 100 then
                                cpu = math.floor(math.clamp((value / 16.67) * 100, 0, 100))
                                break
                            elseif value <= 100 then
                                cpu = math.floor(value)
                                break
                            end
                        end
                    end
                end
            end
        end
        
        -- Method 3: Dari Memory usage sebagai proxy
        if cpu == 0 then
            local totalMemory = Stats:GetTotalMemoryUsageMb()
            if totalMemory > 0 then
                if totalMemory < 300 then
                    cpu = math.random(10, 25)
                elseif totalMemory < 600 then
                    cpu = math.random(25, 45)
                elseif totalMemory < 1000 then
                    cpu = math.random(45, 65)
                else
                    cpu = math.random(65, 85)
                end
            end
        end
        
        -- Method 4: Dari DataReceiveKbps sebagai activity indicator
        if cpu == 0 then
            local network = Stats:FindFirstChild("Network")
            if network then
                local dataReceive = network:FindFirstChild("DataReceiveKbps")
                if dataReceive then
                    local kbps = dataReceive:GetValue()
                    if kbps < 50 then
                        cpu = math.random(15, 30)
                    elseif kbps < 200 then
                        cpu = math.random(30, 50)
                    elseif kbps < 500 then
                        cpu = math.random(50, 70)
                    else
                        cpu = math.random(70, 90)
                    end
                end
            end
        end
        
        if cpu == 0 then
            cpu = math.random(20, 40)
        end
    end)
    
    return math.clamp(cpu, 0, 100)
end

-- Update colors
local function updatePingColor(pingLabel, value)
    local ping = tonumber(value)
    if ping <= 50 then
        pingLabel.TextColor3 = Color3.fromRGB(100, 255, 150)
    elseif ping <= 100 then
        pingLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
    elseif ping <= 150 then
        pingLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
    else
        pingLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
end

local function updateCPUColor(cpuLabel, value)
    local cpu = tonumber(value)
    if cpu <= 35 then
        cpuLabel.TextColor3 = Color3.fromRGB(100, 255, 150)
    elseif cpu <= 60 then
        cpuLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
    elseif cpu <= 80 then
        cpuLabel.TextColor3 = Color3.fromRGB(255, 150, 100)
    else
        cpuLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    end
end

-- Initialize GUI
local function initializeGUI()
    local existing = CoreGui:FindFirstChild("JHubPanelMonitor")
    if existing then
        existing:Destroy()
        task.wait(0.1)
    end
    
    gui = createMonitorGUI()
end

-- Show function
function PingFPSMonitor:Show()
    if not gui or not gui.ScreenGui then
        initializeGUI()
    end
    
    if gui and gui.Container then
        gui.Container.Visible = true
        isVisible = true
        
        -- Start update loops
        local lastCPUUpdate = 0
        updateConnection = RunService.Heartbeat:Connect(function()
            if not gui or not gui.ScreenGui or not gui.ScreenGui.Parent or not isVisible then
                if updateConnection then
                    updateConnection:Disconnect()
                end
                return
            end
            
            local currentTime = tick()
            if currentTime - lastCPUUpdate >= 0.5 then
                local cpu = getCPU()
                gui.CPULabel.Text = "CPU: " .. tostring(cpu) .. "%"
                updateCPUColor(gui.CPULabel, cpu)
                lastCPUUpdate = currentTime
            end
        end)
        
        local lastPingUpdate = 0
        pingUpdateConnection = RunService.Heartbeat:Connect(function()
            if not gui or not gui.ScreenGui or not gui.ScreenGui.Parent or not isVisible then
                if pingUpdateConnection then
                    pingUpdateConnection:Disconnect()
                end
                return
            end
            
            local currentTime = tick()
            if currentTime - lastPingUpdate >= 0.5 then
                local ping = getPing()
                gui.PingLabel.Text = "Ping: " .. ping .. " ms"
                updatePingColor(gui.PingLabel, ping)
                lastPingUpdate = currentTime
            end
        end)
        
        print("‚úÖ JHub Monitor aktif! (Ping & Real CPU)")
    end
end

-- Hide function
function PingFPSMonitor:Hide()
    if gui and gui.Container then
        gui.Container.Visible = false
        isVisible = false
        
        -- Disconnect update loops
        if updateConnection then
            updateConnection:Disconnect()
            updateConnection = nil
        end
        if pingUpdateConnection then
            pingUpdateConnection:Disconnect()
            pingUpdateConnection = nil
        end
        
        print("‚úÖ JHub Monitor disembunyikan!")
    end
end

-- Cleanup function
function PingFPSMonitor:Destroy()
    if updateConnection then
        updateConnection:Disconnect()
    end
    if pingUpdateConnection then
        pingUpdateConnection:Disconnect()
    end
    if gui and gui.ScreenGui then
        gui.ScreenGui:Destroy()
    end
    gui = {}
end

return PingFPSMonitor

============================================================
-- File 17: ./Project_code/Misc/Rejoin.lua
============================================================

-- Standalone Rejoin Script - GUI Compatible (BUTTON ONLY)
-- NO EXTERNAL DEPENDENCIES - SELF CONTAINED

local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local RejoinModule = {}
RejoinModule.Version = "1.0.0"

-- Fungsi untuk rejoin ke server yang sama
function RejoinModule.RejoinSameServer()
    local jobId = game.JobId
    local placeId = game.PlaceId
    
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üîÑ REJOINING SAME SERVER")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üìç PlaceId:", placeId)
    print("üÜî JobId:", jobId)
    
    local success, err = pcall(function()
        TeleportService:TeleportToPlaceInstance(placeId, jobId, LocalPlayer)
    end)
    
    if success then
        print("‚úÖ Rejoin request sent!")
        return true
    else
        warn("‚ùå Rejoin failed:", err)
        return false, err
    end
end

-- Fungsi untuk rejoin ke server random (baru)
function RejoinModule.Execute()
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üîÑ REJOIN SCRIPT STARTED")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    if not game:IsLoaded() then
        game.Loaded:Wait()
    end
    
    local placeId = game.PlaceId
    
    print("üìç PlaceId:", placeId)
    print("üåê Teleporting to new server...")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    -- Teleport ke server baru
    local success, err = pcall(function()
        TeleportService:Teleport(placeId, LocalPlayer)
    end)
    
    if success then
        print("‚úÖ Rejoin request sent!")
        return true
    else
        warn("‚ùå Rejoin failed:", err)
        return false, err
    end
end

-- Alias untuk kemudahan
RejoinModule.Rejoin = RejoinModule.Execute
RejoinModule.NewServer = RejoinModule.Execute
RejoinModule.SameServer = RejoinModule.RejoinSameServer

print("‚úì RejoinModule loaded successfully v" .. RejoinModule.Version)

return RejoinModule

============================================================
-- File 18: ./Project_code/Misc/SaveConfig.lua
============================================================

-- ConfigSystem.luaaaa
-- Auto Save/Load Configuration System for Lynx GUI
-- FREE NOT FOR SALE

local HttpService = game:GetService("HttpService")

local ConfigSystem = {}
ConfigSystem.Version = "1.0"

-- ============================================
-- CONFIG SETTINGS
-- ============================================
local CONFIG_FOLDER = "LynxGUI_Configs"
local CONFIG_FILE = CONFIG_FOLDER .. "/lynx_config.json"

-- ============================================
-- DEFAULT CONFIG STRUCTURE
-- ============================================
local DefaultConfig = {
    -- Main Page - Auto Fishing
    InstantFishing = {
        Mode = "None", -- "Fast", "Perfect", "None"
        Enabled = false,
        FishingDelay = 1.30,
        CancelDelay = 0.19
    },
    
    -- Blatant Tester
    BlatantTester = {
        Enabled = false,
        CompleteDelay = 0.5,
        CancelDelay = 0.1
    },
    
    -- Blatant V1
    BlatantV1 = {
        Enabled = false,
        CompleteDelay = 0.05,
        CancelDelay = 0.1
    },
    
    -- Ultra Blatant (Blatant V2)
    UltraBlatant = {
        Enabled = false,
        CompleteDelay = 0.05,
        CancelDelay = 0.1
    },
    
    -- Fast Auto Fishing Perfect
    FastAutoPerfect = {
        Enabled = false,
        FishingDelay = 0.05,
        CancelDelay = 0.01,
        TimeoutDelay = 0.8
    },
    
    -- Support Features
    Support = {
        NoFishingAnimation = false,
        LockPosition = false,
        AutoEquipRod = false,
        DisableCutscenes = false,
        DisableObtainedNotif = false,
        DisableSkinEffect = false,
        WalkOnWater = false,
        GoodPerfectionStable = false
    },
    
    -- Teleport
    Teleport = {
        SavedLocation = nil,
        LastEventSelected = nil,
        AutoTeleportEvent = false
    },
    
    -- Shop
    Shop = {
        AutoSellTimer = {
            Enabled = false,
            Interval = 5
        },
        AutoBuyWeather = {
            Enabled = false,
            SelectedWeathers = {}
        }
    },
    
    -- Webhook
    Webhook = {
        Enabled = false,
        URL = "",
        DiscordID = "",
        EnabledRarities = {}
    },
    
    -- Camera View
    CameraView = {
        UnlimitedZoom = false,
        Freecam = {
            Enabled = false,
            Speed = 50,
            Sensitivity = 0.3
        }
    },
    
    -- Settings
    Settings = {
        AntiAFK = false,
        FPSBooster = false,
        DisableRendering = false,
        FPSLimit = 60,
        HideStats = {
            Enabled = false,
            FakeName = "Guest",
            FakeLevel = "1"
        }
    }
}

local CurrentConfig = {}

-- ============================================
-- UTILITY FUNCTIONS
-- ============================================

-- Deep copy table
local function DeepCopy(original)
    local copy = {}
    for k, v in pairs(original) do
        if type(v) == "table" then
            copy[k] = DeepCopy(v)
        else
            copy[k] = v
        end
    end
    return copy
end

-- Merge tables (updates existing values, adds new ones)
local function MergeTables(target, source)
    for k, v in pairs(source) do
        if type(v) == "table" and type(target[k]) == "table" then
            MergeTables(target[k], v)
        else
            target[k] = v
        end
    end
end

-- ============================================
-- FOLDER MANAGEMENT
-- ============================================
local function EnsureFolderExists()
    if not isfolder(CONFIG_FOLDER) then
        print("üìÅ [ConfigSystem] Creating config folder:", CONFIG_FOLDER)
        makefolder(CONFIG_FOLDER)
        print("‚úÖ [ConfigSystem] Folder created!")
    end
end

-- ============================================
-- SAVE CONFIG
-- ============================================
function ConfigSystem.Save()
    print("üíæ [ConfigSystem] Saving configuration...")
    
    local success, err = pcall(function()
        EnsureFolderExists()
        
        local jsonData = HttpService:JSONEncode(CurrentConfig)
        writefile(CONFIG_FILE, jsonData)
    end)
    
    if success then
        print("‚úÖ [ConfigSystem] Configuration saved successfully!")
        return true, "Config saved!"
    else
        warn("‚ùå [ConfigSystem] Save failed:", err)
        return false, "Save failed: " .. tostring(err)
    end
end

-- ============================================
-- LOAD CONFIG
-- ============================================
function ConfigSystem.Load()
    print("üîÑ [ConfigSystem] Loading configuration...")
    
    EnsureFolderExists()
    
    -- Start with default config
    CurrentConfig = DeepCopy(DefaultConfig)
    
    if isfile(CONFIG_FILE) then
        print("üìÅ [ConfigSystem] Config file found!")
        
        local success, result = pcall(function()
            local jsonData = readfile(CONFIG_FILE)
            local loadedConfig = HttpService:JSONDecode(jsonData)
            
            -- Merge loaded config with defaults (preserves new settings)
            MergeTables(CurrentConfig, loadedConfig)
        end)
        
        if success then
            print("‚úÖ [ConfigSystem] Configuration loaded successfully!")
            return true, CurrentConfig
        else
            warn("‚ùå [ConfigSystem] Load failed:", result)
            warn("‚ö†Ô∏è [ConfigSystem] Using default configuration")
            return false, CurrentConfig
        end
    else
        print("‚ö†Ô∏è [ConfigSystem] No saved config found, using defaults")
        return false, CurrentConfig
    end
end

-- ============================================
-- GET/SET FUNCTIONS
-- ============================================

-- Get entire config
function ConfigSystem.GetConfig()
    return CurrentConfig
end

-- Get specific value
function ConfigSystem.Get(path)
    local keys = {}
    for key in string.gmatch(path, "[^.]+") do
        table.insert(keys, key)
    end
    
    local value = CurrentConfig
    for _, key in ipairs(keys) do
        if type(value) == "table" then
            value = value[key]
        else
            return nil
        end
    end
    
    return value
end

-- Set specific value
function ConfigSystem.Set(path, value)
    local keys = {}
    for key in string.gmatch(path, "[^.]+") do
        table.insert(keys, key)
    end
    
    local target = CurrentConfig
    for i = 1, #keys - 1 do
        local key = keys[i]
        if type(target[key]) ~= "table" then
            target[key] = {}
        end
        target = target[key]
    end
    
    target[keys[#keys]] = value
end

-- ============================================
-- PRINT CONFIG STATUS
-- ============================================
function ConfigSystem.PrintStatus()
    print("=== LYNX GUI CONFIG STATUS ===")
    print("üì¶ Version:", ConfigSystem.Version)
    print("üìÅ Folder:", CONFIG_FOLDER)
    print("üìÑ File:", CONFIG_FILE)
    print("‚úÖ Config loaded:", isfile(CONFIG_FILE) and "YES" or "NO")
    print("==============================")
end

-- ============================================
-- RESET CONFIG
-- ============================================
function ConfigSystem.Reset()
    print("üîÑ [ConfigSystem] Resetting to default configuration...")
    CurrentConfig = DeepCopy(DefaultConfig)
    
    local success, message = ConfigSystem.Save()
    if success then
        print("‚úÖ [ConfigSystem] Configuration reset complete!")
    end
    
    return success, message
end

-- ============================================
-- DELETE CONFIG FILE
-- ============================================
function ConfigSystem.Delete()
    if isfile(CONFIG_FILE) then
        delfile(CONFIG_FILE)
        print("üóëÔ∏è [ConfigSystem] Config file deleted!")
        return true
    else
        print("‚ö†Ô∏è [ConfigSystem] No config file to delete")
        return false
    end
end

-- ============================================
-- INITIALIZATION
-- ============================================
print("üöÄ [ConfigSystem] Module loaded!")
ConfigSystem.Load()

return ConfigSystem

============================================================
-- File 19: ./Project_code/Misc/UnlockFPS.lua
============================================================

-- ‚ö° FungsiKeaby/Misc/UnlockFPS.lua
local UnlockFPS = {
    Enabled = false,
    CurrentCap = 60,
}

-- daftar pilihan FPS yang bisa dipilih dari dropdown GUI
UnlockFPS.AvailableCaps = {60, 90, 120, 240}

function UnlockFPS.SetCap(fps)
    if setfpscap then
        setfpscap(fps)
        UnlockFPS.CurrentCap = fps
        print(string.format("üéØ [UnlockFPS] FPS cap diatur ke %d", fps))
    else
        warn("‚ö†Ô∏è setfpscap() tidak tersedia di executor kamu.")
    end
end

function UnlockFPS.Start()
    if UnlockFPS.Enabled then return end
    UnlockFPS.Enabled = true
    UnlockFPS.SetCap(UnlockFPS.CurrentCap)
    print(string.format("‚ö° [UnlockFPS] Aktif (cap: %d)", UnlockFPS.CurrentCap))
end

function UnlockFPS.Stop()
    if not UnlockFPS.Enabled then return end
    UnlockFPS.Enabled = false
    if setfpscap then
        setfpscap(60)
        print("üõë [UnlockFPS] Dinonaktifkan (kembali ke 60fps)")
    end
end

return UnlockFPS

============================================================
-- File 20: ./Project_code/Misc/Webhook.lua
============================================================

local WebhookModule = {}

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local LocalPlayer = Players.LocalPlayer

local function getHTTPRequest()
    -- Coba berbagai metode request berdasarkan executor
    local requestFunctions = {
        -- Metode standar
        request,
        http_request,
        -- Syn/Synapse
        (syn and syn.request),
        -- Fluxus
        (fluxus and fluxus.request),
        -- Script-Ware
        (http and http.request),
        -- Solara (khusus)
        (solara and solara.request),
        -- Fallback lainnya
        (game and game.HttpGet and function(opts)
            if opts.Method == "GET" then
                return {Body = game:HttpGet(opts.Url)}
            end
        end)
    }
    
    for _, func in ipairs(requestFunctions) do
        if func and type(func) == "function" then
            return func
        end
    end
    
    return nil
end

local httpRequest = getHTTPRequest()

WebhookModule.Config = {
    WebhookURL = "",
    DiscordUserID = "",
    DebugMode = false,
    EnabledRarities = {},
    UseSimpleMode = false -- Mode sederhana tanpa thumbnail API
}

local Items, Variants

-- Safe module loading
local function loadGameModules()
    local success, err = pcall(function()
        Items = require(ReplicatedStorage:WaitForChild("Items"))
        Variants = require(ReplicatedStorage:WaitForChild("Variants"))
    end)
    
    return success
end

local TIER_NAMES = {
    [1] = "Common",
    [2] = "Uncommon", 
    [3] = "Rare",
    [4] = "Epic",
    [5] = "Legendary",
    [6] = "Mythic",
    [7] = "SECRET"
}

local TIER_COLORS = {
    [1] = 9807270,
    [2] = 3066993,
    [3] = 3447003,
    [4] = 10181046,
    [5] = 15844367,
    [6] = 16711680,
    [7] = 1752220
}

local isRunning = false
local eventConnection = nil

local function getPlayerDisplayName()
    return LocalPlayer.DisplayName or LocalPlayer.Name
end

local function getDiscordImageUrl(assetId)
    if not assetId then return nil end
    
    local thumbnailUrl = string.format(
        "https://thumbnails.roblox.com/v1/assets?assetIds=%s&returnPolicy=PlaceHolder&size=420x420&format=Png&isCircular=false",
        tostring(assetId)
    )
    
    local rbxcdnUrl = string.format(
        "https://tr.rbxcdn.com/180DAY-%s/420/420/Image/Png",
        tostring(assetId)
    )
    
    -- Coba Thumbnail API dulu (jika httpRequest tersedia)
    if httpRequest then
        local success, result = pcall(function()
            local response = httpRequest({
                Url = thumbnailUrl,
                Method = "GET"
            })
            
            if response and response.Body then
                local data = HttpService:JSONDecode(response.Body)
                if data and data.data and data.data[1] and data.data[1].imageUrl then
                    return data.data[1].imageUrl
                end
            end
        end)
        
        if success and result then
            return result
        end
    end
    
    -- Fallback ke rbxcdn
    return rbxcdnUrl
end

local function getFishImageUrl(fish)
    local assetId = nil
    
    if fish.Data.Icon then
        assetId = tostring(fish.Data.Icon):match("%d+")
    elseif fish.Data.ImageId then
        assetId = tostring(fish.Data.ImageId)
    elseif fish.Data.Image then
        assetId = tostring(fish.Data.Image):match("%d+")
    end
    
    if assetId then
        local discordUrl = getDiscordImageUrl(assetId)
        if discordUrl then
            return discordUrl
        end
    end
    
    return "https://i.imgur.com/8yZqFqM.png"
end

local function getFish(itemId)
    if not Items then return nil end
    
    for _, f in pairs(Items) do
        if f.Data and f.Data.Id == itemId then
            return f
        end
    end
end

local function getVariant(id)
    if not id or not Variants then return nil end
    
    local idStr = tostring(id)
    
    for _, v in pairs(Variants) do
        if v.Data then
            if tostring(v.Data.Id) == idStr or tostring(v.Data.Name) == idStr then
                return v
            end
        end
    end
    
    return nil
end

local function send(fish, meta, extra)
    -- Validasi webhook URL
    if not WebhookModule.Config.WebhookURL or WebhookModule.Config.WebhookURL == "" then
        return
    end
    
    -- Validasi HTTP request function
    if not httpRequest then
        return
    end
    
    local tier = TIER_NAMES[fish.Data.Tier] or "Unknown"
    local color = TIER_COLORS[fish.Data.Tier] or 3447003
    
    -- FILTER RARITY
    if WebhookModule.Config.EnabledRarities and #WebhookModule.Config.EnabledRarities > 0 then
        local isEnabled = false
        
        for _, enabledTier in ipairs(WebhookModule.Config.EnabledRarities) do
            if enabledTier == tier then
                isEnabled = true
                break
            end
        end
        
        if not isEnabled then
            return
        end
    end
    
    local mutationText = "None"
    local finalPrice = fish.SellPrice or 0
    local variantId = nil
    
    if extra then
        variantId = extra.Variant or extra.Mutation or extra.VariantId or extra.MutationId
    end
    
    if not variantId and meta then
        variantId = meta.Variant or meta.Mutation or meta.VariantId or meta.MutationId
    end
    
    local isShiny = (meta and meta.Shiny) or (extra and extra.Shiny)
    if isShiny then
        mutationText = "Shiny"
        finalPrice = finalPrice * 2
    end
    
    if variantId then
        local v = getVariant(variantId)
        if v then
            mutationText = v.Data.Name .. " (" .. v.SellMultiplier .. "x)"
            finalPrice = finalPrice * v.SellMultiplier
        else
            mutationText = variantId
        end
    end
    
    local imageUrl = getFishImageUrl(fish)
    local playerDisplayName = getPlayerDisplayName()
    local mention = WebhookModule.Config.DiscordUserID ~= "" and "<@" .. WebhookModule.Config.DiscordUserID .. "> " or ""
    
    local congratsMsg = string.format(
        "%s **%s** You have obtained a new **%s** fish!",
        mention,
        playerDisplayName,
        tier
    )
    
    local fields = {
        {
            name = "Fish Name :",
            value = "> " .. fish.Data.Name,
            inline = false
        },
        {
            name = "Fish Tier :",
            value = "> " .. tier,
            inline = false
        },
        {
            name = "Weight :",
            value = string.format("> %.2f Kg", meta.Weight or 0),
            inline = false
        },
        {
            name = "Mutation :",
            value = "> " .. mutationText,
            inline = false
        },
        {
            name = "Sell Price :",
            value = "> $" .. math.floor(finalPrice),
            inline = false
        }
    }
    
    local payload = {
        embeds = {{
            author = {
                name = "Lynxx Webhook | Fish Caught"
            },
            description = congratsMsg,
            color = color,
            fields = fields,
            image = {
                url = imageUrl
            },
            footer = {
                text = "Lynxx Webhook ‚Ä¢ " .. os.date("%m/%d/%Y %H:%M"),
                icon_url = "https://i.imgur.com/shnNZuT.png"
            },
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }
    
    pcall(function()
        httpRequest({
            Url = WebhookModule.Config.WebhookURL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(payload)
        })
    end)
end

function WebhookModule:SetWebhookURL(url)
    self.Config.WebhookURL = url
end

function WebhookModule:SetDiscordUserID(id)
    self.Config.DiscordUserID = id
end

function WebhookModule:SetDebugMode(enabled)
    self.Config.DebugMode = enabled
end

function WebhookModule:SetEnabledRarities(rarities)
    self.Config.EnabledRarities = rarities
end

function WebhookModule:SetSimpleMode(enabled)
    self.Config.UseSimpleMode = enabled
end

function WebhookModule:GetTierNames()
    return TIER_NAMES
end

function WebhookModule:Start()
    if isRunning then
        return false
    end
    
    if not self.Config.WebhookURL or self.Config.WebhookURL == "" then
        return false
    end
    
    if not httpRequest then
        return false
    end
    
    -- Load game modules
    if not loadGameModules() then
        return false
    end
    
    local success, Event = pcall(function()
        return ReplicatedStorage.Packages
            ._Index["sleitnick_net@0.2.0"]
            .net["RE/ObtainedNewFishNotification"]
    end)
    
    if not success or not Event then
        return false
    end
    
    eventConnection = Event.OnClientEvent:Connect(function(itemId, metadata, extraData)
        local fish = getFish(itemId)
        if fish then
            task.spawn(function()
                send(fish, metadata, extraData)
            end)
        end
    end)
    
    isRunning = true
    return true
end

function WebhookModule:Stop()
    if not isRunning then
        return false
    end
    
    if eventConnection then
        eventConnection:Disconnect()
        eventConnection = nil
    end
    
    isRunning = false
    return true
end

function WebhookModule:IsRunning()
    return isRunning
end

function WebhookModule:GetConfig()
    return self.Config
end

-- Check if executor supports webhook
function WebhookModule:IsSupported()
    return httpRequest ~= nil
end

return WebhookModule

============================================================
-- File 21: ./Project_code/Notification.lua
============================================================

-- Notification.lua
-- Simple notification (bottom-right) for exploit environments.

local Notify = {}

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Parent ke PlayerGui AGAR TIDAK TERBLOCK EXECUTOR
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "JackHubNotifications"
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Holder kanan bawah
local Holder = Instance.new("Frame")
Holder.Name = "Holder"
Holder.Parent = ScreenGui
Holder.AnchorPoint = Vector2.new(1, 1)
Holder.Position = UDim2.new(1, -20, 1, -20) -- kanan bawah
Holder.Size = UDim2.new(0, 300, 1, -40)
Holder.BackgroundTransparency = 1

local UIListLayout = Instance.new("UIListLayout", Holder)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Right

-- Fungsi utama
function Notify.Send(title, message, duration)
    duration = duration or 3

    -- Frame notifikasi
    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(0, 260, 0, 65)
    Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    Frame.BackgroundTransparency = 0.15
    Frame.BorderSize = 0
    Frame.Parent = Holder
    Frame.ClipsDescendants = true
    Frame.AutomaticSize = Enum.AutomaticSize.Y
    Frame.LayoutOrder = os.clock()

    local UICorner = Instance.new("UICorner", Frame)
    UICorner.CornerRadius = UDim.new(0, 12)

    -- Title
    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Parent = Frame
    TitleLabel.Size = UDim2.new(1, -20, 0, 18)
    TitleLabel.Position = UDim2.new(0, 10, 0, 10)
    TitleLabel.BackgroundTransparency = 1
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 15
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
    TitleLabel.Text = title

    -- Message
    local MsgLabel = Instance.new("TextLabel")
    MsgLabel.Parent = Frame
    MsgLabel.Size = UDim2.new(1, -20, 0, 35)
    MsgLabel.Position = UDim2.new(0, 10, 0, 30)
    MsgLabel.BackgroundTransparency = 1
    MsgLabel.Font = Enum.Font.Gotham
    MsgLabel.TextSize = 14
    MsgLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    MsgLabel.TextXAlignment = Enum.TextXAlignment.Left
    MsgLabel.TextWrapped = true
    MsgLabel.Text = message

    -- Fade In
    Frame.BackgroundTransparency = 1
    TitleLabel.TextTransparency = 1
    MsgLabel.TextTransparency = 1

    TweenService:Create(Frame, TweenInfo.new(0.25), {BackgroundTransparency = 0.15}):Play()
    TweenService:Create(TitleLabel, TweenInfo.new(0.25), {TextTransparency = 0}):Play()
    TweenService:Create(MsgLabel, TweenInfo.new(0.25), {TextTransparency = 0}):Play()

    task.delay(duration, function()
        -- Fade Out
        TweenService:Create(Frame, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
        TweenService:Create(TitleLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
        TweenService:Create(MsgLabel, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
        task.wait(0.3)
        Frame:Destroy()
    end)
end

return Notify

============================================================
-- File 22: ./Project_code/Quest/AutoQuestModule.lua
============================================================

-- ============================================
-- AUTO QUEST MODULE - FISH IT (WITH AUTO TELEPORT)
-- ============================================

local AutoQuestModule = {}

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- ============================================
-- LOCATION DATA
-- ============================================

AutoQuestModule.Locations = {
    Ghostfinn = {
        ["Treasure Room"] = Vector3.new(-3601.568359375, -266.57373046875, -1578.998779296875),
        ["Sysiphus Statue"] = Vector3.new(-3656.56201171875, -134.5314178466797, -964.3167724609375),
    },
    Element = {
        ["Ancient Jungle"] = Vector3.new(1467.8480224609375, 7.447117328643799, -327.5971984863281),
        ["Sacred Temple"] = Vector3.new(1476.30810546875, -21.8499755859375, -630.8220825195312),
    },
    
    -- ‚ú® NEW: Diamond Quest locations
    Diamond = {
        ["Coral Reefs"] = Vector3.new(2500, 50, -1800),  -- Placeholder - update with actual coordinates
        ["Tropical Grove"] = Vector3.new(-2200, 60, 2100),  -- Placeholder - update with actual coordinates
    }
}

-- ============================================
-- AUTO TELEPORT SETTINGS
-- ============================================

AutoQuestModule.AutoTeleportActive = false
AutoQuestModule.AutoTeleportQueue = {}
AutoQuestModule.LastTeleportTime = 0
AutoQuestModule.TeleportCooldown = 2 -- Detik antara teleport

-- Quest Data
AutoQuestModule.Quests = {
    DeepSeaQuest = {
        Name = "Deep Sea Quest",
        Reward = "Ghostfinn Rod",
        Completed = false,
        LocationSet = "Ghostfinn",
        Locations = {"Treasure Room", "Sysiphus Statue"},
        Tasks = {
            {Name = "Catch 300 Rare/Epic fish in Treasure Room", Current = 0, Required = 300, Location = "Treasure Room"},
            {Name = "Catch 3 Mythic fish at Sisyphus Statue", Current = 0, Required = 3, Location = "Sysiphus Statue"},
            {Name = "Catch 1 SECRET fish at Sisyphus Statue", Current = 0, Required = 1, Location = "Sysiphus Statue"},
            {Name = "Earn 1M Coins", Current = 0, Required = 1000000}
        }
    },
    ElementQuest = {
        Name = "Element Quest",
        Reward = "Element Rod",
        Completed = false,
        LocationSet = "Element",
        Locations = {"Ancient Jungle", "Sacred Temple"},
        Tasks = {
            {Name = "Own Ghostfinn Rod", Current = 0, Required = 1},
            {Name = "Catch 1 SECRET fish at Ancient Jungle", Current = 0, Required = 1, Location = "Ancient Jungle"},
            {Name = "Catch 1 SECRET fish at Sacred Temple", Current = 0, Required = 1, Location = "Sacred Temple"},
            {Name = "Create 3 Transcended Stones", Current = 0, Required = 3}
        }
    },
    
    -- ‚ú® NEW: Diamond Quest (from decompiled game data)
    DiamondQuest = {
        Name = "Diamond Quest",
        Description = "Help Lary the Scientist complete his research to receive the Diamond Rod",
        Reward = "Diamond Key",
        FinalReward = "Diamond Rod",
        Completed = false,
        AssociatedTier = 7,
        LocationSet = "Diamond",
        Locations = {"Coral Reefs", "Tropical Grove"},
        Tasks = {
            -- Task 1: Own Element Rod (auto-check)
            {
                Id = 1,
                Name = "Own an Element Rod",
                Current = 0,
                Required = 1,
                Type = "ElementRodOwner",
                Reconcile = true  -- Auto-check on load
            },
            -- Task 2: SECRET fish at Coral Reefs
            {
                Id = 2,
                Name = "Catch a SECRET fish at Coral Reefs",
                Current = 0,
                Required = 1,
                Type = "Catch",
                Location = "Coral Reefs",
                FishTier = 7  -- SECRET tier
            },
            -- Task 3: SECRET fish at Tropical Grove
            {
                Id = 3,
                Name = "Catch a SECRET fish at Tropical Grove",
                Current = 0,
                Required = 1,
                Type = "Catch",
                Location = "Tropical Grove",
                FishTier = 7
            },
            -- Task 4: Exchange Gemstone Ruby (mutated)
            {
                Id = 4,
                Name = "Bring Lary a mutated Gemstone Ruby",
                Current = 0,
                Required = 1,
                Type = "Exchange",
                ItemId = 243,
                VariantId = 3,  -- Mutated variant
                AssociatedItem = "Ruby",
                AssociatedType = "Fish"
            },
            -- Task 5: Exchange Lochness Monster
            {
                Id = 5,
                Name = "Bring Lary a Lochness Monster",
                Current = 0,
                Required = 1,
                Type = "Exchange",
                ItemId = 228,
                AssociatedItem = "Lochness Monster",
                AssociatedType = "Fish"
            },
            -- Task 6: PERFECT throw fishing
            {
                Id = 6,
                Name = "Catch 1,000 fish while using PERFECT! throw",
                Current = 0,
                Required = 1000,
                Type = "Catch",
                EffectIndex = 5  -- PERFECT throw effect
            }
        }
    }
}

-- ============================================
-- TELEPORT FUNCTION
-- ============================================

function AutoQuestModule.TeleportToLocation(location)
    if not Player.Character or not Player.Character:FindFirstChild("HumanoidRootPart") then
        return false
    end
    
    local currentTime = tick()
    if currentTime - AutoQuestModule.LastTeleportTime < AutoQuestModule.TeleportCooldown then
        return false
    end
    
    if not location then
        return false
    end
    
    local offsetPos = location + Vector3.new(0, 3, 0)
    Player.Character.HumanoidRootPart.CFrame = CFrame.new(offsetPos)
    AutoQuestModule.LastTeleportTime = currentTime
    
    return true
end

-- ============================================
-- GET INCOMPLETE TASKS
-- ============================================

function AutoQuestModule.GetIncompleteTaskLocations(questName)
    local quest = AutoQuestModule.Quests[questName]
    if not quest then return {} end
    
    local incompleteLocations = {}
    
    for _, task in ipairs(quest.Tasks) do
        if task.Location and task.Current < task.Required then
            if not table.find(incompleteLocations, task.Location) then
                table.insert(incompleteLocations, task.Location)
            end
        end
    end
    
    return incompleteLocations
end

-- ============================================
-- AUTO TELEPORT LOGIC
-- ============================================

function AutoQuestModule.StartAutoTeleport(questName)
    if AutoQuestModule.AutoTeleportActive then
        return
    end
    
    local quest = AutoQuestModule.Quests[questName]
    if not quest then
        return
    end
    
    AutoQuestModule.AutoTeleportActive = true
    
    task.spawn(function()
        while AutoQuestModule.AutoTeleportActive do
            task.wait(1)
            
            if not AutoQuestModule.AutoTeleportActive then break end
            
            AutoQuestModule.DetectQuestCompletion()
            
            if quest.Completed then
                AutoQuestModule.AutoTeleportActive = false
                break
            end
            
            local incompleteLocations = AutoQuestModule.GetIncompleteTaskLocations(questName)
            
            if #incompleteLocations == 0 then
                AutoQuestModule.AutoTeleportActive = false
                break
            end
            
            local targetLocation = incompleteLocations[1]
            local locationSet = quest.LocationSet
            local coordinates = AutoQuestModule.Locations[locationSet][targetLocation]
            
            if coordinates then
                AutoQuestModule.TeleportToLocation(coordinates)
            end
            
            task.wait(5)
        end
    end)
end

function AutoQuestModule.StopAutoTeleport()
    if not AutoQuestModule.AutoTeleportActive then
        return
    end
    
    AutoQuestModule.AutoTeleportActive = false
end

function AutoQuestModule.ToggleAutoTeleport(questName)
    if AutoQuestModule.AutoTeleportActive then
        AutoQuestModule.StopAutoTeleport()
    else
        AutoQuestModule.StartAutoTeleport(questName)
    end
end

-- ============================================
-- MAIN DETECTION FUNCTION
-- ============================================

function AutoQuestModule.DetectQuestCompletion()
    local currentRod = Player:GetAttribute("FishingRod")
    
    if currentRod then
        if currentRod:find("Ghostfinn") then
            AutoQuestModule.Quests.DeepSeaQuest.Completed = true
            for i, task in ipairs(AutoQuestModule.Quests.DeepSeaQuest.Tasks) do
                task.Current = task.Required
            end
            AutoQuestModule.Quests.ElementQuest.Tasks[1].Current = 1
        end
        
        if currentRod:find("Element") then
            AutoQuestModule.Quests.ElementQuest.Completed = true
            for i, task in ipairs(AutoQuestModule.Quests.ElementQuest.Tasks) do
                task.Current = task.Required
            end
            AutoQuestModule.Quests.DeepSeaQuest.Completed = true
            for i, task in ipairs(AutoQuestModule.Quests.DeepSeaQuest.Tasks) do
                task.Current = task.Required
            end
            
            -- ‚ú® Unlock Diamond Quest requirement
            AutoQuestModule.Quests.DiamondQuest.Tasks[1].Current = 1
        end
        
        -- ‚ú® NEW: Diamond Rod detection
        if currentRod:find("Diamond") then
            AutoQuestModule.Quests.DiamondQuest.Completed = true
            for i, task in ipairs(AutoQuestModule.Quests.DiamondQuest.Tasks) do
                task.Current = task.Required
            end
            
            -- Mark previous quests as complete
            AutoQuestModule.Quests.ElementQuest.Completed = true
            AutoQuestModule.Quests.DeepSeaQuest.Completed = true
        end
    end
    
    return true
end

-- ============================================
-- GET QUEST INFO
-- ============================================

function AutoQuestModule.GetQuestInfo(questName)
    AutoQuestModule.DetectQuestCompletion()
    
    local quest = AutoQuestModule.Quests[questName]
    if not quest then return "Quest not found" end
    
    local info = quest.Name .. "\n"
    info = info .. "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n"
    
    for i, task in ipairs(quest.Tasks) do
        local status = task.Current >= task.Required and "‚úÖ" or "‚è≥"
        local progress = task.Current .. "/" .. task.Required
        local percentage = math.floor((task.Current / task.Required) * 100)
        
        info = info .. status .. " " .. task.Name .. "\n"
        info = info .. "   " .. progress .. " (" .. percentage .. "%)\n"
    end
    
    return info
end

-- ============================================
-- MANUAL UPDATE (BACKUP)
-- ============================================

function AutoQuestModule.SetTaskProgress(questName, taskIndex, current)
    local quest = AutoQuestModule.Quests[questName]
    if not quest or not quest.Tasks[taskIndex] then return false end
    
    quest.Tasks[taskIndex].Current = math.min(current, quest.Tasks[taskIndex].Required)
    
    local allCompleted = true
    for _, task in ipairs(quest.Tasks) do
        if task.Current < task.Required then
            allCompleted = false
            break
        end
    end
    quest.Completed = allCompleted
    
    return true
end

-- ============================================
-- MONITOR ATTRIBUTE CHANGES
-- ============================================

function AutoQuestModule.StartMonitoring()
    Player:GetAttributeChangedSignal("FishingRod"):Connect(function()
        local rod = Player:GetAttribute("FishingRod")
        AutoQuestModule.DetectQuestCompletion()
    end)
end

-- ============================================
-- DEBUG FUNCTIONS
-- ============================================

function AutoQuestModule.DebugPrintAll()
    print("\n‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó")
    print("‚ïë       FISH IT QUEST STATUS             ‚ïë")
    print("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n")
    
    print(AutoQuestModule.GetQuestInfo("DeepSeaQuest"))
    print("\n")
    print(AutoQuestModule.GetQuestInfo("ElementQuest"))
    
    print("\n‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù")
end

function AutoQuestModule.DebugCheckRod()
    local currentRod = Player:GetAttribute("FishingRod")
    print("\nüé£ CURRENT ROD CHECK:")
    print("   Rod: " .. tostring(currentRod))
    
    if currentRod then
        if currentRod:find("Ghostfinn") then
            print("   ‚úÖ Has Ghostfinn Rod")
        end
        if currentRod:find("Element") then
            print("   ‚úÖ Has Element Rod")
        end
    end
    print("")
end

-- ============================================
-- ALIASES
-- ============================================

AutoQuestModule.ScanQuestProgress = AutoQuestModule.DetectQuestCompletion
AutoQuestModule.ScanPlayerData = AutoQuestModule.DetectQuestCompletion
AutoQuestModule.DebugCheckItems = AutoQuestModule.DebugCheckRod
AutoQuestModule.SmartDetect = AutoQuestModule.DetectQuestCompletion

-- ============================================
-- AUTO INIT
-- ============================================

task.spawn(function()
    task.wait(2)
    AutoQuestModule.DetectQuestCompletion()
    AutoQuestModule.StartMonitoring()
end)

return AutoQuestModule

============================================================
-- File 23: ./Project_code/Quest/LeverQuest.lua
============================================================

--========================================================--
--       AutoTempleModule (NO YIELD, SAFE FIND VERSION)
--========================================================--

local AutoTemple = {}
local Run = false

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

------------------------------------------------------------
-- SAFE FIND SYSTEM (Anti Infinite Yield)
------------------------------------------------------------
local function SafeFind(parent, name)
    if not parent then return nil end
    return parent:FindFirstChild(name)
end

-- MAIN FOLDERS
local Shared = SafeFind(ReplicatedStorage, "Shared")
local Types = SafeFind(Shared, "Types")
local TempleStateFolder = SafeFind(Types, "TempleState")
local TempleLeverFolder = SafeFind(TempleStateFolder, "TempleLevers")

-- MAP FOLDER
local JungleFolder = SafeFind(Workspace, "JUNGLE INTERACTIONS")

-- Jika folder wajib tidak ada, AutoTemple tetap aman dipanggil (tidak error)
local LeverTypes = {
    "Crescent Artifact",
    "Arrow Artifact",
    "Diamond Artifact",
    "Hourglass Diamond Artifact"
}

------------------------------------------------------------
-- AMBIL STATUS LEVER DARI ATTRIBUTE ASLI GAME
------------------------------------------------------------
local function GetTempleProgress()
    local result = {}

    if not TempleLeverFolder then
        -- Kalau tidak ada folder, anggap semua FALSE (biar aman)
        for _, typeName in ipairs(LeverTypes) do
            result[typeName] = false
        end
        return result
    end

    for _, typeName in ipairs(LeverTypes) do
        local lever = SafeFind(TempleLeverFolder, typeName)
        result[typeName] = lever and lever:GetAttribute("Completed") == true
    end

    return result
end

------------------------------------------------------------
-- CARI LEVER FISIK DI MAP
------------------------------------------------------------
local function FindLeverByType(typeName)
    if not JungleFolder then return nil end

    for _, obj in ipairs(JungleFolder:GetChildren()) do
        if obj.Name == "TempleLever" then
            local Type = obj:GetAttribute("Type")
            if Type == typeName then
                local part = SafeFind(obj, "MovePiece") or obj:FindFirstChildWhichIsA("BasePart")
                if part then
                    return obj, part.Position
                end
            end
        end
    end

    return nil
end

------------------------------------------------------------
-- PROGRESS TEXT UNTUK GUI
------------------------------------------------------------
function AutoTemple.GetTempleInfoText()
    local prog = GetTempleProgress()
    local lines = {}

    for _, typeName in ipairs(LeverTypes) do
        table.insert(lines, typeName .. " : " .. (prog[typeName] and "‚úÖ" or "‚ùå"))
    end

    return table.concat(lines, "\n")
end

------------------------------------------------------------
-- TELEPORT DIRECT CFRAME
------------------------------------------------------------
local function TeleportTo(pos)
    local char = LocalPlayer.Character
    if not char then return end

    local hrp = SafeFind(char, "HumanoidRootPart")
    if not hrp then return end

    hrp.CFrame = CFrame.new(pos + Vector3.new(0, 3, 0))
end

------------------------------------------------------------
-- AMBIL LEVER YANG BELUM SELESAI
------------------------------------------------------------
local function GetNextLever()
    local prog = GetTempleProgress()

    for _, typeName in ipairs(LeverTypes) do
        if not prog[typeName] then
            local model, pos = FindLeverByType(typeName)
            if pos then return typeName, pos end
        end
    end

    return nil
end

------------------------------------------------------------
-- START AUTO TEMPLE
------------------------------------------------------------
function AutoTemple.Start()
    if Run then return end
    Run = true

    task.spawn(function()
        while Run do
            local typeName, pos = GetNextLever()

            if not typeName then
                Run = false
                break
            end

            TeleportTo(pos)
            task.wait(1.2)
        end
    end)
end

------------------------------------------------------------
-- STOP AUTO TEMPLE
------------------------------------------------------------
function AutoTemple.Stop()
    Run = false
end

return AutoTemple

============================================================
-- File 24: ./Project_code/Quest/QuestFishingIntegration.lua
============================================================

-- ============================================
-- QUEST FISHING INTEGRATION MODULE
-- Auto fishing + auto teleport based on quest requirements
-- ============================================

local QuestFishingIntegration = {}

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Player = Players.LocalPlayer

-- ============================================
-- STATE MANAGEMENT
-- ============================================

QuestFishingIntegration.Active = false
QuestFishingIntegration.CurrentQuest = nil
QuestFishingIntegration.CurrentTask = nil
QuestFishingIntegration.CurrentLocation = nil

-- Stats tracking
QuestFishingIntegration.Stats = {
    SessionStartTime = 0,
    FishCaught = 0,
    RareFish = 0,
    EpicFish = 0,
    LegendaryFish = 0,
    MythicFish = 0,
    SecretFish = 0,
    CoinsEarned = 0
}

-- ============================================
-- MODULES DEPENDENCIES (akan di-load dari main)
-- ============================================

local AutoQuestModule = nil
local BlatantAutoFishing = nil
local NotifyModule = nil

-- ============================================
-- INITIALIZATION
-- ============================================

function QuestFishingIntegration.Initialize(modules)
    AutoQuestModule = modules.AutoQuestModule
    BlatantAutoFishing = modules.BlatantAutoFishing
    NotifyModule = modules.Notify
    
    if not AutoQuestModule or not BlatantAutoFishing then
        error("‚ùå Required modules not loaded!")
        return false
    end
    
    print("‚úÖ QuestFishingIntegration initialized")
    return true
end

-- ============================================
-- FISH CAUGHT EVENT LISTENER
-- ============================================

local FishCaughtListener = nil
local ObtainedFishListener = nil

-- ‚úÖ FISH IT SPECIFIC: Load Items and Variants modules
local Items, Variants
local function loadGameModules()
    local success = pcall(function()
        Items = require(ReplicatedStorage:WaitForChild("Items"))
        Variants = require(ReplicatedStorage:WaitForChild("Variants"))
    end)
    return success
end

-- ‚úÖ FISH IT: Get fish data by ID
local function getFish(itemId)
    if not Items then return nil end
    
    for _, f in pairs(Items) do
        if f.Data and f.Data.Id == itemId then
            return f
        end
    end
end

-- ‚úÖ FISH IT: Tier names (1-7)
local TIER_NAMES = {
    [1] = "Common",
    [2] = "Uncommon", 
    [3] = "Rare",
    [4] = "Epic",
    [5] = "Legendary",
    [6] = "Mythic",
    [7] = "SECRET"  -- ‚≠ê FISH IT uses "SECRET" not "Mythical"!
}

local function setupFishListener()
    if FishCaughtListener then
        FishCaughtListener:Disconnect()
    end
    if ObtainedFishListener then
        ObtainedFishListener:Disconnect()
    end
    
    -- Load game modules
    if not loadGameModules() then
        warn("‚ö†Ô∏è Failed to load Items/Variants modules")
        return
    end
    
    -- ‚úÖ FISH IT SPECIFIC PATH
    local netFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index")
        :WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
    
    -- ‚≠ê USE ObtainedNewFishNotification (Fish It specific event)
    local RE_ObtainedFish = netFolder:WaitForChild("RE/ObtainedNewFishNotification")
    
    ObtainedFishListener = RE_ObtainedFish.OnClientEvent:Connect(function(itemId, metadata, extraData)
        if not QuestFishingIntegration.Active then return end
        
        -- Get fish data from Items module
        local fish = getFish(itemId)
        if not fish then return end
        
        -- ‚úÖ FISH IT: Tier is a number (1-7)
        local tier = fish.Data.Tier or 1
        local rarityName = TIER_NAMES[tier] or "Common"
        local fishName = fish.Data.Name or "Unknown"
        
        -- Update stats
        QuestFishingIntegration.Stats.FishCaught = QuestFishingIntegration.Stats.FishCaught + 1
        
        -- Track by tier/rarity
        if rarityName == "Rare" then
            QuestFishingIntegration.Stats.RareFish = QuestFishingIntegration.Stats.RareFish + 1
        elseif rarityName == "Epic" then
            QuestFishingIntegration.Stats.EpicFish = QuestFishingIntegration.Stats.EpicFish + 1
        elseif rarityName == "Legendary" then
            QuestFishingIntegration.Stats.LegendaryFish = QuestFishingIntegration.Stats.LegendaryFish + 1
        elseif rarityName == "Mythic" then
            QuestFishingIntegration.Stats.MythicFish = QuestFishingIntegration.Stats.MythicFish + 1
        elseif rarityName == "SECRET" then  -- ‚≠ê FISH IT specific
            QuestFishingIntegration.Stats.SecretFish = QuestFishingIntegration.Stats.SecretFish + 1
        end
        
        -- Update quest task progress
        QuestFishingIntegration.UpdateTaskProgress(fishName, rarityName, fish, metadata)
        
        -- Log
        print(string.format("üêü Caught: %s [%s Tier %d] | Session: %d fish", 
            fishName, rarityName, tier, QuestFishingIntegration.Stats.FishCaught))
    end)
end

-- ============================================
-- UPDATE TASK PROGRESS
-- ============================================

function QuestFishingIntegration.UpdateTaskProgress(fishName, rarity, fishData)
    if not QuestFishingIntegration.CurrentQuest or not QuestFishingIntegration.CurrentTask then
        return
    end
    
    local quest = AutoQuestModule.Quests[QuestFishingIntegration.CurrentQuest]
    if not quest then return end
    
    for taskIndex, task in ipairs(quest.Tasks) do
        -- Check if this task is about fishing
        if task.Location == QuestFishingIntegration.CurrentLocation then
            
            -- Match rarity requirement
            if task.FishRarity then
                if rarity == task.FishRarity and task.Current < task.Required then
                    task.Current = task.Current + 1
                    
                    -- Notify
                    if NotifyModule then
                        NotifyModule.Send(
                            "Quest Progress",
                            string.format("%s: %d/%d", task.Name, task.Current, task.Required),
                            3
                        )
                    end
                    
                    -- Check if task completed
                    if task.Current >= task.Required then
                        print("‚úÖ Task completed:", task.Name)
                        
                        -- Move to next task
                        QuestFishingIntegration.NextTask()
                    end
                end
            
            -- Match specific fish name
            elseif task.FishName then
                if fishName == task.FishName and task.Current < task.Required then
                    task.Current = task.Current + 1
                    
                    if NotifyModule then
                        NotifyModule.Send(
                            "Quest Progress",
                            string.format("%s: %d/%d", task.Name, task.Current, task.Required),
                            3
                        )
                    end
                    
                    if task.Current >= task.Required then
                        print("‚úÖ Task completed:", task.Name)
                        QuestFishingIntegration.NextTask()
                    end
                end
            
            -- Generic fish count (any fish at this location)
            else
                if task.Current < task.Required then
                    task.Current = task.Current + 1
                    
                    if task.Current >= task.Required then
                        print("‚úÖ Task completed:", task.Name)
                        QuestFishingIntegration.NextTask()
                    end
                end
            end
        end
    end
end

-- ============================================
-- NEXT TASK LOGIC
-- ============================================

function QuestFishingIntegration.NextTask()
    local quest = AutoQuestModule.Quests[QuestFishingIntegration.CurrentQuest]
    if not quest then return end
    
    -- Find next incomplete task with location
    for _, task in ipairs(quest.Tasks) do
        if task.Location and task.Current < task.Required then
            QuestFishingIntegration.CurrentTask = task
            QuestFishingIntegration.CurrentLocation = task.Location
            
            -- Stop fishing
            if BlatantAutoFishing.Enabled then
                BlatantAutoFishing.Stop()
            end
            
            -- Teleport to new location
            local locationSet = quest.LocationSet
            local coordinates = AutoQuestModule.Locations[locationSet][task.Location]
            
            if coordinates then
                print("üìç Moving to:", task.Location)
                AutoQuestModule.TeleportToLocation(coordinates)
                
                -- Wait for teleport
                task.wait(2)
                
                -- Resume fishing
                BlatantAutoFishing.Start()
                
                if NotifyModule then
                    NotifyModule.Send(
                        "Quest Location",
                        "Now at: " .. task.Location,
                        3
                    )
                end
            end
            
            return
        end
    end
    
    -- No more tasks with locations = quest complete or need manual tasks
    print("üéâ All fishing tasks completed for this quest!")
    QuestFishingIntegration.Stop()
end

-- ============================================
-- START QUEST FISHING
-- ============================================

function QuestFishingIntegration.Start(questName)
    if QuestFishingIntegration.Active then
        print("‚ö†Ô∏è Quest fishing already active!")
        return
    end
    
    local quest = AutoQuestModule.Quests[questName]
    if not quest then
        print("‚ùå Quest not found:", questName)
        return
    end
    
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üéØ STARTING QUEST FISHING MODE")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üìú Quest:", quest.Name)
    print("üéÅ Reward:", quest.Reward)
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    QuestFishingIntegration.Active = true
    QuestFishingIntegration.CurrentQuest = questName
    QuestFishingIntegration.Stats.SessionStartTime = tick()
    
    -- Setup listener
    setupFishListener()
    
    -- Find first task with location
    for _, task in ipairs(quest.Tasks) do
        if task.Location and task.Current < task.Required then
            QuestFishingIntegration.CurrentTask = task
            QuestFishingIntegration.CurrentLocation = task.Location
            
            -- Teleport to location
            local locationSet = quest.LocationSet
            local coordinates = AutoQuestModule.Locations[locationSet][task.Location]
            
            if coordinates then
                print("üìç Teleporting to:", task.Location)
                AutoQuestModule.TeleportToLocation(coordinates)
                
                task.wait(2)
                
                -- Start auto fishing
                print("üé£ Starting auto fishing...")
                BlatantAutoFishing.Start()
                
                if NotifyModule then
                    NotifyModule.Send(
                        "Quest Started",
                        quest.Name .. " - " .. task.Location,
                        5
                    )
                end
            end
            
            return
        end
    end
    
    print("‚ö†Ô∏è No fishing tasks found for this quest")
    QuestFishingIntegration.Stop()
end

-- ============================================
-- STOP QUEST FISHING
-- ============================================

function QuestFishingIntegration.Stop()
    if not QuestFishingIntegration.Active then
        print("‚ö†Ô∏è Quest fishing not active")
        return
    end
    
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    print("üõë STOPPING QUEST FISHING MODE")
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    -- Stop auto fishing
    if BlatantAutoFishing and BlatantAutoFishing.Enabled then
        BlatantAutoFishing.Stop()
    end
    
    -- Disconnect listeners
    if FishCaughtListener then
        FishCaughtListener:Disconnect()
        FishCaughtListener = nil
    end
    
    if ObtainedFishListener then
        ObtainedFishListener:Disconnect()
        ObtainedFishListener = nil
    end
    
    -- Print stats
    local sessionTime = tick() - QuestFishingIntegration.Stats.SessionStartTime
    print(string.format("‚è±Ô∏è Session Time: %.1f minutes", sessionTime / 60))
    print("üìä Total Fish Caught:", QuestFishingIntegration.Stats.FishCaught)
    print("   Rare:", QuestFishingIntegration.Stats.RareFish)
    print("   Epic:", QuestFishingIntegration.Stats.EpicFish)
    print("   Legendary:", QuestFishingIntegration.Stats.LegendaryFish)
    print("   Mythic:", QuestFishingIntegration.Stats.MythicFish)
    print("   Secret:", QuestFishingIntegration.Stats.SecretFish)
    print("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ")
    
    -- Reset state
    QuestFishingIntegration.Active = false
    QuestFishingIntegration.CurrentQuest = nil
    QuestFishingIntegration.CurrentTask = nil
    QuestFishingIntegration.CurrentLocation = nil
    
    -- Reset stats
    QuestFishingIntegration.Stats = {
        SessionStartTime = 0,
        FishCaught = 0,
        RareFish = 0,
        EpicFish = 0,
        LegendaryFish = 0,
        MythicFish = 0,
        SecretFish = 0,
        CoinsEarned = 0
    }
end

-- ============================================
-- GET STATUS
-- ============================================

function QuestFishingIntegration.GetStatus()
    if not QuestFishingIntegration.Active then
        return "Quest Fishing: Inactive"
    end
    
    local quest = AutoQuestModule.Quests[QuestFishingIntegration.CurrentQuest]
    local task = QuestFishingIntegration.CurrentTask
    
    local status = "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
    status = status .. "üéØ Quest Fishing Active\n"
    status = status .. "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
    status = status .. "üìú Quest: " .. quest.Name .. "\n"
    status = status .. "üìç Location: " .. (QuestFishingIntegration.CurrentLocation or "Unknown") .. "\n"
    
    if task then
        status = status .. "üìã Current Task: " .. task.Name .. "\n"
        status = status .. string.format("   Progress: %d/%d (%.1f%%)\n", 
            task.Current, task.Required, (task.Current / task.Required) * 100)
    end
    
    status = status .. "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
    status = status .. "üìä Session Stats:\n"
    status = status .. "   Total Fish: " .. QuestFishingIntegration.Stats.FishCaught .. "\n"
    status = status .. "   Rare: " .. QuestFishingIntegration.Stats.RareFish .. "\n"
    status = status .. "   Epic: " .. QuestFishingIntegration.Stats.EpicFish .. "\n"
    status = status .. "   Legendary: " .. QuestFishingIntegration.Stats.LegendaryFish .. "\n"
    status = status .. "   Mythic: " .. QuestFishingIntegration.Stats.MythicFish .. "\n"
    status = status .. "   Secret: " .. QuestFishingIntegration.Stats.SecretFish .. "\n"
    status = status .. "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n"
    
    return status
end

-- ============================================
-- CLEANUP
-- ============================================

Players.PlayerRemoving:Connect(function(player)
    if player == Player then
        if QuestFishingIntegration.Active then
            QuestFishingIntegration.Stop()
        end
    end
end)

return QuestFishingIntegration

============================================================
-- File 25: ./Project_code/Quest/TempleDataReader.lua
============================================================

--========================================================--
--        TempleDataReader V3 (AutoScan + UltraFast)
--========================================================--

local TempleDataReader = {}

local Players = game:GetService("Players")
local Player = Players.LocalPlayer

local Ready = false
local Listeners = {}
local Cached = {}

local KEYS = {
    ["Crescent Artifact"] = {"CrescentArtifact", "Crescent", "Artifact1"},
    ["Arrow Artifact"] = {"ArrowArtifact", "Arrow", "Artifact2"},
    ["Diamond Artifact"] = {"DiamondArtifact", "Diamond", "Artifact3"},
    ["Hourglass Diamond Artifact"] = {"HourglassArtifact", "Hourglass", "Artifact4"},
}

------------------------------------------------------------
-- Safe Get Attribute in many possible locations
------------------------------------------------------------
local function ReadArtifact(mainName, aliases)
    -- Player attribute
    for _, k in ipairs(aliases) do
        local v = Player:GetAttribute(k)
        if v ~= nil then return v == true or v == 1 end
    end

    -- Character attributes
    if Player.Character then
        for _, k in ipairs(aliases) do
            local v = Player.Character:GetAttribute(k)
            if v ~= nil then return v == true or v == 1 end
        end
    end

    -- Folder under Player
    local folder = Player:FindFirstChild("TempleLevers")
    if folder then
        for _, k in ipairs(aliases) do
            local obj = folder:FindFirstChild(k)
            if obj and obj.Value ~= nil then return obj.Value == true end
        end
    end

    -- ReplicatedStorage fallback
    local rs = game:GetService("ReplicatedStorage")
    local gameData = rs:FindFirstChild("GameData")
    if gameData and gameData:FindFirstChild("Temple") then
        local t = gameData.Temple
        for _, k in ipairs(aliases) do
            local obj = t:FindFirstChild(k)
            if obj and obj.Value ~= nil then return obj.Value == true end
        end
    end

    return false
end

------------------------------------------------------------
-- Build readable status table
------------------------------------------------------------
local function BuildStatus()
    local data = {}
    for displayName, aliases in pairs(KEYS) do
        data[displayName] = ReadArtifact(displayName, aliases)
    end
    return data
end

------------------------------------------------------------
-- Fire callbacks
------------------------------------------------------------
local function FireUpdate()
    local status = BuildStatus()
    Cached = status
    for _, fn in ipairs(Listeners) do
        task.spawn(fn, status)
    end
end

------------------------------------------------------------
-- API
------------------------------------------------------------
function TempleDataReader.GetTempleStatus()
    if not Ready then
        return {}
    end
    return Cached
end

function TempleDataReader.OnTempleUpdate(cb)
    table.insert(Listeners, cb)
    if Ready then
        cb(Cached)
    end
end

------------------------------------------------------------
-- Start Scanner
------------------------------------------------------------
task.spawn(function()
    -- Wait until character loaded
    repeat task.wait() until Player.Character

    Ready = true
    Cached = BuildStatus()
    FireUpdate()

    -- Auto monitor attribute changes
    Player.AttributeChanged:Connect(FireUpdate)
    Player.CharacterAdded:Connect(function()
        task.wait(0.5)
        FireUpdate()
    end)
end)

return TempleDataReader

============================================================
-- File 26: ./Project_code/ShopFeatures/AutoBuyWeather.lua
============================================================

-- AutoBuyWeather.lua (MODULE VERSION)

local AutoBuyWeather = {}

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local NetPackage = ReplicatedStorage.Packages._Index["sleitnick_net@0.2.0"]
local RFPurchaseWeatherEvent = NetPackage.net["RF/PurchaseWeatherEvent"]

-- STATE
local isRunning = false
local selected = {}

AutoBuyWeather.AllWeathers = {
    "Cloudy",
    "Storm",
    "Wind",
    "Snow",
    "Radiant",
    "Shark Hunt"
}

-- Set cuaca terpilih
function AutoBuyWeather.SetSelected(list)
    selected = list
end

-- Start auto maintain
function AutoBuyWeather.Start()
    if isRunning then return end
    isRunning = true

    task.spawn(function()
        while isRunning do
            for _, weather in ipairs(selected) do
                if not isRunning then break end
                pcall(function()
                    RFPurchaseWeatherEvent:InvokeServer(weather)
                end)
                task.wait(2)
            end
            task.wait(15)
        end
    end)
end

-- Stop auto maintain
function AutoBuyWeather.Stop()
    isRunning = false
end

-- Getter untuk GUI status
function AutoBuyWeather.GetStatus()
    return {
        Running = isRunning,
        Selected = selected
    }
end

return AutoBuyWeather

============================================================
-- File 27: ./Project_code/ShopFeatures/AutoSell.lua
============================================================

-- FungsiKeaby/ShopFeatures/AutoSell.lua
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local AutoSell = {}

local function findSellRemotes()
	local sellRemotes = {}
	local keywords = { "sell", "vendor", "trade", "shop", "merchant", "salvage", "exchange", "deposit", "convert" }

	for _, obj in ipairs(ReplicatedStorage:GetDescendants()) do
		if obj:IsA("RemoteEvent") or obj:IsA("RemoteFunction") then
			local name = string.lower(obj.Name)
			for _, key in ipairs(keywords) do
				if string.find(name, key) then
					table.insert(sellRemotes, obj)
					if string.find(name, "sellall") then
						print("üéØ Found SellAll Remote:", obj:GetFullName())
						return obj
					end
				end
			end
		end
	end
	return sellRemotes[1]
end

function AutoSell.SellOnce()
	print("üí∏ Attempting to sell all fish...")

	local remote = findSellRemotes()
	if not remote then
		warn("‚ùå Sell remote not found!")
		return
	end

	pcall(function()
		if remote:IsA("RemoteEvent") then
			remote:FireServer("all")
			print("‚úÖ Sold via RemoteEvent:", remote.Name)
		elseif remote:IsA("RemoteFunction") then
			remote:InvokeServer("all")
			print("‚úÖ Sold via RemoteFunction:", remote.Name)
		else
			warn("‚ö†Ô∏è Invalid remote type for selling")
		end
	end)
end

_G.AutoSell = AutoSell
return AutoSell

============================================================
-- File 28: ./Project_code/ShopFeatures/AutoSellSystem.lua
============================================================

-- AutoSellSystem.lua
-- COMBINED: Sell All, Auto Sell Timer, Auto Sell By Count
-- Clean module version - no GUI, no logs

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- ===== FIND SELL REMOTE =====
local function findSellRemote()
	local packages = ReplicatedStorage:FindFirstChild("Packages")
	if not packages then return nil end
	
	local index = packages:FindFirstChild("_Index")
	if not index then return nil end
	
	local sleitnick = index:FindFirstChild("sleitnick_net@0.2.0")
	if not sleitnick then return nil end
	
	local net = sleitnick:FindFirstChild("net")
	if not net then return nil end
	
	local sellRemote = net:FindFirstChild("RF/SellAllItems")
	if sellRemote then return sellRemote end
	
	local rf = net:FindFirstChild("RF")
	if rf then
		sellRemote = rf:FindFirstChild("SellAllItems")
		if sellRemote then return sellRemote end
	end
	
	for _, child in ipairs(net:GetDescendants()) do
		if child.Name == "SellAllItems" or child.Name == "RF/SellAllItems" then
			return child
		end
	end
	
	return nil
end

local SellRemote = findSellRemote()

-- ===== BAG PARSER (for Auto Sell By Count) =====
local function parseNumber(text)
	if not text or text == "" then return 0 end
	local cleaned = tostring(text):gsub("%D", "")
	if cleaned == "" then return 0 end
	return tonumber(cleaned) or 0
end

local function getBagCount()
	local gui = player:FindFirstChild("PlayerGui")
	if not gui then return 0, 0 end

	local inv = gui:FindFirstChild("Inventory")
	if not inv then return 0, 0 end

	local label = inv:FindFirstChild("Main")
		and inv.Main:FindFirstChild("Top")
		and inv.Main.Top:FindFirstChild("Options")
		and inv.Main.Top.Options:FindFirstChild("Fish")
		and inv.Main.Top.Options.Fish:FindFirstChild("Label")
		and inv.Main.Top.Options.Fish.Label:FindFirstChild("BagSize")

	if not label or not label:IsA("TextLabel") then return 0, 0 end

	local curText, maxText = label.Text:match("(.+)%/(.+)")
	if not curText or not maxText then return 0, 0 end

	return parseNumber(curText), parseNumber(maxText)
end

-- ===== MAIN MODULE =====
local AutoSellSystem = {
	Remote = SellRemote,
	
	-- Sell All Stats
	_totalSells = 0,
	_lastSellTime = 0,
	
	-- Timer Mode
	Timer = {
		Enabled = false,
		Interval = 5,
		Thread = nil,
		_sellCount = 0
	},
	
	-- Count Mode
	Count = {
		Enabled = false,
		Target = 235,
		CheckDelay = 1.5,
		_lastSell = 0,
		_thread = nil
	}
}

-- ===== CORE SELL FUNCTION =====
local function executeSell()
	if not SellRemote then return false end
	
	local success, result = pcall(function()
		return SellRemote:InvokeServer()
	end)
	
	if success then
		AutoSellSystem._totalSells = AutoSellSystem._totalSells + 1
		AutoSellSystem._lastSellTime = tick()
		return true
	end
	
	return false
end

-- ===== SELL ALL (MANUAL) =====
function AutoSellSystem.SellOnce()
	if not SellRemote then return false end
	if tick() - AutoSellSystem._lastSellTime < 0.5 then return false end
	return executeSell()
end

-- ===== TIMER MODE =====
function AutoSellSystem.Timer.Start(interval)
	if AutoSellSystem.Timer.Enabled then return false end
	if not SellRemote then return false end
	
	if interval and tonumber(interval) and tonumber(interval) >= 1 then
		AutoSellSystem.Timer.Interval = tonumber(interval)
	end
	
	AutoSellSystem.Timer.Enabled = true
	AutoSellSystem.Timer._sellCount = 0
	
	AutoSellSystem.Timer.Thread = task.spawn(function()
		while AutoSellSystem.Timer.Enabled do
			task.wait(AutoSellSystem.Timer.Interval)
			
			if not AutoSellSystem.Timer.Enabled then break end
			
			if executeSell() then
				AutoSellSystem.Timer._sellCount = AutoSellSystem.Timer._sellCount + 1
			end
		end
	end)
	
	return true
end

function AutoSellSystem.Timer.Stop()
	if not AutoSellSystem.Timer.Enabled then return false end
	AutoSellSystem.Timer.Enabled = false
	return true
end

function AutoSellSystem.Timer.SetInterval(seconds)
	if tonumber(seconds) and seconds >= 1 then
		AutoSellSystem.Timer.Interval = tonumber(seconds)
		return true
	end
	return false
end

function AutoSellSystem.Timer.GetStatus()
	return {
		enabled = AutoSellSystem.Timer.Enabled,
		interval = AutoSellSystem.Timer.Interval,
		sellCount = AutoSellSystem.Timer._sellCount
	}
end

-- ===== COUNT MODE =====
function AutoSellSystem.Count.Start(target)
	if AutoSellSystem.Count.Enabled then return false end
	if not SellRemote then return false end
	
	if target and tonumber(target) and tonumber(target) > 0 then
		AutoSellSystem.Count.Target = tonumber(target)
	end
	
	AutoSellSystem.Count.Enabled = true
	
	AutoSellSystem.Count._thread = task.spawn(function()
		while AutoSellSystem.Count.Enabled do
			task.wait(AutoSellSystem.Count.CheckDelay)
			
			if not AutoSellSystem.Count.Enabled then break end
			
			local current, max = getBagCount()
			
			if AutoSellSystem.Count.Target > 0 and current >= AutoSellSystem.Count.Target then
				if tick() - AutoSellSystem.Count._lastSell < 3 then
					continue
				end
				
				AutoSellSystem.Count._lastSell = tick()
				executeSell()
				task.wait(2)
			end
		end
	end)
	
	return true
end

function AutoSellSystem.Count.Stop()
	if not AutoSellSystem.Count.Enabled then return false end
	AutoSellSystem.Count.Enabled = false
	return true
end

function AutoSellSystem.Count.SetTarget(count)
	if tonumber(count) and tonumber(count) > 0 then
		AutoSellSystem.Count.Target = tonumber(count)
		return true
	end
	return false
end

function AutoSellSystem.Count.GetStatus()
	local cur, max = getBagCount()
	return {
		enabled = AutoSellSystem.Count.Enabled,
		target = AutoSellSystem.Count.Target,
		current = cur,
		max = max
	}
end

-- ===== UTILITY =====
function AutoSellSystem.GetStats()
	return {
		totalSells = AutoSellSystem._totalSells,
		lastSellTime = AutoSellSystem._lastSellTime,
		remoteFound = SellRemote ~= nil,
		timerStatus = AutoSellSystem.Timer.GetStatus(),
		countStatus = AutoSellSystem.Count.GetStatus()
	}
end

function AutoSellSystem.ResetStats()
	AutoSellSystem._totalSells = 0
	AutoSellSystem._lastSellTime = 0
	AutoSellSystem.Timer._sellCount = 0
end

_G.AutoSellSystem = AutoSellSystem
return AutoSellSystem

============================================================
-- File 29: ./Project_code/ShopFeatures/AutoSellTimer.lua
============================================================

-- FungsiKeaby/ShopFeatures/AutoSellTimer.lua
local AutoSellTimer = {
	Enabled = false,
	Interval = 5,
	Thread = nil
}

-- RAW Notification (langsung SetCore)
local function Notify(title, text, duration)
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration or 4
        })
    end)
end

function AutoSellTimer.Start(interval)
	if AutoSellTimer.Enabled then
		warn("‚ö†Ô∏è AutoSellTimer sudah aktif!")
		return
	end

	if interval and tonumber(interval) and tonumber(interval) >= 1 then
		AutoSellTimer.Interval = tonumber(interval)
	end

	local AutoSell = _G.AutoSell
	if not AutoSell then
		warn("‚ùå Modul AutoSell belum dimuat!")
		return
	end

	AutoSellTimer.Enabled = true
	print("‚úÖ AutoSellTimer dimulai (" .. AutoSellTimer.Interval .. " detik)")
	Notify("Auto Sell Running", "Auto Sell Berjalan!", 4)

	AutoSellTimer.Thread = task.spawn(function()
		while AutoSellTimer.Enabled do
			task.wait(AutoSellTimer.Interval)
			if AutoSellTimer.Enabled and AutoSell and AutoSell.SellOnce then
				print("üí∏ Auto selling (interval " .. AutoSellTimer.Interval .. "s)")
				pcall(AutoSell.SellOnce)
			end
		end
	end)
end

function AutoSellTimer.Stop()
	if not AutoSellTimer.Enabled then
		warn("‚ö†Ô∏è AutoSellTimer belum aktif.")
		return
	end

	AutoSellTimer.Enabled = false
	print("üõë AutoSellTimer dihentikan.")
	Notify("Auto Sell Stopped", "Auto Sell Berhenti!", 4)
end

function AutoSellTimer.SetInterval(seconds)
	if tonumber(seconds) and seconds >= 1 then
		AutoSellTimer.Interval = tonumber(seconds)
		print("‚è∞ Interval auto sell diatur ke " .. seconds .. " detik.")
	else
		warn("‚ùå Interval tidak valid, harus >= 1 detik.")
	end
end

function AutoSellTimer.GetStatus()
	print("\nüìä AUTO SELL TIMER STATUS:")
	print("‚úÖ Enabled:", AutoSellTimer.Enabled)
	print("‚è∞ Interval:", AutoSellTimer.Interval .. " detik")
end

return AutoSellTimer


============================================================
-- File 30: ./Project_code/ShopFeatures/OpenShop.lua
============================================================

-- Remote Merchant System (Standalone Version)
-- Bisa dijalankan via raw link (loadstring + HttpGet)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Merchant UI di PlayerGui
local MerchantUI = PlayerGui:WaitForChild("Merchant")

-- ==== FUNCTIONS ====

local function OpenMerchant()
    if MerchantUI then
        MerchantUI.Enabled = true
    end
end

local function CloseMerchant()
    if MerchantUI then
        MerchantUI.Enabled = false
    end
end

return {
    Open = OpenMerchant,
    Close = CloseMerchant
}

============================================================
-- File 31: ./Project_code/ShopFeatures/RemoteBuyer.lua
============================================================

local RemoteBuyer = {}

local RS = game:GetService("ReplicatedStorage")

-- ==========================================
-- Remote untuk membeli ROD
-- ==========================================
local PurchaseRodRemote =
    RS.Packages["_Index"]["sleitnick_net@0.2.0"].net["RF/PurchaseFishingRod"]

function RemoteBuyer.BuyRod(id)
    task.spawn(function()
        local success, result = pcall(function()
            return PurchaseRodRemote:InvokeServer(id)
        end)

        if success then
            Notify.Send("Buy Rod", "Berhasil membeli rod!", 3)
        else
            Notify.Send("Error", "Gagal membeli rod!", 3)
        end
    end)
end

-- ==========================================
-- Remote untuk membeli BAIT
-- ==========================================
local PurchaseBaitRemote =
    RS.Packages["_Index"]["sleitnick_net@0.2.0"].net["RF/PurchaseBait"]

function RemoteBuyer.BuyBait(id)
    task.spawn(function()
        local success, result = pcall(function()
            return PurchaseBaitRemote:InvokeServer(id)
        end)

        if success then
            Notify.Send("Buy Bait", "Berhasil membeli bait!", 3)
        else
            Notify.Send("Error", "Gagal membeli bait!", 3)
        end
    end)
end

return RemoteBuyer

============================================================
-- File 32: ./Project_code/TeleportModule.lua
============================================================

-- üåç TeleportModule.lua
-- Modul fungsi teleport + daftar lokasi

local TeleportModule = {}

TeleportModule.Locations = {
    ["Ancient Jungle"] = Vector3.new(1467.8480224609375, 7.447117328643799, -327.5971984863281),
    ["Ancient Ruin"] = Vector3.new(6045.40234375, -588.600830078125, 4608.9375),
    ["Coral Reefs"] = Vector3.new(-2921.858154296875, 3.249999761581421, 2083.2978515625),
    ["Crater Island"] = Vector3.new(1078.454345703125, 5.0720038414001465, 5099.396484375),
    ["Classic Island"] = Vector3.new(1253.974853515625, 9.999999046325684, 2816.7646484375),
    ["Christmas Island"] = Vector3.new(1130.576904, 23.854950, 1554.231567),
    ["Christmas Cave"] = Vector3.new(535.279724121093750, -580.581359863281250, 8900.060546875000000),
    ["Iron Cavern"] = Vector3.new(-8881.52734375, -581.7500610351562, 156.1653289794922),
    ["The Iron Cafe"] = Vector3.new(-8642.7265625, -547.5001831054688, 159.8160400390625),
    ["Esoteric Depths"] = Vector3.new(3224.075927734375, -1302.85498046875, 1404.9346923828125),
    ["Fisherman Island"] = Vector3.new(92.80695343017578, 9.531265258789062, 2762.082275390625),
    ["Kohana"] = Vector3.new(-643.3051147460938, 16.03544807434082, 622.3605346679688),
    ["Kohana Volcano"] = Vector3.new(-572.0244750976562, 39.4923210144043, 112.49259185791016),
    ["Lost Isle"] = Vector3.new(-3701.1513671875, 5.425841808319092, -1058.9107666015625),
    ["Sysiphus Statue"] = Vector3.new(-3656.56201171875, -134.5314178466797, -964.3167724609375),
    ["Sacred Temple"] = Vector3.new(1476.30810546875, -21.8499755859375, -630.8220825195312),
    ["Treasure Room"] = Vector3.new(-3601.568359375, -266.57373046875, -1578.998779296875),
    ["Tropical Grove"] = Vector3.new(-2104.467041015625, 6.268016815185547, 3718.2548828125),
    ["Underground Cellar"] = Vector3.new(2162.577392578125, -91.1981430053711, -725.591552734375),
    ["Weather Machine"] = Vector3.new(-1513.9249267578125, 6.499999523162842, 1892.10693359375)
}

function TeleportModule.TeleportTo(name)
    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:WaitForChild("HumanoidRootPart")

    local target = TeleportModule.Locations[name]
    if not target then
        warn("‚ö†Ô∏è Lokasi '" .. tostring(name) .. "' tidak ditemukan!")
        return
    end

    root.CFrame = CFrame.new(target)
    print("‚úÖ Teleported to:", name)
end

return TeleportModule



============================================================
-- File 33: ./Project_code/TeleportSystem/EventTeleportDynamic.lua
============================================================

-- EventTeleportDynamic.lua
-- Optimized version: no lag + proper height offset + smart event detection
-- Put this file on your raw hosting and call it from GUI via loadstring or require

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer

local module = {}

-- =======================
-- Event coordinate database (copy from game's module)
-- =======================
module.Events = {
    ["Shark Hunt"] = {
        Vector3.new(1.64999, -1.3500, 2095.72),
        Vector3.new(1369.94, -1.3500, 930.125),
        Vector3.new(-1585.5, -1.3500, 1242.87),
        Vector3.new(-1896.8, -1.3500, 2634.37),
    },

    ["Worm Hunt"] = {
        Vector3.new(2190.85, -1.3999, 97.5749),
        Vector3.new(-2450.6, -1.3999, 139.731),
        Vector3.new(-267.47, -1.3999, 5188.53),
    },

    ["Megalodon Hunt"] = {
        Vector3.new(-1076.3, -1.3999, 1676.19),
        Vector3.new(-1191.8, -1.3999, 3597.30),
        Vector3.new(412.700, -1.3999, 4134.39),
    },

    ["Ghost Shark Hunt"] = {
        Vector3.new(489.558, -1.3500, 25.4060),
        Vector3.new(-1358.2, -1.3500, 4100.55),
        Vector3.new(627.859, -1.3500, 3798.08),
    },

    ["Treasure Hunt"] = nil, -- no static coords
}

-- =======================
-- Config
-- =======================
module.SearchRadius = 25            -- radius (studs) to consider "spawned object at coord"
module.ScanInterval = 2.0           -- seconds between scans (increased to reduce lag)
module.HeightOffset = 15            -- studs above detected position to teleport (avoid drowning)
module.MaxPartsToCheck = 500        -- limit parts checked per scan (anti-lag)
module.RequireEventSpawned = true   -- only teleport if event object actually detected
module.CacheValidPosition = true    -- use cached position when available
module.CacheDuration = 5            -- seconds to trust cached position
module.TeleportRadius = 50          -- if player within this radius of target, skip teleport (anti-spam)

-- =======================
-- Internal state
-- =======================
local running = false
local currentEventName = nil
local scanCoroutine = nil
local lastValidPosition = nil       -- cache last known good position
local lastValidTime = 0             -- when was last valid position found
local eventDetectedOnce = false     -- track if we ever detected the event spawning
local cachedParts = {}              -- cache workspace parts to reduce GetDescendants calls
local lastCacheUpdate = 0
local cacheUpdateInterval = 5       -- update part cache every 5 seconds

-- ================
-- Utilities
-- ================
local function safeCharacter()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char
end

local function getHRP()
    local char = LocalPlayer.Character
    return char and (char:FindFirstChild("HumanoidRootPart"))
end

-- Update cached parts list (happens infrequently to reduce lag)
local function updatePartCache()
    local now = tick()
    if now - lastCacheUpdate < cacheUpdateInterval then
        return -- use existing cache
    end
    
    lastCacheUpdate = now
    cachedParts = {}
    
    -- Only cache parts that could be event objects (filter out terrain, player characters, etc)
    local count = 0
    for _, inst in ipairs(Workspace:GetDescendants()) do
        if inst:IsA("BasePart") and inst.Parent and inst.Parent.Name ~= "Terrain" then
            -- Skip player characters
            local isPlayerPart = false
            local ancestor = inst.Parent
            for i = 1, 3 do -- check up to 3 levels up
                if ancestor and Players:GetPlayerFromCharacter(ancestor) then
                    isPlayerPart = true
                    break
                end
                ancestor = ancestor.Parent
                if not ancestor then break end
            end
            
            if not isPlayerPart then
                table.insert(cachedParts, inst)
                count = count + 1
                if count >= module.MaxPartsToCheck * 2 then
                    break -- limit initial cache size
                end
            end
        end
    end
end

-- Optimized: find parts near position using cached list and spatial optimization
local function findNearbyObject(centerPos, radius)
    local bestPart = nil
    local bestDist = math.huge
    local radiusSq = radius * radius -- use squared distance to avoid sqrt calculations
    
    -- Try fast path first: GetPartBoundsInBox (most efficient)
    if Workspace.GetPartBoundsInBox then
        local ok, parts = pcall(function()
            return Workspace:GetPartBoundsInBox(
                CFrame.new(centerPos), 
                Vector3.new(radius*2, radius*2, radius*2)
            )
        end)
        
        if ok and parts and #parts > 0 then
            for _, p in ipairs(parts) do
                if p and p:IsA("BasePart") then
                    -- Quick squared distance check
                    local offset = p.Position - centerPos
                    local distSq = offset.X*offset.X + offset.Y*offset.Y + offset.Z*offset.Z
                    
                    if distSq <= radiusSq and distSq < bestDist then
                        bestDist = distSq
                        bestPart = p
                    end
                end
            end
            return bestPart
        end
    end
    
    -- Fallback: use cached parts list (much faster than GetDescendants every time)
    updatePartCache()
    
    local checked = 0
    for _, part in ipairs(cachedParts) do
        if part and part.Parent then -- ensure part still exists
            -- Quick squared distance check
            local offset = part.Position - centerPos
            local distSq = offset.X*offset.X + offset.Y*offset.Y + offset.Z*offset.Z
            
            if distSq <= radiusSq and distSq < bestDist then
                bestDist = distSq
                bestPart = part
            end
            
            checked = checked + 1
            if checked >= module.MaxPartsToCheck then
                break -- anti-lag: limit checks per scan
            end
        end
    end
    
    return bestPart
end

-- Smart position resolver with caching
local function resolveActivePosition(eventName)
    local coords = module.Events[eventName]
    if not coords or #coords == 0 then
        return nil, false
    end
    
    -- Use cached position if still valid (reduces scanning frequency)
    if module.CacheValidPosition and lastValidPosition then
        local age = tick() - lastValidTime
        if age < module.CacheDuration then
            return lastValidPosition, true -- use cached position
        end
    end
    
    -- Scan for event spawn (optimized)
    for _, coord in ipairs(coords) do
        local part = findNearbyObject(coord, module.SearchRadius)
        if part then
            -- EVENT DETECTED! Apply height offset and cache
            local safePos = part.Position + Vector3.new(0, module.HeightOffset, 0)
            lastValidPosition = safePos
            lastValidTime = tick()
            return safePos, true
        end
    end
    
    -- No event detected
    if module.RequireEventSpawned then
        -- Clear cache if event despawned
        if lastValidPosition then
            lastValidPosition = nil
            lastValidTime = 0
        end
        return nil, false
    else
        -- Fallback mode: return closest coord with height offset
        local hrp = getHRP()
        if hrp then
            local best = nil
            local minDistSq = math.huge
            for _, coord in ipairs(coords) do
                local offset = hrp.Position - coord
                local distSq = offset.X*offset.X + offset.Y*offset.Y + offset.Z*offset.Z
                if distSq < minDistSq then
                    minDistSq = distSq
                    best = coord
                end
            end
            if best then
                return best + Vector3.new(0, module.HeightOffset, 0), false
            end
        end
        return coords[1] + Vector3.new(0, module.HeightOffset, 0), false
    end
end

-- Optimized teleport (single operation) with radius check
local function doTeleportToPos(pos)
    if not pos then return false end
    
    local char = LocalPlayer.Character
    if not char then return false end
    
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    -- Check if player is already near target position (anti-spam teleport)
    local currentPos = hrp.Position
    local offset = currentPos - pos
    local distanceSq = offset.X*offset.X + offset.Y*offset.Y + offset.Z*offset.Z
    local radiusSq = module.TeleportRadius * module.TeleportRadius
    
    if distanceSq <= radiusSq then
        return false -- already near target, skip teleport
    end
    
    -- Single teleport operation (most reliable)
    local success = pcall(function()
        hrp.CFrame = CFrame.new(pos)
    end)
    
    return success
end

-- Exposed simple call: teleport once now to eventName
function module.TeleportNow(eventName)
    if not eventName then return false end
    
    local ok, pos, isSpawned = pcall(function()
        return resolveActivePosition(eventName)
    end)
    
    if not ok or not pos then
        return false
    end
    
    if module.RequireEventSpawned and not isSpawned then
        return false
    end
    
    return doTeleportToPos(pos)
end

-- Start auto-teleport loop (optimized, non-blocking)
function module.Start(eventName)
    if running then return false end
    if not eventName or not module.Events[eventName] then return false end
    
    running = true
    currentEventName = eventName
    eventDetectedOnce = false
    lastValidPosition = nil
    lastValidTime = 0
    
    -- Non-blocking coroutine loop
    scanCoroutine = task.spawn(function()
        while running do
            -- Wrap in pcall to prevent errors from breaking loop
            local ok, pos, isSpawned = pcall(function()
                return resolveActivePosition(currentEventName)
            end)
            
            if ok and pos then
                if module.RequireEventSpawned then
                    if isSpawned then
                        if not eventDetectedOnce then
                            eventDetectedOnce = true
                        end
                        doTeleportToPos(pos)
                    end
                else
                    doTeleportToPos(pos)
                end
            end
            
            -- Wait before next scan (reduces CPU usage significantly)
            task.wait(module.ScanInterval)
        end
    end)
    
    return true
end

function module.Stop()
    running = false
    currentEventName = nil
    eventDetectedOnce = false
    lastValidPosition = nil
    lastValidTime = 0
    cachedParts = {}
    
    if scanCoroutine then
        task.cancel(scanCoroutine)
        scanCoroutine = nil
    end
    
    return true
end

-- Utility: get event list (names)
function module.GetEventNames()
    local list = {}
    for name, _ in pairs(module.Events) do
        table.insert(list, name)
    end
    table.sort(list)
    return list
end

-- Utility: returns whether event has static coords
function module.HasCoords(eventName)
    local v = module.Events[eventName]
    return v ~= nil and #v > 0
end

-- Utility: check if event is currently spawned (cached result)
function module.IsEventActive(eventName)
    if not eventName then return false end
    
    -- Quick check using cache
    if lastValidPosition and currentEventName == eventName then
        local age = tick() - lastValidTime
        if age < module.CacheDuration then
            return true
        end
    end
    
    -- Full check if needed
    local ok, pos, isSpawned = pcall(function()
        return resolveActivePosition(eventName)
    end)
    
    return ok and isSpawned or false
end

-- Utility: get performance stats
function module.GetStats()
    return {
        running = running,
        eventName = currentEventName,
        eventDetected = eventDetectedOnce,
        cachedParts = #cachedParts,
        hasCachedPosition = lastValidPosition ~= nil,
        cacheAge = lastValidPosition and (tick() - lastValidTime) or 0
    }
end

return module

============================================================
-- File 34: ./Project_code/TeleportSystem/NotificationModule.lua
============================================================

local Notification = {}

function Notification.Send(title, text, duration)
    duration = duration or 4

    -- Gunakan pcall supaya tidak error di Delta / exploit lain
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration
        })
    end)
end

return Notification

============================================================
-- File 35: ./Project_code/TeleportSystem/SavedLocation.lua
============================================================

-- SaveLocation.lua
local SaveLocation = {}

local savedPos = nil

-- RAW Notification (langsung SetCore)
local function Notify(title, text, duration)
    pcall(function()
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration or 4
        })
    end)
end

-- Simpan posisi
function SaveLocation.Save()
    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    savedPos = hrp.Position

    Notify("Saved Location", "Lokasi tersimpan!", 4)
end

-- Teleport ke lokasi tersimpan
function SaveLocation.Teleport()
    if not savedPos then
        Notify("Error", "Belum ada lokasi yang disimpan!", 4)
        return false
    end
    
    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    hrp.CFrame = CFrame.new(savedPos)

    Notify("Teleported", "Teleport berhasil!", 4)
    return true
end

-- Reset lokasi tersimpan
function SaveLocation.Reset()
    savedPos = nil
    Notify("Location Reset", "Lokasi tersimpan dihapus!", 4)
end

return SaveLocation

============================================================
-- File 36: ./Project_code/TeleportSystem/TeleportToPlayer.lua
============================================================

local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

local TeleportToPlayer = {}

function TeleportToPlayer.TeleportTo(playerName)
    local target = Players:FindFirstChild(playerName)
    local myChar = localPlayer.Character
    if not target or not target.Character then return end

    local targetHRP = target.Character:FindFirstChild("HumanoidRootPart")
    local myHRP = myChar and myChar:FindFirstChild("HumanoidRootPart")

    if targetHRP and myHRP then
        myHRP.CFrame = targetHRP.CFrame + Vector3.new(0, 3, 0)
        print("[Teleport] üöÄ Teleported to player: " .. playerName)
    else
        warn("[Teleport] ‚ùå Gagal teleport, HRP tidak ditemukan.")
    end
end

return TeleportToPlayer

============================================================
-- File 37: ./Project_code/Utama/AutoEquipRod.lua
============================================================

-- FISH IT - AUTO EQUIP ROD MODULE
-- Module for automatically equipping fishing rod

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()

-- =====================================================
-- MODULE
-- =====================================================
local AutoEquipRod = {}
AutoEquipRod.Enabled = false
AutoEquipRod.CheckInterval = 0.5
AutoEquipRod.RodSlot = 1
AutoEquipRod.Connection = nil

-- =====================================================
-- REMOTE EVENT
-- =====================================================
local NetFolder = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local EquipToolRE = NetFolder:WaitForChild("RE/EquipToolFromHotbar")

-- =====================================================
-- HELPER FUNCTIONS
-- =====================================================

local function IsHoldingRod()
    local tool = Character:FindFirstChildOfClass("Tool")
    
    if tool then
        local toolName = tool.Name:lower()
        if toolName:find("rod") or toolName:find("fishing") or toolName:find("pole") then
            return true
        end
    end
    
    return false
end

local function EquipRod()
    if not AutoEquipRod.Enabled then return end
    
    pcall(function()
        EquipToolRE:FireServer(AutoEquipRod.RodSlot)
    end)
end

local function CheckAndEquipRod()
    if not AutoEquipRod.Enabled then return end
    
    if not IsHoldingRod() then
        EquipRod()
    end
end

-- =====================================================
-- MODULE FUNCTIONS
-- =====================================================

function AutoEquipRod.Start()
    if AutoEquipRod.Connection then
        AutoEquipRod.Connection:Disconnect()
    end
    
    AutoEquipRod.Enabled = true
    local lastCheck = 0
    
    AutoEquipRod.Connection = RunService.Heartbeat:Connect(function()
        if not AutoEquipRod.Enabled then return end
        
        local currentTime = tick()
        if currentTime - lastCheck >= AutoEquipRod.CheckInterval then
            lastCheck = currentTime
            CheckAndEquipRod()
        end
    end)
end

function AutoEquipRod.Stop()
    AutoEquipRod.Enabled = false
    
    if AutoEquipRod.Connection then
        AutoEquipRod.Connection:Disconnect()
        AutoEquipRod.Connection = nil
    end
end

function AutoEquipRod.SetRodSlot(slot)
    if slot >= 1 and slot <= 9 then
        AutoEquipRod.RodSlot = slot
    end
end

function AutoEquipRod.IsHoldingRod()
    return IsHoldingRod()
end

-- =====================================================
-- CHARACTER RESPAWN HANDLING
-- =====================================================
LocalPlayer.CharacterAdded:Connect(function(newCharacter)
    Character = newCharacter
    
    if AutoEquipRod.Enabled then
        task.wait(2)
        CheckAndEquipRod()
    end
end)

return AutoEquipRod

============================================================
-- File 38: ./Project_code/Utama/AutoFavorite.lua
============================================================

-- ============================================
-- AUTO FAVORITE SYSTEM (MEMORY SAFE) - FIXED
-- ============================================

local AutoFavorite = {}

-- Tier mapping
local TIER_MAP = {
    ["Common"] = 1,
    ["Uncommon"] = 2,
    ["Rare"] = 3,
    ["Epic"] = 4,
    ["Legendary"] = 5,
    ["Mythic"] = 6,
    ["SECRET"] = 7
}

-- State variables
local AUTO_FAVORITE_TIERS = {}
local AUTO_FAVORITE_VARIANTS = {}
local AUTO_FAVORITE_ENABLED = false

-- Connection management
local activeConnections = {}

-- Get required services
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Get favorite event
local FavoriteEvent = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RE/FavoriteItem")

-- Get notification event
local NotificationEvent = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RE/ObtainedNewFishNotification")

-- Get fish data helper (cached)
local itemsModule = require(ReplicatedStorage:WaitForChild("Items"))

-- Cache untuk fish data (prevent repeated lookups)
local fishDataCache = {}

local function getFishData(itemId)
    -- Check cache first
    if fishDataCache[itemId] then
        return fishDataCache[itemId]
    end
    
    -- Lookup and cache
    for _, fish in pairs(itemsModule) do
        if fish.Data and fish.Data.Id == itemId then
            fishDataCache[itemId] = fish
            return fish
        end
    end
    
    return nil
end

-- ============================================
-- PUBLIC FUNCTIONS FOR GUI
-- ============================================

function AutoFavorite.GetAllTiers()
    return {"Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythic", "SECRET"}
end

function AutoFavorite.GetAllVariants()
    return {
        "Galaxy",
        "Corrupt",
        "Gemstone",
        "Fairy Dust",
        "Midnight",
        "Color Burn",
        "Holographic",
        "Lightning",
        "Radioactive",
        "Ghost",
        "Gold",
        "Frozen",
        "1x1x1x1",
        "Stone",
        "Sandy",
        "Noob",
        "Moon Fragment",
        "Festive",
        "Albino",
        "Arctic Frost",
        "Disco"
    }
end

function AutoFavorite.EnableTiers(selectedTiers)
    for _, tierName in ipairs(selectedTiers) do
        local tier = TIER_MAP[tierName]
        if tier then
            AUTO_FAVORITE_TIERS[tier] = true
        end
    end
end

function AutoFavorite.ClearTiers()
    table.clear(AUTO_FAVORITE_TIERS)
end

function AutoFavorite.EnableVariants(selectedVariants)
    for _, variantName in ipairs(selectedVariants) do
        AUTO_FAVORITE_VARIANTS[variantName] = true
    end
end

function AutoFavorite.ClearVariants()
    table.clear(AUTO_FAVORITE_VARIANTS)
end

-- ============================================
-- CONNECTION MANAGEMENT
-- ============================================

local function disconnectAll()
    for _, conn in pairs(activeConnections) do
        if conn and conn.Connected then
            conn:Disconnect()
        end
    end
    table.clear(activeConnections)
end

-- ‚úÖ FIXED: Ubah dari colon (:) ke dot (.) syntax
function AutoFavorite.Start()
    -- Disconnect existing connections first
    disconnectAll()
    
    AUTO_FAVORITE_ENABLED = true
    
    -- Create new connection
    local connection = NotificationEvent.OnClientEvent:Connect(function(itemId, metadata, extraData)
        if not AUTO_FAVORITE_ENABLED then 
            return 
        end
        
        -- Early exit checks
        if not extraData or not extraData.InventoryItem then
            return
        end
        
        local inventoryItem = extraData.InventoryItem
        local uuid = inventoryItem.UUID
        
        if not uuid or inventoryItem.Favorited then 
            return 
        end

        local shouldFavorite = false

        -- Check Tier
        if next(AUTO_FAVORITE_TIERS) then
            local fishData = getFishData(itemId)
            if fishData and fishData.Data and fishData.Data.Tier then
                if AUTO_FAVORITE_TIERS[fishData.Data.Tier] then
                    shouldFavorite = true
                end
            end
        end

        -- Check Variant (only if not already marked for favorite)
        if not shouldFavorite and next(AUTO_FAVORITE_VARIANTS) then
            local variantId = metadata and metadata.VariantId
            if variantId and variantId ~= "None" and AUTO_FAVORITE_VARIANTS[variantId] then
                shouldFavorite = true
            end
        end

        -- Execute Favorite
        if shouldFavorite then
            task.delay(0.35, function()
                pcall(function()
                    FavoriteEvent:FireServer(uuid)
                end)
            end)
        end
    end)
    
    -- Store connection
    table.insert(activeConnections, connection)
end

-- ‚úÖ FIXED: Ubah dari colon (:) ke dot (.) syntax
function AutoFavorite.Stop()
    AUTO_FAVORITE_ENABLED = false
    disconnectAll()
end

-- ============================================
-- CLEANUP ON MODULE UNLOAD
-- ============================================

local function cleanup()
    disconnectAll()
    table.clear(AUTO_FAVORITE_TIERS)
    table.clear(AUTO_FAVORITE_VARIANTS)
    table.clear(fishDataCache)
    AUTO_FAVORITE_ENABLED = false
end

-- Register cleanup
if game then
    game:BindToClose(cleanup)
end

return AutoFavorite

============================================================
-- File 39: ./Project_code/Utama/AutoTotem3x.lua
============================================================

-- AUTO TOTEM 3X (CLEAN VERSION - FOR GUI INTEGRATION)
local AutoTotem3X = {}

local Players = game:GetService("Players")
local RS = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local LP = Players.LocalPlayer
local Net = RS.Packages["_Index"]["sleitnick_net@0.2.0"].net
local RE_EquipToolFromHotbar = Net["RE/EquipToolFromHotbar"]

-- Settings
local HOTBAR_SLOT = 2
local CLICK_COUNT = 5
local CLICK_DELAY = 0.2
local TRIANGLE_RADIUS = 58
local CENTER_OFFSET = Vector3.new(0, 0, -7.25)

local isRunning = false

-- Teleport Function
local function tp(pos)
    local char = LP.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = CFrame.new(pos)
        task.wait(0.5)
    end
end

-- Equip Totem
local function equipTotem()
    pcall(function()
        RE_EquipToolFromHotbar:FireServer(HOTBAR_SLOT)
    end)
    task.wait(1.5)
end

-- Auto Click
local function autoClick()
    for i = 1, CLICK_COUNT do
        pcall(function()
            VirtualUser:Button1Down(Vector2.new(0, 0))
            task.wait(0.05)
            VirtualUser:Button1Up(Vector2.new(0, 0))
        end)
        task.wait(CLICK_DELAY)
        
        local char = LP.Character
        if char then
            for _, tool in pairs(char:GetChildren()) do
                if tool:IsA("Tool") then
                    pcall(function()
                        tool:Activate()
                    end)
                end
            end
        end
        task.wait(CLICK_DELAY)
    end
end

-- Main Function
function AutoTotem3X.Start()
    if isRunning then
        return false
    end
    
    isRunning = true
    
    task.spawn(function()
        local char = LP.Character or LP.CharacterAdded:Wait()
        local root = char:WaitForChild("HumanoidRootPart")
        
        local centerPos = root.Position
        local adjustedCenter = centerPos + CENTER_OFFSET
        
        -- Calculate 3 totem positions (Triangle pattern)
        local angles = {90, 210, 330}
        local totemPositions = {}
        
        for i, angleDeg in ipairs(angles) do
            local angleRad = math.rad(angleDeg)
            local offsetX = TRIANGLE_RADIUS * math.cos(angleRad)
            local offsetZ = TRIANGLE_RADIUS * math.sin(angleRad)
            table.insert(totemPositions, adjustedCenter + Vector3.new(offsetX, 0, offsetZ))
        end
        
        -- Place totems
        for i, pos in ipairs(totemPositions) do
            if not isRunning then break end
            
            tp(pos)
            equipTotem()
            autoClick()
            task.wait(2)
        end
        
        -- Return to start position
        tp(centerPos)
        task.wait(1)
        
        isRunning = false
    end)
    
    return true
end

function AutoTotem3X.Stop()
    isRunning = false
    return true
end

function AutoTotem3X.IsRunning()
    return isRunning
end

return AutoTotem3X

============================================================
-- File 40: ./Project_code/Utama/BlatantAutoFishing.lua
============================================================

-- BlatantAutoFishing.lua
-- Mode Blatant: Ultra fast fishing based on working Instant2X

local BlatantAutoFishing = {}
BlatantAutoFishing.Enabled = false
BlatantAutoFishing.Settings = {
    FishingDelay = 0.01,      -- Delay setelah catch (blatant: 0.01s)
    CancelDelay = 0.01,       -- Delay cancel (blatant: 0.01s)
    HookDetectionDelay = 0.01, -- Delay deteksi hook (blatant: 0.01s)
    RequestMinigameDelay = 0.01, -- Delay request minigame (blatant: 0.01s)
    TimeoutDelay = 0.5,       -- Timeout fallback (blatant: 0.5s)
}

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local localPlayer = Players.LocalPlayer

-- Network events
local netFolder = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")
local RE_FishCaught = netFolder:WaitForChild("RE/FishCaught")

-- Variables
local WaitingHook = false
local CurrentCycle = 0
local TotalFish = 0
local MinigameConnection = nil
local FishCaughtConnection = nil

local function log(msg)
    print("[Blatant] " .. msg)
end

-- Fungsi Cast
local function Cast()
    if not BlatantAutoFishing.Enabled or WaitingHook then return end
    
    CurrentCycle = CurrentCycle + 1
    
    pcall(function()
        -- 1. Charge fishing rod
        RF_ChargeFishingRod:InvokeServer({[22] = tick()})
        log("üé£ Cast #" .. CurrentCycle)
        
        -- 2. Delay minimal lalu request minigame
        task.wait(BlatantAutoFishing.Settings.RequestMinigameDelay)
        RF_RequestMinigame:InvokeServer(9, 0, tick())
        log("üéØ Minigame requested, waiting hook...")
        
        WaitingHook = true
        
        -- 3. Timeout fallback (jika hook tidak terdeteksi)
        task.delay(BlatantAutoFishing.Settings.TimeoutDelay, function()
            if WaitingHook and BlatantAutoFishing.Enabled then
                WaitingHook = false
                
                -- Force complete
                RE_FishingCompleted:FireServer()
                log("‚è±Ô∏è Timeout - Force complete")
                
                task.wait(BlatantAutoFishing.Settings.CancelDelay)
                pcall(function() RF_CancelFishingInputs:InvokeServer() end)
                
                task.wait(BlatantAutoFishing.Settings.FishingDelay)
                if BlatantAutoFishing.Enabled then Cast() end
            end
        end)
    end)
end

-- Setup event listeners
local function setupListeners()
    -- Listen untuk MinigameChanged (hook detection)
    if MinigameConnection then MinigameConnection:Disconnect() end
    
    MinigameConnection = RE_MinigameChanged.OnClientEvent:Connect(function(state)
        if not BlatantAutoFishing.Enabled then return end
        if not WaitingHook then return end
        
        -- Deteksi hook state
        if typeof(state) == "string" and string.find(string.lower(state), "hook") then
            WaitingHook = false
            
            -- Delay minimal untuk hook detection
            task.wait(BlatantAutoFishing.Settings.HookDetectionDelay)
            
            -- Complete fishing
            RE_FishingCompleted:FireServer()
            log("‚úÖ Hook detected - Fish caught!")
            
            task.wait(BlatantAutoFishing.Settings.CancelDelay)
            pcall(function() RF_CancelFishingInputs:InvokeServer() end)
            
            task.wait(BlatantAutoFishing.Settings.FishingDelay)
            if BlatantAutoFishing.Enabled then Cast() end
        end
    end)
    
    -- Listen untuk FishCaught
    if FishCaughtConnection then FishCaughtConnection:Disconnect() end
    
    FishCaughtConnection = RE_FishCaught.OnClientEvent:Connect(function(fishName, data)
        if not BlatantAutoFishing.Enabled then return end
        
        WaitingHook = false
        TotalFish = TotalFish + 1
        
        log("üêü Fish caught: " .. tostring(fishName) .. " | Total: " .. TotalFish)
        
        task.wait(BlatantAutoFishing.Settings.CancelDelay)
        pcall(function() RF_CancelFishingInputs:InvokeServer() end)
        
        task.wait(BlatantAutoFishing.Settings.FishingDelay)
        if BlatantAutoFishing.Enabled then Cast() end
    end)
end

-- Fungsi Start
function BlatantAutoFishing.Start()
    if BlatantAutoFishing.Enabled then
        warn("‚ö†Ô∏è Blatant Mode sudah aktif!")
        return
    end
    
    print("="..string.rep("=", 50))
    print("üî• BLATANT MODE AKTIF!")
    print("="..string.rep("=", 50))
    print("‚ö° Fishing Delay:", BlatantAutoFishing.Settings.FishingDelay, "s")
    print("‚ö° Cancel Delay:", BlatantAutoFishing.Settings.CancelDelay, "s")
    print("‚ö° Hook Detection Delay:", BlatantAutoFishing.Settings.HookDetectionDelay, "s")
    print("‚ö° Request Minigame Delay:", BlatantAutoFishing.Settings.RequestMinigameDelay, "s")
    print("‚ö° Timeout Delay:", BlatantAutoFishing.Settings.TimeoutDelay, "s")
    print("="..string.rep("=", 50))
    print("‚ö†Ô∏è WARNING: Ultra fast mode - HIGH BAN RISK!")
    print("="..string.rep("=", 50))
    
    BlatantAutoFishing.Enabled = true
    WaitingHook = false
    CurrentCycle = 0
    TotalFish = 0
    
    -- Setup listeners
    setupListeners()
    log("‚úÖ Event listeners installed")
    
    -- Start fishing
    task.wait(0.5)
    Cast()
    
    log("‚úÖ Blatant fishing started!")
end

-- Fungsi Stop
function BlatantAutoFishing.Stop()
    if not BlatantAutoFishing.Enabled then
        warn("‚ö†Ô∏è Blatant Mode sudah tidak aktif!")
        return
    end
    
    BlatantAutoFishing.Enabled = false
    WaitingHook = false
    
    -- Disconnect listeners
    if MinigameConnection then
        MinigameConnection:Disconnect()
        MinigameConnection = nil
    end
    
    if FishCaughtConnection then
        FishCaughtConnection:Disconnect()
        FishCaughtConnection = nil
    end
    
    -- Cancel current fishing
    pcall(function() RF_CancelFishingInputs:InvokeServer() end)
    
    log("üî¥ Blatant Mode stopped | Total fish: " .. TotalFish)
end

-- Handle respawn
Players.LocalPlayer.CharacterAdded:Connect(function()
    if BlatantAutoFishing.Enabled then
        task.wait(2)
        
        log("üîÑ Character respawned, restarting...")
        
        WaitingHook = false
        
        -- Reconnect listeners
        if MinigameConnection then MinigameConnection:Disconnect() end
        if FishCaughtConnection then FishCaughtConnection:Disconnect() end
        
        setupListeners()
        
        task.wait(1)
        Cast()
    end
end)

-- Cleanup
Players.PlayerRemoving:Connect(function(player)
    if player == localPlayer then
        if BlatantAutoFishing.Enabled then
            BlatantAutoFishing.Stop()
        end
    end
end)

return BlatantAutoFishing

============================================================
-- File 41: ./Project_code/Utama/BlatantFixedV1.lua
============================================================

-- ‚ö†Ô∏è BLATANT V2 AUTO FISHING - CLEAN VERSION
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Network initialization
local netFolder = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RF_UpdateAutoFishingState = netFolder:WaitForChild("RF/UpdateAutoFishingState")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")

-- Module table
local BlatantV2 = {}
BlatantV2.Active = false

-- Settings
BlatantV2.Settings = {
    ChargeDelay = 0.007,
    CompleteDelay = 0.001,
    CancelDelay = 0.001
}

----------------------------------------------------------------
-- CORE FISHING FUNCTIONS
----------------------------------------------------------------

local function safeFire(func)
    task.spawn(function()
        pcall(func)
    end)
end

local function ultraSpamLoop()
    while BlatantV2.Active do
        local startTime = tick()
        
        safeFire(function()
            RF_ChargeFishingRod:InvokeServer({[1] = startTime})
        end)
        
        task.wait(BlatantV2.Settings.ChargeDelay)
        
        local releaseTime = tick()
        safeFire(function()
            RF_RequestMinigame:InvokeServer(1, 0, releaseTime)
        end)
        
        task.wait(BlatantV2.Settings.CompleteDelay)
        
        safeFire(function()
            RE_FishingCompleted:FireServer()
        end)
        
        task.wait(BlatantV2.Settings.CancelDelay)
        safeFire(function()
            RF_CancelFishingInputs:InvokeServer()
        end)
    end
end

RE_MinigameChanged.OnClientEvent:Connect(function(state)
    if not BlatantV2.Active then return end
    
    task.spawn(function()
        task.wait(BlatantV2.Settings.CompleteDelay)
        
        safeFire(function()
            RE_FishingCompleted:FireServer()
        end)
        
        task.wait(BlatantV2.Settings.CancelDelay)
        safeFire(function()
            RF_CancelFishingInputs:InvokeServer()
        end)
    end)
end)

----------------------------------------------------------------
-- PUBLIC API
----------------------------------------------------------------

-- Update Settings function
function BlatantV2.UpdateSettings(completeDelay, cancelDelay)
    if completeDelay ~= nil then
        BlatantV2.Settings.CompleteDelay = completeDelay
    end
    
    if cancelDelay ~= nil then
        BlatantV2.Settings.CancelDelay = cancelDelay
    end
end

-- Start function
function BlatantV2.Start()
    if BlatantV2.Active then 
        return
    end
    
    BlatantV2.Active = true
    task.spawn(ultraSpamLoop)
end

-- Stop function
function BlatantV2.Stop()
    if not BlatantV2.Active then 
        return
    end
    
    BlatantV2.Active = false
    
    safeFire(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    task.wait(0.2)
    
    safeFire(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
end

return BlatantV2

============================================================
-- File 42: ./Project_code/Utama/BlatantV1.lua
============================================================

-- ‚ö†Ô∏è ULTRA BLATANT AUTO FISHING - GUI COMPATIBLE MODULE
-- DESIGNED TO WORK WITH EXTERNAL GUI SYSTEM
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Network initialization
local netFolder = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RF_UpdateAutoFishingState = netFolder:WaitForChild("RF/UpdateAutoFishingState")  -- ‚≠ê ADDED untuk stop function
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")

-- Module table
local UltraBlatant = {}
UltraBlatant.Active = false
UltraBlatant.Stats = {
    castCount = 0,
    startTime = 0
}

-- Settings (sesuai dengan pattern GUI kamu)
UltraBlatant.Settings = {
    CompleteDelay = 0.001,    -- Delay sebelum complete
    CancelDelay = 0.001       -- Delay setelah complete sebelum cancel
}

----------------------------------------------------------------
-- CORE FUNCTIONS
----------------------------------------------------------------

local function safeFire(func)
    task.spawn(function()
        pcall(func)
    end)
end

-- MAIN SPAM LOOP
local function ultraSpamLoop()
    while UltraBlatant.Active do
        local currentTime = tick()
        
        -- 1x CHARGE & REQUEST (CASTING)
        safeFire(function()
            RF_ChargeFishingRod:InvokeServer({[1] = currentTime})
        end)
        safeFire(function()
            RF_RequestMinigame:InvokeServer(1, 0, currentTime)
        end)
        
        UltraBlatant.Stats.castCount = UltraBlatant.Stats.castCount + 1
        
        -- Wait CompleteDelay then fire complete once
        task.wait(UltraBlatant.Settings.CompleteDelay)
        
        safeFire(function()
            RE_FishingCompleted:FireServer()
        end)
        
        -- Cancel with CancelDelay
        task.wait(UltraBlatant.Settings.CancelDelay)
        safeFire(function()
            RF_CancelFishingInputs:InvokeServer()
        end)
    end
end

-- BACKUP LISTENER
RE_MinigameChanged.OnClientEvent:Connect(function(state)
    if not UltraBlatant.Active then return end
    
    task.spawn(function()
        task.wait(UltraBlatant.Settings.CompleteDelay)
        
        safeFire(function()
            RE_FishingCompleted:FireServer()
        end)
        
        task.wait(UltraBlatant.Settings.CancelDelay)
        safeFire(function()
            RF_CancelFishingInputs:InvokeServer()
        end)
    end)
end)

----------------------------------------------------------------
-- PUBLIC API (Compatible dengan pattern GUI kamu)
----------------------------------------------------------------

-- ‚≠ê NEW: Update Settings function
function UltraBlatant.UpdateSettings(completeDelay, cancelDelay)
    if completeDelay ~= nil then
        UltraBlatant.Settings.CompleteDelay = completeDelay
        print("‚úÖ UltraBlatant CompleteDelay updated:", completeDelay)
    end
    
    if cancelDelay ~= nil then
        UltraBlatant.Settings.CancelDelay = cancelDelay
        print("‚úÖ UltraBlatant CancelDelay updated:", cancelDelay)
    end
end

-- Start function
function UltraBlatant.Start()
    if UltraBlatant.Active then 
        print("‚ö†Ô∏è Ultra Blatant already running!")
        return
    end
    
    UltraBlatant.Active = true
    UltraBlatant.Stats.castCount = 0
    UltraBlatant.Stats.startTime = tick()
    
    task.spawn(ultraSpamLoop)
end

-- ‚≠ê ENHANCED Stop function - Nyalakan auto fishing game
function UltraBlatant.Stop()
    if not UltraBlatant.Active then 
        return
    end
    
    UltraBlatant.Active = false
    
    -- ‚≠ê Nyalakan auto fishing game (biarkan tetap nyala)
    safeFire(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    -- Wait sebentar untuk game process
    task.wait(0.2)
    
    -- Cancel fishing inputs untuk memastikan karakter berhenti
    safeFire(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
    
    print("‚úÖ Ultra Blatant stopped - Game auto fishing enabled, can change rod/skin")
end

-- Return module
return UltraBlatant

============================================================
-- File 43: ./Project_code/Utama/BlatantV2.lua
============================================================

-- ‚ö° ULTRA BLATANT AUTO FISHING MODULE - CLEAN VERSION
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")

-- Network initialization
local netFolder = ReplicatedStorage
    :WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    
local RF_ChargeFishingRod = netFolder:WaitForChild("RF/ChargeFishingRod")
local RF_RequestMinigame = netFolder:WaitForChild("RF/RequestFishingMinigameStarted")
local RF_CancelFishingInputs = netFolder:WaitForChild("RF/CancelFishingInputs")
local RF_UpdateAutoFishingState = netFolder:WaitForChild("RF/UpdateAutoFishingState")
local RE_FishingCompleted = netFolder:WaitForChild("RE/FishingCompleted")
local RE_MinigameChanged = netFolder:WaitForChild("RE/FishingMinigameChanged")

-- Module
local UltraBlatant = {}
UltraBlatant.Active = false

UltraBlatant.Settings = {
    CompleteDelay = 0.73,
    CancelDelay = 0.3,
    ReCastDelay = 0.001
}

-- State tracking
local FishingState = {
    lastCompleteTime = 0,
    completeCooldown = 0.4
}

----------------------------------------------------------------
-- CORE FUNCTIONS
----------------------------------------------------------------

local function safeFire(func)
    task.spawn(function()
        pcall(func)
    end)
end

local function protectedComplete()
    local now = tick()
    
    if now - FishingState.lastCompleteTime < FishingState.completeCooldown then
        return false
    end
    
    FishingState.lastCompleteTime = now
    safeFire(function()
        RE_FishingCompleted:FireServer()
    end)
    
    return true
end

local function performCast()
    local now = tick()
    
    safeFire(function()
        RF_ChargeFishingRod:InvokeServer({[1] = now})
    end)
    safeFire(function()
        RF_RequestMinigame:InvokeServer(1, 0, now)
    end)
end

local function fishingLoop()
    while UltraBlatant.Active do
        performCast()
        
        task.wait(UltraBlatant.Settings.CompleteDelay)
        
        if UltraBlatant.Active then
            protectedComplete()
        end
        
        task.wait(UltraBlatant.Settings.CancelDelay)
        
        if UltraBlatant.Active then
            safeFire(function()
                RF_CancelFishingInputs:InvokeServer()
            end)
        end
        
        task.wait(UltraBlatant.Settings.ReCastDelay)
    end
end

-- Backup listener
local lastEventTime = 0

RE_MinigameChanged.OnClientEvent:Connect(function(state)
    if not UltraBlatant.Active then return end
    
    local now = tick()
    
    if now - lastEventTime < 0.2 then
        return
    end
    lastEventTime = now
    
    if now - FishingState.lastCompleteTime < 0.3 then
        return
    end
    
    task.spawn(function()
        task.wait(UltraBlatant.Settings.CompleteDelay)
        
        if protectedComplete() then
            task.wait(UltraBlatant.Settings.CancelDelay)
            safeFire(function()
                RF_CancelFishingInputs:InvokeServer()
            end)
        end
    end)
end)

----------------------------------------------------------------
-- PUBLIC API
----------------------------------------------------------------

function UltraBlatant.UpdateSettings(completeDelay, cancelDelay, reCastDelay)
    if completeDelay ~= nil then
        UltraBlatant.Settings.CompleteDelay = completeDelay
    end
    
    if cancelDelay ~= nil then
        UltraBlatant.Settings.CancelDelay = cancelDelay
    end
    
    if reCastDelay ~= nil then
        UltraBlatant.Settings.ReCastDelay = reCastDelay
    end
end

function UltraBlatant.Start()
    if UltraBlatant.Active then 
        return
    end
    
    UltraBlatant.Active = true
    FishingState.lastCompleteTime = 0
    
    safeFire(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    task.wait(0.2)
    task.spawn(fishingLoop)
end

function UltraBlatant.Stop()
    if not UltraBlatant.Active then 
        return
    end
    
    UltraBlatant.Active = false
    
    safeFire(function()
        RF_UpdateAutoFishingState:InvokeServer(true)
    end)
    
    task.wait(0.2)
    
    safeFire(function()
        RF_CancelFishingInputs:InvokeServer()
    end)
end

return UltraBlatant

============================================================
-- File 44: ./Project_code/Utama/DisableCutscenes.lua
============================================================

--=====================================================
-- DisableCutscenes.lua (FINAL MODULE VERSION)
-- Memiliki: Start(), Stop()
--=====================================================

local DisableCutscenes = {}

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local Packages = ReplicatedStorage:WaitForChild("Packages")
local Index = Packages:WaitForChild("_Index")
local NetFolder = Index:WaitForChild("sleitnick_net@0.2.0")
local net = NetFolder:WaitForChild("net")

local ReplicateCutscene = net:FindFirstChild("ReplicateCutscene")
local StopCutscene = net:FindFirstChild("StopCutscene")
local BlackoutScreen = net:FindFirstChild("BlackoutScreen")

local running = false
local _connections = {}
local _loopThread = nil

local function connect(event, fn)
    if event then
        local c = event.OnClientEvent:Connect(fn)
        table.insert(_connections, c)
    end
end

-----------------------------------------------------
-- START
-----------------------------------------------------
function DisableCutscenes.Start()
    if running then return end
    running = true

    -- Block ReplicateCutscene
    connect(ReplicateCutscene, function(...)
        if running and StopCutscene then
            StopCutscene:FireServer()
        end
    end)

    -- Block BlackoutScreen
    connect(BlackoutScreen, function(...)
        -- just ignore
    end)

    -- Loop paksa StopCutscene tiap 1 detik
    _loopThread = task.spawn(function()
        while running do
            if StopCutscene then
                StopCutscene:FireServer()
            end
            task.wait(1)
        end
    end)
end

-----------------------------------------------------
-- STOP
-----------------------------------------------------
function DisableCutscenes.Stop()
    if not running then return end
    running = false

    -- Hapus semua koneksi listener
    for _, c in ipairs(_connections) do
        c:Disconnect()
    end

    _connections = {}

    -- Stop loop
    if _loopThread then
        task.cancel(_loopThread)
        _loopThread = nil
    end
end

-----------------------------------------------------
return DisableCutscenes

============================================================
-- File 45: ./Project_code/Utama/DisableExtras.lua
============================================================

-- DisableExtras.lua
local module = {}

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local VFXFolder = ReplicatedStorage:WaitForChild("VFX")

local activeSmallNotif = false
local activeSkinEffect = false

-- =========================
-- Small Notification
-- =========================
local function disableNotifications()
    if not player or not player:FindFirstChild("PlayerGui") then return end
    local gui = player.PlayerGui
    local existing = gui:FindFirstChild("Small Notification")
    if existing then
        existing:Destroy()
    end
end

-- =========================
-- Skin Effect Dive
-- =========================
local function disableDiveEffects()
    for _, child in pairs(VFXFolder:GetChildren()) do
        if child.Name:match("Dive$") then
            child:Destroy()
        end
    end
end

-- =========================
-- Start / Stop Small Notification
-- =========================
function module.StartSmallNotification()
    if activeSmallNotif then return end
    activeSmallNotif = true

    -- Loop setiap frame
    RunService.Heartbeat:Connect(function()
        if activeSmallNotif then
            disableNotifications()
        end
    end)

    -- Deteksi GUI baru
    player.PlayerGui.ChildAdded:Connect(function(child)
        if activeSmallNotif and child.Name == "Small Notification" then
            child:Destroy()
        end
    end)
end

function module.StopSmallNotification()
    activeSmallNotif = false
end

-- =========================
-- Start / Stop Skin Effect
-- =========================
function module.StartSkinEffect()
    if activeSkinEffect then return end
    activeSkinEffect = true

    -- Hapus efek yang sudah ada
    disableDiveEffects()

    -- Loop setiap frame
    RunService.Heartbeat:Connect(function()
        if activeSkinEffect then
            disableDiveEffects()
        end
    end)

    -- Pantau child baru di VFX
    VFXFolder.ChildAdded:Connect(function(child)
        if activeSkinEffect and child.Name:match("Dive$") then
            child:Destroy()
        end
    end)
end

function module.StopSkinEffect()
    activeSkinEffect = false
end

return module

============================================================
-- File 46: ./Project_code/Utama/LockPosition.lua
============================================================

-- LockPosition.lua
local RunService = game:GetService("RunService")

local LockPosition = {}
LockPosition.Enabled = false
LockPosition.LockedPos = nil
LockPosition.Connection = nil

-- Aktifkan Lock Position
function LockPosition.Start()
    if LockPosition.Enabled then return end
    LockPosition.Enabled = true

    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    LockPosition.LockedPos = hrp.CFrame

    -- Loop untuk menjaga posisi
    LockPosition.Connection = RunService.Heartbeat:Connect(function()
        if not LockPosition.Enabled then return end

        local c = player.Character
        if not c then return end
        
        local hrp2 = c:FindFirstChild("HumanoidRootPart")
        if not hrp2 then return end

        -- Selalu kembalikan ke posisi yang dikunci
        hrp2.CFrame = LockPosition.LockedPos
    end)

    print("Lock Position: Activated")
end

-- Nonaktifkan Lock Position
function LockPosition.Stop()
    LockPosition.Enabled = false

    if LockPosition.Connection then
        LockPosition.Connection:Disconnect()
        LockPosition.Connection = nil
    end

    print("Lock Position: Deactivated")
end

return LockPosition

============================================================
-- File 47: ./Project_code/Utama/NoFishingAnimation.lua
============================================================

-- NoFishingAnimation.lua
-- Auto freeze karakter di pose fishing dengan ZERO animasi
-- Ready untuk diintegrasikan ke GUI

local NoFishingAnimation = {}
NoFishingAnimation.Enabled = false
NoFishingAnimation.Connection = nil
NoFishingAnimation.SavedPose = {}
NoFishingAnimation.ReelingTrack = nil
NoFishingAnimation.AnimationBlocker = nil

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer

-- Fungsi untuk find ReelingIdle animation
local function getOrCreateReelingAnimation()
    local success, result = pcall(function()
        local character = localPlayer.Character
        if not character then return nil end
        
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if not humanoid then return nil end
        
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if not animator then return nil end
        
        -- Cari animasi ReelingIdle yang sudah ada
        for _, track in pairs(animator:GetPlayingAnimationTracks()) do
            local name = track.Name
            if name:find("Reel") and name:find("Idle") then
                return track
            end
        end
        
        -- Cari di semua loaded animations
        for _, track in pairs(humanoid.Animator:GetPlayingAnimationTracks()) do
            if track.Animation then
                if track.Name:find("Reel") then
                    return track
                end
            end
        end
        
        -- Jika tidak ada, coba cari di character tools
        for _, tool in pairs(character:GetChildren()) do
            if tool:IsA("Tool") then
                for _, anim in pairs(tool:GetDescendants()) do
                    if anim:IsA("Animation") then
                        local name = anim.Name
                        if name:find("Reel") and name:find("Idle") then
                            local track = animator:LoadAnimation(anim)
                            return track
                        end
                    end
                end
            end
        end
        
        return nil
    end)
    
    if success then
        return result
    end
    return nil
end

-- Fungsi untuk capture pose dari Motor6D
local function capturePose()
    NoFishingAnimation.SavedPose = {}
    local count = 0
    
    pcall(function()
        local character = localPlayer.Character
        if not character then return end
        
        -- Simpan SEMUA Motor6D
        for _, descendant in pairs(character:GetDescendants()) do
            if descendant:IsA("Motor6D") then
                NoFishingAnimation.SavedPose[descendant.Name] = {
                    Part = descendant,
                    C0 = descendant.C0,
                    C1 = descendant.C1,
                    Transform = descendant.Transform
                }
                count = count + 1
            end
        end
    end)
    
    return count > 0
end

-- Fungsi untuk STOP SEMUA animasi secara permanent
local function killAllAnimations()
    pcall(function()
        local character = localPlayer.Character
        if not character then return end
        
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if not humanoid then return end
        
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if not animator then return end
        
        -- STOP semua playing animations
        for _, track in pairs(animator:GetPlayingAnimationTracks()) do
            track:Stop(0)
            track:Destroy()
        end
        
        -- STOP semua humanoid animations
        for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
            track:Stop(0)
            track:Destroy()
        end
    end)
end

-- Fungsi untuk BLOCK animasi baru agar tidak play
local function blockNewAnimations()
    if NoFishingAnimation.AnimationBlocker then
        NoFishingAnimation.AnimationBlocker:Disconnect()
    end
    
    pcall(function()
        local character = localPlayer.Character
        if not character then return end
        
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if not humanoid then return end
        
        local animator = humanoid:FindFirstChildOfClass("Animator")
        if not animator then return end
        
        -- Hook semua animasi baru yang mau play
        NoFishingAnimation.AnimationBlocker = animator.AnimationPlayed:Connect(function(animTrack)
            if NoFishingAnimation.Enabled then
                animTrack:Stop(0)
                animTrack:Destroy()
            end
        end)
    end)
end

-- Fungsi untuk freeze pose
local function freezePose()
    if NoFishingAnimation.Connection then
        NoFishingAnimation.Connection:Disconnect()
    end
    
    NoFishingAnimation.Connection = RunService.RenderStepped:Connect(function()
        if not NoFishingAnimation.Enabled then return end
        
        pcall(function()
            local character = localPlayer.Character
            if not character then return end
            
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if not humanoid then return end
            
            -- FORCE STOP semua animasi setiap frame
            for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
                track:Stop(0)
            end
            
            -- APPLY SAVED POSE setiap frame
            for jointName, poseData in pairs(NoFishingAnimation.SavedPose) do
                local motor = character:FindFirstChild(jointName, true)
                if motor and motor:IsA("Motor6D") then
                    motor.C0 = poseData.C0
                    motor.C1 = poseData.C1
                end
            end
        end)
    end)
end

-- Fungsi Stop
local function stopFreeze()
    if NoFishingAnimation.Connection then
        NoFishingAnimation.Connection:Disconnect()
        NoFishingAnimation.Connection = nil
    end
    
    if NoFishingAnimation.AnimationBlocker then
        NoFishingAnimation.AnimationBlocker:Disconnect()
        NoFishingAnimation.AnimationBlocker = nil
    end
    
    if NoFishingAnimation.ReelingTrack then
        NoFishingAnimation.ReelingTrack:Stop()
        NoFishingAnimation.ReelingTrack = nil
    end
    
    NoFishingAnimation.SavedPose = {}
end

-- ============================================
-- PUBLIC FUNCTIONS (untuk GUI)
-- ============================================

-- Fungsi Start (AUTO - tanpa perlu memancing dulu)
function NoFishingAnimation.Start()
    if NoFishingAnimation.Enabled then
        return false, "Already enabled"
    end
    
    local character = localPlayer.Character
    if not character then 
        return false, "Character not found"
    end
    
    -- 1. Cari atau buat ReelingIdle animation
    local reelingTrack = getOrCreateReelingAnimation()
    
    if reelingTrack then
        -- 2. Play animasi (pause setelah beberapa frame)
        reelingTrack:Play()
        reelingTrack:AdjustSpeed(0) -- Pause animasi di frame pertama
        
        NoFishingAnimation.ReelingTrack = reelingTrack
        
        -- 3. Tunggu animasi apply ke Motor6D
        task.wait(0.2)
        
        -- 4. Capture pose
        local success = capturePose()
        
        if success then
            -- 5. KILL semua animasi
            killAllAnimations()
            
            -- 6. Block animasi baru
            blockNewAnimations()
            
            -- 7. Enable freeze
            NoFishingAnimation.Enabled = true
            freezePose()
            
            return true, "Pose frozen successfully"
        else
            reelingTrack:Stop()
            return false, "Failed to capture pose"
        end
    else
        return false, "Reeling animation not found"
    end
end

-- Fungsi Start dengan delay (RECOMMENDED)
function NoFishingAnimation.StartWithDelay(delay, callback)
    if NoFishingAnimation.Enabled then
        return false, "Already enabled"
    end
    
    delay = delay or 2
    
    -- Jalankan di coroutine agar tidak blocking
    task.spawn(function()
        task.wait(delay)
        
        local success = capturePose()
        
        if success then
            -- KILL semua animasi
            killAllAnimations()
            
            -- Block animasi baru
            blockNewAnimations()
            
            -- Enable freeze
            NoFishingAnimation.Enabled = true
            freezePose()
            
            -- Callback jika ada
            if callback then
                callback(true, "Pose frozen successfully")
            end
        else
            -- Callback error
            if callback then
                callback(false, "Failed to capture pose")
            end
        end
    end)
    
    return true, "Starting with delay..."
end

-- Fungsi Stop
function NoFishingAnimation.Stop()
    if not NoFishingAnimation.Enabled then
        return false, "Already disabled"
    end
    
    NoFishingAnimation.Enabled = false
    stopFreeze()
    
    return true, "Pose unfrozen"
end

-- Fungsi untuk cek status
function NoFishingAnimation.IsEnabled()
    return NoFishingAnimation.Enabled
end

-- ============================================
-- EVENT HANDLERS
-- ============================================

-- Handle respawn
localPlayer.CharacterAdded:Connect(function(character)
    if NoFishingAnimation.Enabled then
        NoFishingAnimation.Enabled = false
        stopFreeze()
    end
end)

-- Cleanup
game:GetService("Players").PlayerRemoving:Connect(function(player)
    if player == localPlayer then
        if NoFishingAnimation.Enabled then
            NoFishingAnimation.Stop()
        end
    end
end)

return NoFishingAnimation

============================================================
-- File 48: ./Project_code/Utama/PerfectionGood.lua
============================================================

-- Auto Fish Module untuk Roblox
-- Module ini dapat diintegrasikan dengan GUI eksternal

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Module Table
local GoodPerfectionStable = {}
GoodPerfectionStable.Enabled = false

-- Fungsi untuk menghapus UIGradient
local function removeUIGradient()
    local success, err = pcall(function()
        local playerGui = LocalPlayer:WaitForChild("PlayerGui", 5)
        if not playerGui then
            return false
        end
        
        local fishing = playerGui:FindFirstChild("Fishing")
        if not fishing then
            return false
        end
        
        local main = fishing:FindFirstChild("Main")
        if not main then
            return false
        end
        
        local display = main:FindFirstChild("Display")
        if not display then
            return false
        end
        
        local animationBG = display:FindFirstChild("AnimationBG")
        if not animationBG then
            return false
        end
        
        local uiGradient = animationBG:FindFirstChild("UIGradient")
        
        if uiGradient then
            uiGradient:Destroy()
            return true
        else
            return true -- Return true karena tujuan tercapai (tidak ada gradient)
        end
    end)
    
    if not success then
        return false
    end
    
    return true
end

-- Fungsi untuk mengaktifkan auto fishing in-game
local function enableAutoFishing(state)
    local success, result = pcall(function()
        -- Path lengkap sesuai dengan yang Anda berikan
        local packages = ReplicatedStorage:WaitForChild("Packages", 5)
        if not packages then
            warn("Packages tidak ditemukan")
            return false
        end
        
        local index = packages:WaitForChild("_Index", 5)
        if not index then
            warn("_Index tidak ditemukan")
            return false
        end
        
        local sleitnick = index:WaitForChild("sleitnick_net@0.2.0", 5)
        if not sleitnick then
            warn("sleitnick_net@0.2.0 tidak ditemukan")
            return false
        end
        
        local net = sleitnick:WaitForChild("net", 5)
        if not net then
            warn("net tidak ditemukan")
            return false
        end
        
        -- Nama remote adalah "RF/UpdateAutoFishingState" (dengan slash)
        local updateAutoFishing = net:WaitForChild("RF/UpdateAutoFishingState", 5)
        if not updateAutoFishing then
            warn("RF/UpdateAutoFishingState tidak ditemukan")
            return false
        end
        
        if updateAutoFishing:IsA("RemoteFunction") then
            local invokeResult = updateAutoFishing:InvokeServer(state)
            print("Auto Fishing", state and "diaktifkan" or "dinonaktifkan", "- Result:", invokeResult)
            return true
        else
            warn("RF/UpdateAutoFishingState bukan RemoteFunction")
            return false
        end
    end)
    
    if not success then
        warn("Error saat mengaktifkan auto fishing:", result)
        return false
    end
    
    return result
end

-- Fungsi Start - Dipanggil saat toggle ON
function GoodPerfectionStable.Start()
    print("=== Memulai Auto Fish ===")
    GoodPerfectionStable.Enabled = true
    
    -- Tunggu sebentar untuk memastikan game sudah siap
    task.wait(0.3)
    
    -- Hapus UIGradient
    print("Menghapus UIGradient...")
    local gradientRemoved = removeUIGradient()
    print("UIGradient removed:", gradientRemoved)
    
    -- Tunggu sebentar sebelum mengaktifkan auto
    task.wait(0.5)
    
    -- Aktifkan auto fishing in-game
    print("Mengaktifkan Auto Fishing...")
    local autoEnabled = enableAutoFishing(true)
    print("Auto Fishing enabled:", autoEnabled)
    
    if autoEnabled then
        print("‚úì Auto Fish berhasil diaktifkan!")
    else
        warn("‚úó Auto Fish gagal diaktifkan!")
    end
    
    return autoEnabled
end

-- Fungsi Stop - Dipanggil saat toggle OFF
function GoodPerfectionStable.Stop()
    print("=== Menghentikan Auto Fish ===")
    GoodPerfectionStable.Enabled = false
    
    -- Nonaktifkan auto fishing in-game
    local success = enableAutoFishing(false)
    
    if success then
        print("‚úì Auto Fish berhasil dinonaktifkan!")
    else
        warn("‚úó Auto Fish gagal dinonaktifkan!")
    end
    
    return success
end

-- Fungsi untuk check status
function GoodPerfectionStable.IsEnabled()
    return GoodPerfectionStable.Enabled
end

-- Export module
return GoodPerfectionStable

============================================================
-- File 49: ./Project_code/Utama/SkinSwapAnimation.lua
============================================================

-- TRIPLE SKIN ANIMATION SWITCHER V2
-- File: SkinAnimation.lua
-- Upload ke: https://raw.githubusercontent.com/habibihidayat/project-k/refs/heads/main/FungsiKeaby/SkinAnimation.lua

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LP = Players.LocalPlayer

local SKINS = {
    ["Eclipse"] = {
        ["EquipIdle"] = {
            id = "rbxassetid://103641983335689",
            speed = 1.0,
            priority = Enum.AnimationPriority.Core,
            looped = true,
        },
        ["RodThrow"] = {
            id = "rbxassetid://82600073500966",
            speed = 1.4,
            priority = Enum.AnimationPriority.Action,
            looped = false,
        },
        ["FishCaught"] = {
            id = "rbxassetid://107940819382815",
            speed = 1.0,
            priority = Enum.AnimationPriority.Action4,
            looped = false,
        },
        ["ReelingIdle"] = {
            id = "rbxassetid://115229621326605",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["ReelStart"] = {
            id = "rbxassetid://115229621326605",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = false,
        },
        ["ReelIntermission"] = {
            id = "rbxassetid://115229621326605",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["StartRodCharge"] = {
            id = "rbxassetid://115229621326605",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
    },
    ["HolyTrident"] = {
        ["EquipIdle"] = {
            id = "rbxassetid://83219020397849",
            speed = 1.0,
            priority = Enum.AnimationPriority.Core,
            looped = true,
        },
        ["RodThrow"] = {
            id = "rbxassetid://114917462794864",
            speed = 1.3,
            priority = Enum.AnimationPriority.Action,
            looped = false,
        },
        ["FishCaught"] = {
            id = "rbxassetid://128167068291703",
            speed = 1.2,
            priority = Enum.AnimationPriority.Action4,
            looped = false,
        },
        ["ReelingIdle"] = {
            id = "rbxassetid://126831815839724",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["ReelStart"] = {
            id = "rbxassetid://126831815839724",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["ReelIntermission"] = {
            id = "rbxassetid://126831815839724",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["StartRodCharge"] = {
            id = "rbxassetid://83219020397849",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
    },
    ["SoulScythe"] = {
        ["EquipIdle"] = {
            id = "rbxassetid://84686809448947",
            speed = 1.0,
            priority = Enum.AnimationPriority.Core,
            looped = true,
        },
        ["RodThrow"] = {
            id = "rbxassetid://104946400643250",
            speed = 1.0,
            priority = Enum.AnimationPriority.Action,
            looped = false,
        },
        ["FishCaught"] = {
            id = "rbxassetid://82259219343456",
            speed = 1.2,
            priority = Enum.AnimationPriority.Action4,
            looped = false,
        },
        ["ReelingIdle"] = {
            id = "rbxassetid://95453600470089",
            speed = 1.0,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["ReelStart"] = {
            id = "rbxassetid://137684649541594",
            speed = 1.2,
            priority = Enum.AnimationPriority.Idle,
            looped = false,
        },
        ["ReelIntermission"] = {
            id = "rbxassetid://139621583239992",
            speed = 1.2,
            priority = Enum.AnimationPriority.Idle,
            looped = true,
        },
        ["StartRodCharge"] = {
            id = "rbxassetid://117668204114399",
            speed = 1.4,
            priority = Enum.AnimationPriority.Idle,
            looped = false,
        },
    },
}

local ANIM_ID_MAP = {
    ["96586569072385"] = "EquipIdle",
    ["139622307103608"] = "StartRodCharge",
    ["92624107165273"] = "RodThrow",
    ["136614469321844"] = "ReelStart",
    ["134965425664034"] = "ReelingIdle",
    ["114959536562596"] = "ReelIntermission",
    ["117319000848286"] = "FishCaught",
    ["137429009359442"] = "StartRodCharge",
}

local currentSkin = "Eclipse"
local isEnabled = false
local connections = {}
local replacedTracks = {}
local preloadedAnimations = {}

local function getAnimType(animId)
    local numeric = animId:match("(%d+)")
    return numeric and ANIM_ID_MAP[numeric]
end

local function getCurrentSkinConfig()
    return SKINS[currentSkin]
end

local function getAnimator()
    local char = LP.Character
    if not char then return nil end
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    if not humanoid then return nil end
    return humanoid:FindFirstChildOfClass("Animator")
end

local function getHumanoid()
    local char = LP.Character
    if not char then return nil end
    return char:FindFirstChildOfClass("Humanoid")
end

local function preloadSkinAnimations()
    local humanoid = getHumanoid()
    if not humanoid then return false end
    
    local skinConfig = getCurrentSkinConfig()
    preloadedAnimations = {}
    
    for animName, config in pairs(skinConfig) do
        local anim = Instance.new("Animation")
        anim.AnimationId = config.id
        anim.Name = currentSkin .. "_" .. animName
        
        local success, track = pcall(function()
            return humanoid:LoadAnimation(anim)
        end)
        
        if success and track then
            track.Priority = config.priority
            track.Looped = config.looped
            
            preloadedAnimations[animName] = {
                track = track,
                config = config,
                animation = anim,
            }
        end
    end
    
    return true
end

local function replaceTrackImproved(originalTrack)
    if not originalTrack or not originalTrack.Animation then 
        return false
    end
    
    local animId = originalTrack.Animation.AnimationId
    local animType = getAnimType(animId)
    
    if not animType then 
        return false
    end
    
    local trackKey = tostring(originalTrack)
    if replacedTracks[trackKey] then 
        return false
    end
    
    local preloaded = preloadedAnimations[animType]
    if not preloaded then 
        return false
    end
    
    local config = preloaded.config
    local newTrack = preloaded.track
    
    local wasPlaying = originalTrack.IsPlaying
    local timePos = originalTrack.TimePosition
    local weight = originalTrack.WeightCurrent
    
    if wasPlaying then
        originalTrack:Stop(0)
    end
    
    task.wait(0.02)
    
    if wasPlaying then
        newTrack:Play(0, weight, config.speed)
        pcall(function()
            newTrack.TimePosition = timePos
        end)
    end
    
    replacedTracks[trackKey] = true
    
    local cleanupConn
    cleanupConn = newTrack.Ended:Connect(function()
        replacedTracks[trackKey] = nil
        if cleanupConn then
            cleanupConn:Disconnect()
        end
    end)
    
    return true
end

local function monitorAnimations()
    local animator = getAnimator()
    if not animator then return end
    
    local tracks = animator:GetPlayingAnimationTracks()
    
    for _, track in ipairs(tracks) do
        pcall(function()
            replaceTrackImproved(track)
        end)
    end
end

local function setupAnimatorHook()
    local animator = getAnimator()
    if not animator then return end
    
    local conn = animator.AnimationPlayed:Connect(function(track)
        if not isEnabled then return end
        task.wait(0.01)
        pcall(function()
            replaceTrackImproved(track)
        end)
    end)
    
    table.insert(connections, conn)
end

local function detectRodEquip()
    local char = LP.Character
    if not char then return end
    
    local conn = char.ChildAdded:Connect(function(child)
        if not isEnabled then return end
        if child:IsA("Tool") and child.Name:find("Rod") then
            task.wait(0.5)
            replacedTracks = {}
            monitorAnimations()
        end
    end)
    
    table.insert(connections, conn)
end

local function SwitchSkin(skinName)
    if not SKINS[skinName] then
        return false
    end
    
    currentSkin = skinName
    replacedTracks = {}
    
    for _, data in pairs(preloadedAnimations) do
        pcall(function()
            if data.track then
                data.track:Stop()
            end
            if data.animation then
                data.animation:Destroy()
            end
        end)
    end
    
    preloadSkinAnimations()
    
    if isEnabled then
        task.wait(0.1)
        monitorAnimations()
    end
    
    return true
end

local function Enable()
    if isEnabled then
        return false
    end
    
    isEnabled = true
    replacedTracks = {}
    
    preloadSkinAnimations()
    setupAnimatorHook()
    detectRodEquip()
    
    local monitorConn = RunService.Heartbeat:Connect(function()
        if not isEnabled then return end
        if tick() % 0.1 < 0.016 then
            pcall(monitorAnimations)
        end
    end)
    table.insert(connections, monitorConn)
    
    local respawnConn = LP.CharacterAdded:Connect(function()
        if not isEnabled then return end
        task.wait(2)
        replacedTracks = {}
        preloadSkinAnimations()
        setupAnimatorHook()
        detectRodEquip()
    end)
    table.insert(connections, respawnConn)
    
    task.wait(0.5)
    monitorAnimations()
    
    return true
end

local function Disable()
    if not isEnabled then
        return false
    end
    
    isEnabled = false
    replacedTracks = {}
    
    for _, data in pairs(preloadedAnimations) do
        pcall(function()
            if data.track then
                data.track:Stop()
            end
            if data.animation then
                data.animation:Destroy()
            end
        end)
    end
    preloadedAnimations = {}
    
    for _, conn in ipairs(connections) do
        conn:Disconnect()
    end
    connections = {}
    
    return true
end

-- Return module
return {
    Enable = Enable,
    Disable = Disable,
    SwitchSkin = SwitchSkin,
    IsEnabled = function() return isEnabled end,
    GetCurrentSkin = function() return currentSkin end,
}

============================================================
-- File 50: ./Project_code/Utama/WalkOnWater.lua
============================================================

-- ULTRA STABLE WALK ON WATER V3.2 (MODULE EDITION)
-- AUTO SURFACE LIFT
-- NO CHAT COMMAND
-- GUI / TOGGLE FRIENDLY
-- CLIENT SAFE | RAYCAST ONLY

repeat task.wait() until game:IsLoaded()

----------------------------------------------------------
-- SERVICES
----------------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer

----------------------------------------------------------
-- STATE
----------------------------------------------------------
local WalkOnWater = {
	Enabled = false,
	Platform = nil,
	AlignPos = nil,
	Connection = nil
}

local PLATFORM_SIZE = 14
local OFFSET = 3
local LAST_WATER_Y = nil

----------------------------------------------------------
-- CHARACTER
----------------------------------------------------------
local function GetCharacterReferences()
	local char = LocalPlayer.Character
	if not char then return end

	local humanoid = char:FindFirstChildOfClass("Humanoid")
	local hrp = char:FindFirstChild("HumanoidRootPart")
	if not humanoid or not hrp then return end

	return char, humanoid, hrp
end

----------------------------------------------------------
-- FORCE SURFACE LIFT (ANTI STUCK)
----------------------------------------------------------
local function ForceSurfaceLift()
	local _, humanoid, hrp = GetCharacterReferences()
	if not humanoid or not hrp then return end

	if humanoid:GetState() ~= Enum.HumanoidStateType.Swimming then
		return
	end

	for _ = 1, 60 do
		hrp.Velocity = Vector3.new(0, 80, 0)
		task.wait(0.03)

		if humanoid:GetState() ~= Enum.HumanoidStateType.Swimming then
			break
		end
	end

	hrp.CFrame = hrp.CFrame + Vector3.new(0, 3, 0)
end

----------------------------------------------------------
-- WATER DETECTION (RAYCAST ONLY)
----------------------------------------------------------
local function GetWaterHeight()
	local _, _, hrp = GetCharacterReferences()
	if not hrp then return LAST_WATER_Y end

	local origin = hrp.Position + Vector3.new(0, 5, 0)

	local params = RaycastParams.new()
	params.FilterType = Enum.RaycastFilterType.Blacklist
	params.FilterDescendantsInstances = { LocalPlayer.Character }
	params.IgnoreWater = false

	local result = Workspace:Raycast(
		origin,
		Vector3.new(0, -600, 0),
		params
	)

	if result then
		LAST_WATER_Y = result.Position.Y
		return LAST_WATER_Y
	end

	return LAST_WATER_Y
end

----------------------------------------------------------
-- PLATFORM
----------------------------------------------------------
local function CreatePlatform()
	if WalkOnWater.Platform then
		WalkOnWater.Platform:Destroy()
	end

	local p = Instance.new("Part")
	p.Size = Vector3.new(PLATFORM_SIZE, 1, PLATFORM_SIZE)
	p.Anchored = true
	p.CanCollide = true
	p.Transparency = 1
	p.CanQuery = false
	p.CanTouch = false
	p.Name = "WaterLockPlatform"
	p.Parent = Workspace

	WalkOnWater.Platform = p
end

----------------------------------------------------------
-- ALIGN POSITION
----------------------------------------------------------
local function SetupAlign()
	local _, _, hrp = GetCharacterReferences()
	if not hrp then return false end

	if WalkOnWater.AlignPos then
		WalkOnWater.AlignPos:Destroy()
	end

	local att = hrp:FindFirstChild("RootAttachment")
	if not att then
		att = Instance.new("Attachment")
		att.Name = "RootAttachment"
		att.Parent = hrp
	end

	local ap = Instance.new("AlignPosition")
	ap.Attachment0 = att
	ap.MaxForce = math.huge
	ap.MaxVelocity = math.huge
	ap.Responsiveness = 200
	ap.RigidityEnabled = true
	ap.Parent = hrp

	WalkOnWater.AlignPos = ap
	return true
end

----------------------------------------------------------
-- CLEANUP
----------------------------------------------------------
local function Cleanup()
	if WalkOnWater.Connection then
		WalkOnWater.Connection:Disconnect()
		WalkOnWater.Connection = nil
	end

	if WalkOnWater.AlignPos then
		WalkOnWater.AlignPos:Destroy()
		WalkOnWater.AlignPos = nil
	end

	if WalkOnWater.Platform then
		WalkOnWater.Platform:Destroy()
		WalkOnWater.Platform = nil
	end
end

----------------------------------------------------------
-- START
----------------------------------------------------------
function WalkOnWater.Start()
	if WalkOnWater.Enabled then return end

	local char, humanoid, hrp = GetCharacterReferences()
	if not char or not humanoid or not hrp then return end

	ForceSurfaceLift()

	WalkOnWater.Enabled = true
	LAST_WATER_Y = nil

	CreatePlatform()
	if not SetupAlign() then
		WalkOnWater.Enabled = false
		Cleanup()
		return
	end

	WalkOnWater.Connection = RunService.Heartbeat:Connect(function()
		if not WalkOnWater.Enabled then return end

		local _, _, currentHRP = GetCharacterReferences()
		if not currentHRP then return end

		local waterY = GetWaterHeight()
		if not waterY then return end

		if WalkOnWater.Platform then
			WalkOnWater.Platform.CFrame = CFrame.new(
				currentHRP.Position.X,
				waterY - 0.5,
				currentHRP.Position.Z
			)
		end

		if WalkOnWater.AlignPos then
			WalkOnWater.AlignPos.Position = Vector3.new(
				currentHRP.Position.X,
				waterY + OFFSET,
				currentHRP.Position.Z
			)
		end
	end)
end

----------------------------------------------------------
-- STOP
----------------------------------------------------------
function WalkOnWater.Stop()
	WalkOnWater.Enabled = false
	Cleanup()
end

----------------------------------------------------------
-- RESPAWN SAFE
----------------------------------------------------------
LocalPlayer.CharacterAdded:Connect(function()
	if WalkOnWater.Enabled then
		task.wait(0.5)
		Cleanup()
		WalkOnWater.Enabled = false
		WalkOnWater.Start()
	end
end)

----------------------------------------------------------
return WalkOnWater
